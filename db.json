{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"source/img/build-telegram-bot/banner.png","path":"img/build-telegram-bot/banner.png","modified":1,"renderable":0},{"_id":"source/img/psn-game-boost-plan/banner.png","path":"img/psn-game-boost-plan/banner.png","modified":1,"renderable":0},{"_id":"source/img/deploy-hexo-with-git-hook/banner.png","path":"img/deploy-hexo-with-git-hook/banner.png","modified":1,"renderable":0},{"_id":"source/img/same-origin-and-cross-domain/banner.png","path":"img/same-origin-and-cross-domain/banner.png","modified":1,"renderable":0},{"_id":"source/img/site/avatar.png","path":"img/site/avatar.png","modified":1,"renderable":0},{"_id":"source/img/site/banner.webp","path":"img/site/banner.webp","modified":1,"renderable":0},{"_id":"source/img/site/favicon.ico","path":"img/site/favicon.ico","modified":1,"renderable":0},{"_id":"source/img/unicode-in-javascript/banner.png","path":"img/unicode-in-javascript/banner.png","modified":1,"renderable":0},{"_id":"node_modules/hexo-theme-fluid/source/img/avatar.png","path":"img/avatar.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/loading.gif","path":"img/loading.gif","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/fluid.png","path":"img/fluid.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/default.png","path":"img/default.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/police_beian.png","path":"img/police_beian.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/xml/local-search.xml","path":"xml/local-search.xml","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/css/gitalk.css","path":"css/gitalk.css","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight-dark.styl","path":"css/highlight-dark.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/boot.js","path":"js/boot.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/color-schema.js","path":"js/color-schema.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight.styl","path":"css/highlight.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/events.js","path":"js/events.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/img-lazyload.js","path":"js/img-lazyload.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/leancloud.js","path":"js/leancloud.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/local-search.js","path":"js/local-search.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/plugins.js","path":"js/plugins.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/tags.md","hash":"536fb66f2095fab4f2fbf15e65e6bfbf5d84c70a","modified":1661596008416},{"_id":"source/_posts/psn-game-boost-plan.md","hash":"03c97ef6251eac9c822925a380a91668f82c5132","modified":1661596008412},{"_id":"source/_posts/build-telegram-bot.md","hash":"6e3761a815ab93481dfff4563ce4e15f67b27050","modified":1661596008411},{"_id":"source/_posts/unicode-in-javascript.md","hash":"224b5a94ad6380c5dcdabfd35970cadd126b3394","modified":1661596008412},{"_id":"source/about/index.md","hash":"e9efdf1fa66de11ac758c0c9faa1041cb32c2b95","modified":1661596008413},{"_id":"source/_posts/deploy-hexo-with-git-hook.md","hash":"3d48020c6da253b2658b71f5d96e2e26f9522ac3","modified":1661596008412},{"_id":"source/img/build-telegram-bot/banner.png","hash":"1e025adc8c258433b35be8bb852645d9fda3ab32","modified":1661596008413},{"_id":"source/img/psn-game-boost-plan/banner.png","hash":"2fef9ff9b8119c3ad7d9a2a5ab3cc49f895f2316","modified":1661596008414},{"_id":"source/_posts/same-origin-and-cross-domain.md","hash":"e59802bcb3f9214dd6ec4e9dadc166b4e1b486d1","modified":1661596008412},{"_id":"source/img/deploy-hexo-with-git-hook/banner.png","hash":"3c23e4f90318514d10c83d3b453e89bbd2c525bd","modified":1661596008413},{"_id":"source/img/same-origin-and-cross-domain/banner.png","hash":"067853fe67992e81cd5abf27d60e21e92113da4a","modified":1677310356979},{"_id":"source/img/site/avatar.png","hash":"e98573914df229cbaae7ca0485530e5960cc82f5","modified":1663934900684},{"_id":"source/img/site/banner.webp","hash":"e7f3dd46d4ae5892448f1c52c1ce77ae818f2621","modified":1677310708488},{"_id":"source/img/site/favicon.ico","hash":"99de948b4f520d0ce2eb245af62e6b56ffec43df","modified":1661596008416},{"_id":"source/img/unicode-in-javascript/banner.png","hash":"d74b771b67d5296677923081b7f28f5b69e31a16","modified":1661596008416},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_tag/tag.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1676280377430},{"_id":"node_modules/hexo-theme-fluid/package.json","hash":"30e3f4ccfef8474c05cf0b1eb02e91bd0a152807","modified":1676280377263},{"_id":"node_modules/hexo-theme-fluid/layout/archive.ejs","hash":"7c1f44005849791feae4abaa10fae4cb983d3277","modified":1676280377175},{"_id":"node_modules/hexo-theme-fluid/layout/404.ejs","hash":"b84d575c7b7f778b4cb64e89ad3d0aed4a896820","modified":1676280377171},{"_id":"node_modules/hexo-theme-fluid/layout/about.ejs","hash":"163bee643e6a38912d3ae70923c83c48d57222e7","modified":1676280377172},{"_id":"node_modules/hexo-theme-fluid/layout/category.ejs","hash":"f099161b738a16a32253f42085b5444f902018ed","modified":1676280377181},{"_id":"node_modules/hexo-theme-fluid/layout/page.ejs","hash":"ed5007a3feb8f14d3d2843271bfb298eb0c56219","modified":1676280377209},{"_id":"node_modules/hexo-theme-fluid/_config.yml","hash":"088788e149051fc0a3c6096ba95e35a8344de04b","modified":1676280377435},{"_id":"node_modules/hexo-theme-fluid/LICENSE","hash":"26f9356fd6e84b5a88df6d9014378f41b65ba209","modified":1676280377161},{"_id":"node_modules/hexo-theme-fluid/README.md","hash":"6d752df6f2278033dc2512a7d5be22c8a8eb665a","modified":1676280377264},{"_id":"node_modules/hexo-theme-fluid/layout/categories.ejs","hash":"13859726c27b6c79b5876ec174176d0f9c1ee164","modified":1676280377177},{"_id":"node_modules/hexo-theme-fluid/layout/index.ejs","hash":"db000a6a0cec19d32a6e7e94cd4c478500d9c5ac","modified":1676280377197},{"_id":"node_modules/hexo-theme-fluid/layout/layout.ejs","hash":"7e0023474128fbe4d68c467704c41f1712432415","modified":1676280377198},{"_id":"node_modules/hexo-theme-fluid/layout/tag.ejs","hash":"9d686364c4d16a1a9219471623af452035c5b966","modified":1676280377214},{"_id":"node_modules/hexo-theme-fluid/layout/tags.ejs","hash":"1d06af34b6cf1d8a20d2eb565e309326ceba309f","modified":1676280377215},{"_id":"node_modules/hexo-theme-fluid/layout/links.ejs","hash":"1cac32ec4579aaf7b9fa39d317497331d4c5e1dd","modified":1676280377199},{"_id":"node_modules/hexo-theme-fluid/layout/post.ejs","hash":"505bcc06e55066b7cc5551d9ac0694e7713bfab5","modified":1676280377211},{"_id":"node_modules/hexo-theme-fluid/languages/ja.yml","hash":"3dd6d20f8d26585a7c154a8e59fe8d5d902f4c6a","modified":1676280377440},{"_id":"node_modules/hexo-theme-fluid/languages/de.yml","hash":"0e7d455d9e004ff15d8924b7a0c35cea25ee5b1d","modified":1676280377435},{"_id":"node_modules/hexo-theme-fluid/languages/en.yml","hash":"cb11b39f44ea069652c9647179606b6cecc98d50","modified":1676280377437},{"_id":"node_modules/hexo-theme-fluid/languages/eo.yml","hash":"a556251cc50a5680578c03f1efbf252b1f4ab860","modified":1676280377438},{"_id":"node_modules/hexo-theme-fluid/languages/es.yml","hash":"7112594259c88c04714be152af7fd377687dad40","modified":1676280377439},{"_id":"node_modules/hexo-theme-fluid/scripts/events/index.js","hash":"79de5a379b28cad759a49048351c7f6b8915bd7d","modified":1676280377243},{"_id":"node_modules/hexo-theme-fluid/scripts/generators/local-search.js","hash":"fc2c50405b771b06b7f6cfc4e9de97b992691555","modified":1676280377249},{"_id":"node_modules/hexo-theme-fluid/languages/zh-HK.yml","hash":"80ed400a7adaa92ea54fc7f5d534c9af795bed00","modified":1676280377442},{"_id":"node_modules/hexo-theme-fluid/scripts/generators/pages.js","hash":"d9971f15fbb6b775e3d31a1b9b45011959395010","modified":1676280377254},{"_id":"node_modules/hexo-theme-fluid/languages/zh-CN.yml","hash":"f96a22f989897ecddc69d5867a206e1cf6b8f610","modified":1676280377441},{"_id":"node_modules/hexo-theme-fluid/scripts/filters/default-injects.js","hash":"b2013ae8e189cd07ebc8a2ff48a78e153345210f","modified":1676280377230},{"_id":"node_modules/hexo-theme-fluid/scripts/filters/post-filter.js","hash":"d516b9db63067f9ea9c72cc75ae4ff358417e77d","modified":1676280377256},{"_id":"node_modules/hexo-theme-fluid/scripts/filters/locals.js","hash":"58d0fec976f6b1d35e7ea03edc45414088acf05c","modified":1676280377250},{"_id":"node_modules/hexo-theme-fluid/languages/zh-TW.yml","hash":"596d031dff3826ae8e4ffc8931fff28977b73247","modified":1676280377443},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/date.js","hash":"9bda6382f61b40a20c24af466fe10c8366ebb74c","modified":1676280377230},{"_id":"node_modules/hexo-theme-fluid/languages/ru.yml","hash":"7dc78f22696649a4c68dc65a9b52d9a992fa82a0","modified":1676280377441},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/engine.js","hash":"d3a231d106795ce99cb0bc77eb65f9ae44515933","modified":1676280377231},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/import.js","hash":"ca53e8dbf7d44cfd372cfa79ac60f35a7d5b0076","modified":1676280377242},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/export-config.js","hash":"47e6dba7652a621a54067413490a11c8a89e3d7b","modified":1676280377234},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/injects.js","hash":"1ad2ae6b11bd8806ee7dd6eb7140d8b54a95d613","modified":1676280377245},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/page.js","hash":"4607607445233b3029ef20ed5e91de0da0a7f9c5","modified":1676280377254},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/scope.js","hash":"d41d9d658fcb54964b388598e996747aadb85b0f","modified":1676280377259},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/utils.js","hash":"226f99b465ff513de075a8e78b321d6cb62592ca","modified":1676280377262},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/url.js","hash":"2a6a8288176d0e0f6ec008056bf2745a86e8943e","modified":1676280377260},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/wordcount.js","hash":"4543b8954c5c2ca91191cc0d53cf071b3f26faaa","modified":1676280377263},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/head.ejs","hash":"7b7b1d098726e86687a15fe3d520d178577ffcae","modified":1676280377193},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/archive-list.ejs","hash":"7520fbf91f762207c2ab06b2c293235cd5b23905","modified":1676280377174},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments.ejs","hash":"d707c47b2638c94e489bc43d4cfd098b7c58447f","modified":1676280377184},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/category-list.ejs","hash":"f8d2f1907450e61968e6d54443e9be8138196a77","modified":1676280377180},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/header.ejs","hash":"0d5e397d30051e5fbabe7b47cfd1f1e6a5820af1","modified":1676280377194},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/paginator.ejs","hash":"0f38a2c238169edcb63fc46c23bfc529ff3859b7","modified":1676280377210},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/button.js","hash":"3eb43a8cdea0a64576ad6b31b4df6c2bf5698d4c","modified":1676280377225},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/footer.ejs","hash":"10ccfb8eef4e16182183c9a3e175c90d5b6397d3","modified":1676280377189},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/category-chains.ejs","hash":"18309584aab83bc4deb20723ebad832149dd2e24","modified":1676280377179},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/group-image.js","hash":"4aeebb797026f1df25646a5d69f7fde79b1bcd26","modified":1676280377236},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/checkbox.js","hash":"4938610c3543a921a341bc074626d511cb1a4b45","modified":1676280377226},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/mermaid.js","hash":"75160561e1ef3603b6d2ad2938464ab1cb77fd38","modified":1676280377252},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/css.ejs","hash":"85f6e051550907681ab4ed2e268ac8f6e9ebf931","modified":1676280377186},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/label.js","hash":"f05a6d32cca79535b22907dc03edb9d3fa2d8176","modified":1676280377245},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/note.js","hash":"f52f3a005b41f48b4da274ac64710177c8d4502f","modified":1676280377252},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/object.js","hash":"33b57e4decdc5e75c518859f168c8ba80b2c665b","modified":1676280377253},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/resolve.js","hash":"8c4a8b62aa8608f12f1e9046231dff04859dc3e9","modified":1676280377258},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/compare-versions.js","hash":"dbbc928c914fc2bd242cd66aa0c45971aec13a5d","modified":1676280377228},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/url-join.js","hash":"718aab5e7b2059a06b093ca738de420d9afa44ba","modified":1676280377259},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/markdown-plugins.ejs","hash":"fc4bdf7de0cf1a66d0e5e4fba1b31d6f7ed49468","modified":1676280377203},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/scripts.ejs","hash":"da5810785105e5075861593c7ac22c7aa9665a72","modified":1676280377212},{"_id":"node_modules/hexo-theme-fluid/source/img/avatar.png","hash":"fe739a158cc128f70f780eb5fa96f388b81d478f","modified":1676280377265},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/search.ejs","hash":"70e1c929e084ca8a2648cedabf29b372511ea2b8","modified":1676280377212},{"_id":"node_modules/hexo-theme-fluid/source/img/fluid.png","hash":"64b215db2cb3af98fe639e94537cb5209f959c78","modified":1676280377389},{"_id":"node_modules/hexo-theme-fluid/source/img/police_beian.png","hash":"90efded6baa2dde599a9d6b1387973e8e64923ea","modified":1676280377390},{"_id":"node_modules/hexo-theme-fluid/source/xml/local-search.xml","hash":"8c96ba6a064705602ce28d096fd7dd9069630a55","modified":1676280377433},{"_id":"node_modules/hexo-theme-fluid/source/js/boot.js","hash":"38bd26c6b7acdafda86dda3560e6a3ca488d3c76","modified":1676280377225},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight-dark.styl","hash":"45695ef75c31a4aa57324dd408b7e2327a337018","modified":1676280377416},{"_id":"node_modules/hexo-theme-fluid/source/img/loading.gif","hash":"2d2fc0f947940f98c21afafef39ecf226a2e8d55","modified":1676280377224},{"_id":"node_modules/hexo-theme-fluid/source/css/gitalk.css","hash":"a57b3cc8e04a0a4a27aefa07facf5b5e7bca0e76","modified":1676280377169},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight.styl","hash":"a9efc52a646a9e585439c768557e3e3c9e3326dc","modified":1676280377419},{"_id":"node_modules/hexo-theme-fluid/source/css/main.styl","hash":"855ae5fe229c51afa57f7645f6997a27a705d7e4","modified":1676280377423},{"_id":"node_modules/hexo-theme-fluid/source/js/img-lazyload.js","hash":"cbdeca434ec4da51f488c821d51b4d23c73294af","modified":1676280377240},{"_id":"node_modules/hexo-theme-fluid/source/js/events.js","hash":"89e3561488a618ed0caeb9edf18e441978e29c25","modified":1676280377233},{"_id":"node_modules/hexo-theme-fluid/source/js/color-schema.js","hash":"76a198f8721352ebeaf5b2ef2f4db00612da4796","modified":1676280377227},{"_id":"node_modules/hexo-theme-fluid/source/js/leancloud.js","hash":"eff77c7a5c399fcaefda48884980571e15243fc9","modified":1676280377248},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/compatible-configs.js","hash":"ef474d1fa5bbafc52619ced0f9dc7eaf2affb363","modified":1676280377229},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/footnote.js","hash":"2ec2ae03c79bb1ae7ac3fcf7e00fb52d1af2898d","modified":1676280377236},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/highlight.js","hash":"0f02df2244e275595e72163498d42f42bcf0de5e","modified":1676280377239},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/hello.js","hash":"44c5eb97b98813a07c659d6afedd17fad63b1821","modified":1676280377238},{"_id":"node_modules/hexo-theme-fluid/source/js/local-search.js","hash":"cebcda5991b6a9ab9307c69542389ce9013f04f7","modified":1676280377250},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/merge-configs.js","hash":"7c944c43b2ece5dd84859bd9d1fe955d13427387","modified":1676280377251},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/injects.js","hash":"5ae4b07204683e54b5a1b74e931702bbce2ac23e","modified":1676280377245},{"_id":"node_modules/hexo-theme-fluid/source/js/plugins.js","hash":"c34916291e392a774ff3e85c55badb83e8661297","modified":1676280377255},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/lazyload.js","hash":"9ba0d4bc224e22af8a5a48d6ff13e5a0fcfee2a4","modified":1676280377246},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/changyan.ejs","hash":"c9b2d68ed3d375f1953e7007307d2a3f75ed6249","modified":1676280377182},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/giscus.ejs","hash":"95f8b866b158eff9352c381c243b332a155a5110","modified":1676280377190},{"_id":"node_modules/hexo-theme-fluid/source/js/utils.js","hash":"45cc86f099db0a2c36ad49711ce66c2d598a2ab1","modified":1676280377262},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/livere.ejs","hash":"2264758fed57542a7389c7aa9f00f1aefa17eb87","modified":1676280377202},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/twikoo.ejs","hash":"e6820fb7f13662c42f8433ec95404238f4c1860c","modified":1676280377216},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/cusdis.ejs","hash":"5f9dc012be27040bbe874d0c093c0d53958cc987","modified":1676280377187},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/disqus.ejs","hash":"aab4a4d24c55231a37db308ae94414319cecdd9b","modified":1676280377187},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/remark42.ejs","hash":"d4e9532feeb02aed61bd15eda536b5b631454dac","modified":1676280377211},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/utterances.ejs","hash":"c7ccf7f28308334a6da6f5425b141a24b5eca0e2","modified":1676280377219},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/gitalk.ejs","hash":"843bc141a4545eb20d1c92fb63c85d459b4271ec","modified":1676280377190},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/valine.ejs","hash":"19ba937553dddd317f827d682661a1066a7b1f30","modified":1676280377221},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/waline.ejs","hash":"12727da7cf3ac83443270f550be4d1c06135b52b","modified":1676280377222},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/footer/beian.ejs","hash":"4fb9b5dd3f3e41a586d6af44e5069afe7c81fff2","modified":1676280377177},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/footer/statistics.ejs","hash":"454d8dd4c39f9494ebeb03ca0746f5bc122af76a","modified":1676280377214},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/header/navigation.ejs","hash":"870db75e4e403a840c4463dfeed2c9114846e7cc","modified":1676280377208},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/category-bar.ejs","hash":"8772bce97ed297e7a88523f4e939ed6436c22f87","modified":1676280377178},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/sidebar-right.ejs","hash":"d5fcc9b60e02f869a29a8c17a16a6028ecc1e6d8","modified":1676280377213},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/meta-bottom.ejs","hash":"7079b27a7bc15a7dfa9209f6be6051bdec49ebad","modified":1676280377206},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/header/banner.ejs","hash":"e07757b59e7b89eea213d0e595cb5932f812fd32","modified":1676280377176},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/sidebar-left.ejs","hash":"9992c99b3eb728ad195970e1b84d665f2c8691c4","modified":1676280377213},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/copyright.ejs","hash":"9d13392cea94b66d86422ad17c66e5ae67ce1d32","modified":1676280377185},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/meta-top.ejs","hash":"ce6e9f578f4faa45840abddf8f46af3f4b69c177","modified":1676280377207},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/fancybox.ejs","hash":"9d1ea2a46b8c8ad8c168594d578f40764818ef13","modified":1676280377188},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/highlight.ejs","hash":"7529dd215b09d3557804333942377b9e20fa554e","modified":1676280377195},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/toc.ejs","hash":"635a89060fbf72eeda066fc4bd0a97462f069417","modified":1676280377216},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/analytics.ejs","hash":"1327395a4dde1ea06c476b047fb110bcd269149f","modified":1676280377173},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/mermaid.ejs","hash":"e49506e9895e255e0e53f34a11d325f83109c1b0","modified":1676280377206},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/encrypt.ejs","hash":"e3713fa78e0fc14a239360b020068d8513573ae4","modified":1676280377188},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/code-widget.ejs","hash":"3a505cba37942badf62a56bbb8b605b72af330aa","modified":1676280377184},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/nprogress.ejs","hash":"4c2d39ce816b8a6dcd6b53113c8695f8bd650a23","modified":1676280377209},{"_id":"node_modules/hexo-theme-fluid/source/css/_functions/base.styl","hash":"2e46f3f4e2c9fe34c1ff1c598738fc7349ae8188","modified":1676280377398},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/math.ejs","hash":"dcbf9a381ee76f2f1f75fcbc22c50a502ec85023","modified":1676280377203},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/pages.styl","hash":"b8e887bc7fb3b765a1f8ec9448eff8603a41984f","modified":1676280377426},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_about/about.styl","hash":"97fe42516ea531fdad771489b68aa8b2a7f6ae46","modified":1676280377391},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_archive/archive.styl","hash":"c475e6681546d30350eaed11f23081ecae80c375","modified":1676280377397},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/typed.ejs","hash":"51faef29f8e464bcb2e73049b428b88c8dd8b40a","modified":1676280377217},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/anchorjs.ejs","hash":"40181442d3a2b8734783a0ad7caf2d2522e3f2ab","modified":1676280377173},{"_id":"node_modules/hexo-theme-fluid/source/css/_variables/base.styl","hash":"4ed5f0ae105ef4c7dd92eaf652ceda176c38e502","modified":1676280377402},{"_id":"node_modules/hexo-theme-fluid/source/css/_mixins/base.styl","hash":"542e306ee9494e8a78e44d6d7d409605d94caeb3","modified":1676280377399},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/base.styl","hash":"643284c567665f96915f0b64e59934dda315f74d","modified":1676280377400},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_index/index.styl","hash":"0acbd71633bcc7191672ea4e1b2277bea350d73b","modified":1676280377421},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_links/links.styl","hash":"5c7f2044e3f1da05a3229537c06bd879836f8d6e","modified":1676280377423},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_category/category-chain.styl","hash":"0cdf7ef50dfd0669d3b257821384ff31cd81b7c9","modified":1676280377406},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/comment.styl","hash":"780f3788e7357bcd3f3262d781cb91bb53976a93","modified":1676280377410},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/inline.styl","hash":"411a3fa3f924a87e00ff04d18b5c83283b049a4d","modified":1676280377421},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/color-schema.styl","hash":"61279540c2623ea4bf93e40613d41380839b92d3","modified":1676280377409},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_category/category-bar.styl","hash":"cc6df43fef6bb3efecbfdd8b9e467424a1dea581","modified":1676280377404},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/keyframes.styl","hash":"94065ea50f5bef7566d184f2422f6ac20866ba22","modified":1676280377422},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_category/category-list.styl","hash":"7edfe1b571ecca7d08f5f4dbcf76f4ffdcfbf0b5","modified":1676280377407},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/highlight.styl","hash":"4df764d298fe556e501db4afc2b05686fe6ebcfb","modified":1676280377418},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_tag/tags.styl","hash":"65bfc01c76abc927fa1a23bf2422892b0d566c3f","modified":1676280377431},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/post-tag.styl","hash":"27f70062415ccf66a9b6f4952db124fc1471fda5","modified":1676280377428},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/markdown.styl","hash":"1e3d3a82721e7c10bcfcecec6d81cf2979039452","modified":1676280377424},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/anchorjs.styl","hash":"e0cebda4a6f499aff75e71417d88caa7ceb13b94","modified":1676280377392},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/board.styl","hash":"4397037fc3f0033dbe546c33cd9dbdabd8cb1632","modified":1676280377402},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/post-page.styl","hash":"127bb5391370afe7fef2a297084d76406bc5e902","modified":1676280377427},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/code-widget.styl","hash":"b66ab013f0f37d724a149b85b3c7432afcf460ad","modified":1676280377408},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/copyright.styl","hash":"26f71a9cd60d96bb0cb5bbdf58150b8e524d9707","modified":1676280377411},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/banner.styl","hash":"7a0bd629bc234fc75e3cc8e3715ffada92f09e73","modified":1676280377397},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/modal.styl","hash":"adf6c1e5c8e1fb41c77ce6e2258001df61245aa2","modified":1676280377425},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/footnote.styl","hash":"ae9289cc89649af2042907f8a003303b987f3404","modified":1676280377415},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/ngrogress.styl","hash":"5d225357b4a58d46118e6616377168336ed44cb2","modified":1676280377425},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/noscript.styl","hash":"0cf2f2bb44f456150d428016675d5876a9d2e2aa","modified":1676280377425},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/footer.styl","hash":"2caaca71dd1ff63d583099ed817677dd267b457e","modified":1676280377412},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/pagination.styl","hash":"8bb1b68e5f3552cb48c2ffa31edbc53646a8fb4c","modified":1676280377426},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/qrcode.styl","hash":"78704a94c0436097abfb0e0a57abeb3429c749b7","modified":1676280377429},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/search.styl","hash":"10f7e91a91e681fb9fe46f9df7707b9ef78707c8","modified":1676280377430},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/header.styl","hash":"c4459248c66ea1326feed021179b847ae91d465f","modified":1676280377416},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/scroll-btn.styl","hash":"f0e429a27fa8a7658fcbddbb4d4dbe4afa12499a","modified":1676280377429},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/toc.styl","hash":"9e7452aa2372153f25d7a4675c9d36d281a65d24","modified":1676280377432},{"_id":"node_modules/hexo-theme-fluid/source/img/default.png","hash":"167a12978d80371cf578c8a2e45c24a2eb25b6fb","modified":1676280377389}],"Category":[{"name":"Unix","_id":"clejnkd4t0003uoqrf5v6345d"},{"name":"Life","_id":"clejnkd4y000buoqr0ocdex44"},{"name":"FE","_id":"clejnkd4z000guoqr5e1b2iua"}],"Data":[],"Page":[{"title":"æ ‡ç­¾","date":"2022-09-21T16:55:49.554Z","layout":"tags","_content":"","source":"tags.md","raw":"---\ntitle: æ ‡ç­¾\ndate:\nlayout: tags\npermalink: /tags/\n---\n","updated":"2022-08-27T10:26:48.416Z","path":"/tags/index.html","comments":1,"_id":"clejnkd4n0000uoqrf37igmv4","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"about","date":"2020-07-22T04:20:33.000Z","layout":"about","_content":"\néšä¾¿å†™å†™ï¼Œè®°å½•ç”Ÿæ´»ï¼Œå¼€å¼€å¿ƒå¿ƒã€‚\n\n## ğŸ”¨\n\n- ![Github](http://img.shields.io/badge/-Github-000000?style=flat&logo=github&logoColor=FFFFFF)\n- ![VS Code](http://img.shields.io/badge/-VS%20Code-007ACC?style=flat&logo=visual%20studio%20code&logoColor=white)\n- ![Node.js](https://img.shields.io/badge/-Node.js-3C873A?style=flat&logo=Node.js&logoColor=white)\n- ![HTML5](https://img.shields.io/badge/-HTML5-E34F26?style=flat&logo=html5&logoColor=white)\n- ![CSS3](https://img.shields.io/badge/-CSS3-1572B6?style=flat&logo=css3&logoColor=white)\n- ![JavaScript](https://img.shields.io/badge/-JavaScript-eed718?style=flat&logo=javascript&logoColor=ffffff)\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2020-07-22 12:20:33\nlayout: about\n---\n\néšä¾¿å†™å†™ï¼Œè®°å½•ç”Ÿæ´»ï¼Œå¼€å¼€å¿ƒå¿ƒã€‚\n\n## ğŸ”¨\n\n- ![Github](http://img.shields.io/badge/-Github-000000?style=flat&logo=github&logoColor=FFFFFF)\n- ![VS Code](http://img.shields.io/badge/-VS%20Code-007ACC?style=flat&logo=visual%20studio%20code&logoColor=white)\n- ![Node.js](https://img.shields.io/badge/-Node.js-3C873A?style=flat&logo=Node.js&logoColor=white)\n- ![HTML5](https://img.shields.io/badge/-HTML5-E34F26?style=flat&logo=html5&logoColor=white)\n- ![CSS3](https://img.shields.io/badge/-CSS3-1572B6?style=flat&logo=css3&logoColor=white)\n- ![JavaScript](https://img.shields.io/badge/-JavaScript-eed718?style=flat&logo=javascript&logoColor=ffffff)\n","updated":"2022-08-27T10:26:48.413Z","path":"about/index.html","comments":1,"_id":"clejnkd4s0002uoqr6ec17zee","content":"<p>éšä¾¿å†™å†™ï¼Œè®°å½•ç”Ÿæ´»ï¼Œå¼€å¼€å¿ƒå¿ƒã€‚</p>\n<h2 id=\"ğŸ”¨\"><a href=\"#ğŸ”¨\" class=\"headerlink\" title=\"ğŸ”¨\"></a>ğŸ”¨</h2><ul>\n<li><img src=\"http://img.shields.io/badge/-Github-000000?style=flat&logo=github&logoColor=FFFFFF\" alt=\"Github\"></li>\n<li><img src=\"http://img.shields.io/badge/-VS%20Code-007ACC?style=flat&logo=visual%20studio%20code&logoColor=white\" alt=\"VS Code\"></li>\n<li><img src=\"https://img.shields.io/badge/-Node.js-3C873A?style=flat&logo=Node.js&logoColor=white\" alt=\"Node.js\"></li>\n<li><img src=\"https://img.shields.io/badge/-HTML5-E34F26?style=flat&logo=html5&logoColor=white\" alt=\"HTML5\"></li>\n<li><img src=\"https://img.shields.io/badge/-CSS3-1572B6?style=flat&logo=css3&logoColor=white\" alt=\"CSS3\"></li>\n<li><img src=\"https://img.shields.io/badge/-JavaScript-eed718?style=flat&logo=javascript&logoColor=ffffff\" alt=\"JavaScript\"></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>éšä¾¿å†™å†™ï¼Œè®°å½•ç”Ÿæ´»ï¼Œå¼€å¼€å¿ƒå¿ƒã€‚</p>\n<h2 id=\"ğŸ”¨\"><a href=\"#ğŸ”¨\" class=\"headerlink\" title=\"ğŸ”¨\"></a>ğŸ”¨</h2><ul>\n<li><img src=\"http://img.shields.io/badge/-Github-000000?style=flat&logo=github&logoColor=FFFFFF\" alt=\"Github\"></li>\n<li><img src=\"http://img.shields.io/badge/-VS%20Code-007ACC?style=flat&logo=visual%20studio%20code&logoColor=white\" alt=\"VS Code\"></li>\n<li><img src=\"https://img.shields.io/badge/-Node.js-3C873A?style=flat&logo=Node.js&logoColor=white\" alt=\"Node.js\"></li>\n<li><img src=\"https://img.shields.io/badge/-HTML5-E34F26?style=flat&logo=html5&logoColor=white\" alt=\"HTML5\"></li>\n<li><img src=\"https://img.shields.io/badge/-CSS3-1572B6?style=flat&logo=css3&logoColor=white\" alt=\"CSS3\"></li>\n<li><img src=\"https://img.shields.io/badge/-JavaScript-eed718?style=flat&logo=javascript&logoColor=ffffff\" alt=\"JavaScript\"></li>\n</ul>\n"}],"Post":[{"title":"å¦‚ä½•åˆ›å»ºä¸€ä¸ª Telegram Bot","date":"2019-04-20T02:25:50.000Z","index_img":"/img/build-telegram-bot/banner.png","_content":"\nä½œä¸ºä¸€ä¸ª Telegram çš„é‡åº¦ç”¨æˆ·ï¼Œæ—©åœ¨ä½¿ç”¨ä¹‹åˆæˆ‘å°±å¬è¯´ `Telegram Bot` çš„å¼€æ”¾æ€§ã€‚æ·±å…¥äº†è§£ä»¥åæˆ‘ä½¿ç”¨ Bot å®ç°äº†ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ¯”å¦‚é€šè¿‡ Bot æŸ¥è¯¢å…¬äº¤åˆ°ç«™æƒ…å†µã€æŸ¥è¯¢å†å²ä¸Šçš„ä»Šå¤©ã€é€šè¿‡ `Github Release API` è·å–æœ€æ–° SS ä¸‹è½½é“¾æ¥ä»¥åŠæŸ¥è¯¢ä¿¡æ¯ç”ŸæˆäºŒç»´ç ç­‰ã€‚è¿™äº›åŠŸèƒ½é€šè¿‡ç®€å•å‘½ä»¤è°ƒç”¨ï¼Œç›¸å½“æ–¹ä¾¿ã€‚ä»Šå¤©å°±æ¥åˆ†äº«ä¸€ä¸‹å¦‚ä½•åˆ›å»ºä¸€ä¸ª `Telegram Bot`ã€‚\n\n<!-- more -->\n\n### å‡†å¤‡å·¥ä½œ\n\n- é€šè¿‡ [Bot Father](https://telegram.me/botfather) å¡«å†™è¯¦æƒ…å¹¶è·å–å¯¹åº”çš„ Token\n\n- ç†Ÿæ‚‰å®˜æ–¹æ–‡æ¡£ï¼Œå‚è§ï¼š[Telegram Bot API](https://core.telegram.org/bots/api)\n\n- åŠ æŒ HTTPS çš„åŸŸåä»¥åŠä¸€å° VPS ç”¨æ¥è¿è¡Œä½ çš„å®ä¾‹\n\n### æ­£å¼å¼€å‘\n\nå®˜æ–¹æä¾›çš„æ–‡æ¡£å·²ç»ååˆ†è¯¦ç»†äº†ï¼Œä½†æ˜¯å¾ˆå¤šç»†èŠ‚éœ€è¦äºŒæ¬¡å°è£…ï¼Œæ‰€ä»¥ä½¿ç”¨äº†åŸºäº Node.js çš„ `node-telegram-bot-api`ï¼Œä»¥ä¸‹ä¸ºäº†æ–¹ä¾¿ï¼Œç®€ç§° NTã€‚\n\nNT çš„ä½¿ç”¨ç›¸å½“ç®€å•ï¼Œåªéœ€è¦åå¤šè¡Œä»£ç å°±å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„ Botã€‚è¿™é‡Œè´´ä¸€æ®µå®˜æ–¹çš„ä»£ç ï¼Œå…¶ä¸­çš„æ³¨é‡Šæˆ‘å·²ç»ç¿»è¯‘è¿‡æ¥äº†ã€‚\n\n```Javascript\nconst TelegramBot = require('node-telegram-bot-api')\n\n// æ›¿æ¢ token çš„å€¼ä¸ºä½ ä» @BotFather é‚£é‡Œç”³è¯·çš„ token\nconst token = 'YOUR_TELEGRAM_BOT_TOKEN'\n\n// ç”±äºæ˜¯åœ¨å¼€å‘é˜¶æ®µï¼Œæ‰€ä»¥ä½¿ç”¨ 'polling'ï¼ˆè½®è¯¢ï¼‰æ¨¡å¼æ¥è·å–å‘ç»™ bot çš„ä¿¡æ¯\nconst bot = new TelegramBot(token, { polling: true })\n\n// åŒ¹é… '/echo [whatever]'\nbot.onText(/\\/echo (.+)/, (msg, match) => {\n  // 'msg' æ˜¯ä» Telegram æ¥æ‰‹åˆ°çš„ä¿¡æ¯\n  // 'match' æ˜¯å¯¹ä¼ æ¥çš„æ¶ˆæ¯æ‰§è¡Œæ­£åˆ™åè·å¾—çš„ç»“æœ\n\n  const chatId = msg.chat.id\n  const resp = match[1] // æ•è·åˆ°çš„ 'whatever'\n\n  // æŠŠåŒ¹é…åˆ°çš„ 'whatever' å‘é€å›å¯¹è¯ä¸­\n  bot.sendMessage(chatId, resp)\n})\n\n// ç›‘å¬ä»»ä½•ç§ç±»çš„ä¿¡æ¯ï¼Œå¦‚ï¼šéŸ³é¢‘ï¼Œè§†é¢‘ï¼Œå›¾ç‰‡ï¼Œæ–‡æœ¬ç­‰\nbot.on('message', msg => {\n  const chatId = msg.chat.id\n\n  // å‘é€ 'Received your message' åˆ°å¯¹è¯ä¸­\n  bot.sendMessage(chatId, 'Received your message')\n})\n```\n\nTelegram çš„å·¥ä½œæ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¸åœçš„è½®è¯¢ Telegram æœåŠ¡å™¨æ¥è·å–å‘é€ç»™ä½  Bot çš„æ¶ˆæ¯ï¼Œå³ pollingã€‚å¦ä¸€ç§åˆ™æ˜¯è®¾ç½® WebHook ï¼Œè¿™æ ·å½“ Telegram æœåŠ¡å™¨æ”¶åˆ°å˜åŠ¨åˆ™ä¼šå°†æ¶ˆæ¯å†…å®¹åŠç›¸å…³ä¿¡æ¯é€šè¿‡ WebHook äº¤ç»™ä½ çš„æœåŠ¡ç«¯æ¥å¤„ç†ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼éœ€è¦ä½ çš„ VPS é…ç½® HTTPS æ‰èƒ½ä½¿ç”¨ï¼ˆå®‰å…¨è€ƒé‡ï¼‰ã€‚\n\nå…³äº HTTPS çš„è®¤è¯ï¼Œå¯ä»¥çœ‹çœ‹ [acme.sh](https://github.com/Neilpang/acme.sh)ï¼Œå®ƒé€šè¿‡å®ç° acme åè®®ï¼Œå¯ä»¥ä» letsencrypt ç”Ÿæˆå…è´¹çš„è¯ä¹¦ï¼Œå¹¶ä¸”æä¾›å®šæ—¶ç»­ç­¾ç­‰åŠŸèƒ½ï¼Œååˆ†çš„æ–¹ä¾¿ã€‚\n\nå½“ä½ å®Œæˆ HTTPS è®¤è¯åï¼Œå¯ä»¥é€šè¿‡ `process.env.NODE_ENV` æ¥å®ç°å¼€å‘å’Œçº¿ä¸Šç¯å¢ƒçš„åŒºåˆ†ï¼Œå¦‚æœä½ è¿˜ä¸äº†è§£ `process.env`ï¼Œè¯·çœ‹[è¿™é‡Œ](https://nodejs.org/api/process.html#process_process_env)ã€‚\n\n```Javascript\nif (process.env.NODE_ENV === 'development') {\n  // å¼€å‘ç¯å¢ƒä½¿ç”¨è½®è¯¢æ¨¡å¼\n  const bot = new TelegramBot(TOKEN, { polling: true })\n} else if (process.env.NODE_ENV === 'production') {\n  // çº¿ä¸Šç¯å¢ƒè®¾ç½® `WebHook`\n  const bot = new TelegramBot(TOKEN)\n  bot.setWebHook(VPSURL)\n\n  // å°†æ¥æ”¶åˆ°çš„æ•°æ®è½¬æˆ JSON\n  const app = express()\n  app.use(bodyParser.json())\n\n  // é…ç½®è·¯ç”±æ¥å—æ¥è‡ª Telegram çš„æ¶ˆæ¯\n  app.post(`/bot`, (req, res) => {\n    bot.processUpdate(req.body)\n    res.sendStatus(200)\n  })\n\n  // å¯åŠ¨ Express æœåŠ¡å™¨\n  app.listen(9999, () => {\n    console.log('Express server is listening on 9999')\n  })\n}\n```\n\nå½“å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼Œä½ å°±å¯ä»¥å°†å…¶éƒ¨ç½²åœ¨ä½ çš„ VPS ä¹‹ä¸Šäº†ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ PM2 æ¥å®ç°éƒ¨ç½²ï¼Œä¸ä»…æ”¯æŒè´Ÿè½½å‡è¡¡ï¼Œè¿˜èƒ½å®ç°çƒ­é‡å¯ã€‚è¿™é‡Œè´´ä¸€æ®µ PM2 é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ `pm2 start app.json` å°±å¯ä»¥é¡ºç•…ä½“éªŒäº†ã€‚\n\n```Javascript\n{\n  \"apps\": [\n    {\n      \"name\": \"TelegramBot\",\n      \"script\": \"./server/index.js\",\n      \"env\": {\n        \"NODE_ENV\": \"production\"\n      }\n    }\n  ]\n}\n```\n","source":"_posts/build-telegram-bot.md","raw":"---\ntitle: å¦‚ä½•åˆ›å»ºä¸€ä¸ª Telegram Bot\ndate: 2019-04-20 10:25:50\ncategories:\n  - Unix\ntags:\n  - Telegram\nindex_img: /img/build-telegram-bot/banner.png\n---\n\nä½œä¸ºä¸€ä¸ª Telegram çš„é‡åº¦ç”¨æˆ·ï¼Œæ—©åœ¨ä½¿ç”¨ä¹‹åˆæˆ‘å°±å¬è¯´ `Telegram Bot` çš„å¼€æ”¾æ€§ã€‚æ·±å…¥äº†è§£ä»¥åæˆ‘ä½¿ç”¨ Bot å®ç°äº†ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ¯”å¦‚é€šè¿‡ Bot æŸ¥è¯¢å…¬äº¤åˆ°ç«™æƒ…å†µã€æŸ¥è¯¢å†å²ä¸Šçš„ä»Šå¤©ã€é€šè¿‡ `Github Release API` è·å–æœ€æ–° SS ä¸‹è½½é“¾æ¥ä»¥åŠæŸ¥è¯¢ä¿¡æ¯ç”ŸæˆäºŒç»´ç ç­‰ã€‚è¿™äº›åŠŸèƒ½é€šè¿‡ç®€å•å‘½ä»¤è°ƒç”¨ï¼Œç›¸å½“æ–¹ä¾¿ã€‚ä»Šå¤©å°±æ¥åˆ†äº«ä¸€ä¸‹å¦‚ä½•åˆ›å»ºä¸€ä¸ª `Telegram Bot`ã€‚\n\n<!-- more -->\n\n### å‡†å¤‡å·¥ä½œ\n\n- é€šè¿‡ [Bot Father](https://telegram.me/botfather) å¡«å†™è¯¦æƒ…å¹¶è·å–å¯¹åº”çš„ Token\n\n- ç†Ÿæ‚‰å®˜æ–¹æ–‡æ¡£ï¼Œå‚è§ï¼š[Telegram Bot API](https://core.telegram.org/bots/api)\n\n- åŠ æŒ HTTPS çš„åŸŸåä»¥åŠä¸€å° VPS ç”¨æ¥è¿è¡Œä½ çš„å®ä¾‹\n\n### æ­£å¼å¼€å‘\n\nå®˜æ–¹æä¾›çš„æ–‡æ¡£å·²ç»ååˆ†è¯¦ç»†äº†ï¼Œä½†æ˜¯å¾ˆå¤šç»†èŠ‚éœ€è¦äºŒæ¬¡å°è£…ï¼Œæ‰€ä»¥ä½¿ç”¨äº†åŸºäº Node.js çš„ `node-telegram-bot-api`ï¼Œä»¥ä¸‹ä¸ºäº†æ–¹ä¾¿ï¼Œç®€ç§° NTã€‚\n\nNT çš„ä½¿ç”¨ç›¸å½“ç®€å•ï¼Œåªéœ€è¦åå¤šè¡Œä»£ç å°±å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„ Botã€‚è¿™é‡Œè´´ä¸€æ®µå®˜æ–¹çš„ä»£ç ï¼Œå…¶ä¸­çš„æ³¨é‡Šæˆ‘å·²ç»ç¿»è¯‘è¿‡æ¥äº†ã€‚\n\n```Javascript\nconst TelegramBot = require('node-telegram-bot-api')\n\n// æ›¿æ¢ token çš„å€¼ä¸ºä½ ä» @BotFather é‚£é‡Œç”³è¯·çš„ token\nconst token = 'YOUR_TELEGRAM_BOT_TOKEN'\n\n// ç”±äºæ˜¯åœ¨å¼€å‘é˜¶æ®µï¼Œæ‰€ä»¥ä½¿ç”¨ 'polling'ï¼ˆè½®è¯¢ï¼‰æ¨¡å¼æ¥è·å–å‘ç»™ bot çš„ä¿¡æ¯\nconst bot = new TelegramBot(token, { polling: true })\n\n// åŒ¹é… '/echo [whatever]'\nbot.onText(/\\/echo (.+)/, (msg, match) => {\n  // 'msg' æ˜¯ä» Telegram æ¥æ‰‹åˆ°çš„ä¿¡æ¯\n  // 'match' æ˜¯å¯¹ä¼ æ¥çš„æ¶ˆæ¯æ‰§è¡Œæ­£åˆ™åè·å¾—çš„ç»“æœ\n\n  const chatId = msg.chat.id\n  const resp = match[1] // æ•è·åˆ°çš„ 'whatever'\n\n  // æŠŠåŒ¹é…åˆ°çš„ 'whatever' å‘é€å›å¯¹è¯ä¸­\n  bot.sendMessage(chatId, resp)\n})\n\n// ç›‘å¬ä»»ä½•ç§ç±»çš„ä¿¡æ¯ï¼Œå¦‚ï¼šéŸ³é¢‘ï¼Œè§†é¢‘ï¼Œå›¾ç‰‡ï¼Œæ–‡æœ¬ç­‰\nbot.on('message', msg => {\n  const chatId = msg.chat.id\n\n  // å‘é€ 'Received your message' åˆ°å¯¹è¯ä¸­\n  bot.sendMessage(chatId, 'Received your message')\n})\n```\n\nTelegram çš„å·¥ä½œæ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¸åœçš„è½®è¯¢ Telegram æœåŠ¡å™¨æ¥è·å–å‘é€ç»™ä½  Bot çš„æ¶ˆæ¯ï¼Œå³ pollingã€‚å¦ä¸€ç§åˆ™æ˜¯è®¾ç½® WebHook ï¼Œè¿™æ ·å½“ Telegram æœåŠ¡å™¨æ”¶åˆ°å˜åŠ¨åˆ™ä¼šå°†æ¶ˆæ¯å†…å®¹åŠç›¸å…³ä¿¡æ¯é€šè¿‡ WebHook äº¤ç»™ä½ çš„æœåŠ¡ç«¯æ¥å¤„ç†ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼éœ€è¦ä½ çš„ VPS é…ç½® HTTPS æ‰èƒ½ä½¿ç”¨ï¼ˆå®‰å…¨è€ƒé‡ï¼‰ã€‚\n\nå…³äº HTTPS çš„è®¤è¯ï¼Œå¯ä»¥çœ‹çœ‹ [acme.sh](https://github.com/Neilpang/acme.sh)ï¼Œå®ƒé€šè¿‡å®ç° acme åè®®ï¼Œå¯ä»¥ä» letsencrypt ç”Ÿæˆå…è´¹çš„è¯ä¹¦ï¼Œå¹¶ä¸”æä¾›å®šæ—¶ç»­ç­¾ç­‰åŠŸèƒ½ï¼Œååˆ†çš„æ–¹ä¾¿ã€‚\n\nå½“ä½ å®Œæˆ HTTPS è®¤è¯åï¼Œå¯ä»¥é€šè¿‡ `process.env.NODE_ENV` æ¥å®ç°å¼€å‘å’Œçº¿ä¸Šç¯å¢ƒçš„åŒºåˆ†ï¼Œå¦‚æœä½ è¿˜ä¸äº†è§£ `process.env`ï¼Œè¯·çœ‹[è¿™é‡Œ](https://nodejs.org/api/process.html#process_process_env)ã€‚\n\n```Javascript\nif (process.env.NODE_ENV === 'development') {\n  // å¼€å‘ç¯å¢ƒä½¿ç”¨è½®è¯¢æ¨¡å¼\n  const bot = new TelegramBot(TOKEN, { polling: true })\n} else if (process.env.NODE_ENV === 'production') {\n  // çº¿ä¸Šç¯å¢ƒè®¾ç½® `WebHook`\n  const bot = new TelegramBot(TOKEN)\n  bot.setWebHook(VPSURL)\n\n  // å°†æ¥æ”¶åˆ°çš„æ•°æ®è½¬æˆ JSON\n  const app = express()\n  app.use(bodyParser.json())\n\n  // é…ç½®è·¯ç”±æ¥å—æ¥è‡ª Telegram çš„æ¶ˆæ¯\n  app.post(`/bot`, (req, res) => {\n    bot.processUpdate(req.body)\n    res.sendStatus(200)\n  })\n\n  // å¯åŠ¨ Express æœåŠ¡å™¨\n  app.listen(9999, () => {\n    console.log('Express server is listening on 9999')\n  })\n}\n```\n\nå½“å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼Œä½ å°±å¯ä»¥å°†å…¶éƒ¨ç½²åœ¨ä½ çš„ VPS ä¹‹ä¸Šäº†ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ PM2 æ¥å®ç°éƒ¨ç½²ï¼Œä¸ä»…æ”¯æŒè´Ÿè½½å‡è¡¡ï¼Œè¿˜èƒ½å®ç°çƒ­é‡å¯ã€‚è¿™é‡Œè´´ä¸€æ®µ PM2 é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ `pm2 start app.json` å°±å¯ä»¥é¡ºç•…ä½“éªŒäº†ã€‚\n\n```Javascript\n{\n  \"apps\": [\n    {\n      \"name\": \"TelegramBot\",\n      \"script\": \"./server/index.js\",\n      \"env\": {\n        \"NODE_ENV\": \"production\"\n      }\n    }\n  ]\n}\n```\n","slug":"build-telegram-bot","published":1,"updated":"2022-08-27T10:26:48.411Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clejnkd4q0001uoqrbawiafgx","content":"<p>ä½œä¸ºä¸€ä¸ª Telegram çš„é‡åº¦ç”¨æˆ·ï¼Œæ—©åœ¨ä½¿ç”¨ä¹‹åˆæˆ‘å°±å¬è¯´ <code>Telegram Bot</code> çš„å¼€æ”¾æ€§ã€‚æ·±å…¥äº†è§£ä»¥åæˆ‘ä½¿ç”¨ Bot å®ç°äº†ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ¯”å¦‚é€šè¿‡ Bot æŸ¥è¯¢å…¬äº¤åˆ°ç«™æƒ…å†µã€æŸ¥è¯¢å†å²ä¸Šçš„ä»Šå¤©ã€é€šè¿‡ <code>Github Release API</code> è·å–æœ€æ–° SS ä¸‹è½½é“¾æ¥ä»¥åŠæŸ¥è¯¢ä¿¡æ¯ç”ŸæˆäºŒç»´ç ç­‰ã€‚è¿™äº›åŠŸèƒ½é€šè¿‡ç®€å•å‘½ä»¤è°ƒç”¨ï¼Œç›¸å½“æ–¹ä¾¿ã€‚ä»Šå¤©å°±æ¥åˆ†äº«ä¸€ä¸‹å¦‚ä½•åˆ›å»ºä¸€ä¸ª <code>Telegram Bot</code>ã€‚</p>\n<span id=\"more\"></span>\n\n<h3 id=\"å‡†å¤‡å·¥ä½œ\"><a href=\"#å‡†å¤‡å·¥ä½œ\" class=\"headerlink\" title=\"å‡†å¤‡å·¥ä½œ\"></a>å‡†å¤‡å·¥ä½œ</h3><ul>\n<li><p>é€šè¿‡ <a href=\"https://telegram.me/botfather\">Bot Father</a> å¡«å†™è¯¦æƒ…å¹¶è·å–å¯¹åº”çš„ Token</p>\n</li>\n<li><p>ç†Ÿæ‚‰å®˜æ–¹æ–‡æ¡£ï¼Œå‚è§ï¼š<a href=\"https://core.telegram.org/bots/api\">Telegram Bot API</a></p>\n</li>\n<li><p>åŠ æŒ HTTPS çš„åŸŸåä»¥åŠä¸€å° VPS ç”¨æ¥è¿è¡Œä½ çš„å®ä¾‹</p>\n</li>\n</ul>\n<h3 id=\"æ­£å¼å¼€å‘\"><a href=\"#æ­£å¼å¼€å‘\" class=\"headerlink\" title=\"æ­£å¼å¼€å‘\"></a>æ­£å¼å¼€å‘</h3><p>å®˜æ–¹æä¾›çš„æ–‡æ¡£å·²ç»ååˆ†è¯¦ç»†äº†ï¼Œä½†æ˜¯å¾ˆå¤šç»†èŠ‚éœ€è¦äºŒæ¬¡å°è£…ï¼Œæ‰€ä»¥ä½¿ç”¨äº†åŸºäº Node.js çš„ <code>node-telegram-bot-api</code>ï¼Œä»¥ä¸‹ä¸ºäº†æ–¹ä¾¿ï¼Œç®€ç§° NTã€‚</p>\n<p>NT çš„ä½¿ç”¨ç›¸å½“ç®€å•ï¼Œåªéœ€è¦åå¤šè¡Œä»£ç å°±å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„ Botã€‚è¿™é‡Œè´´ä¸€æ®µå®˜æ–¹çš„ä»£ç ï¼Œå…¶ä¸­çš„æ³¨é‡Šæˆ‘å·²ç»ç¿»è¯‘è¿‡æ¥äº†ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">TelegramBot</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;node-telegram-bot-api&#x27;</span>)<br><br><span class=\"hljs-comment\">// æ›¿æ¢ token çš„å€¼ä¸ºä½ ä» @BotFather é‚£é‡Œç”³è¯·çš„ token</span><br><span class=\"hljs-keyword\">const</span> token = <span class=\"hljs-string\">&#x27;YOUR_TELEGRAM_BOT_TOKEN&#x27;</span><br><br><span class=\"hljs-comment\">// ç”±äºæ˜¯åœ¨å¼€å‘é˜¶æ®µï¼Œæ‰€ä»¥ä½¿ç”¨ &#x27;polling&#x27;ï¼ˆè½®è¯¢ï¼‰æ¨¡å¼æ¥è·å–å‘ç»™ bot çš„ä¿¡æ¯</span><br><span class=\"hljs-keyword\">const</span> bot = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TelegramBot</span>(token, &#123; <span class=\"hljs-attr\">polling</span>: <span class=\"hljs-literal\">true</span> &#125;)<br><br><span class=\"hljs-comment\">// åŒ¹é… &#x27;/echo [whatever]&#x27;</span><br>bot.<span class=\"hljs-title function_\">onText</span>(<span class=\"hljs-regexp\">/\\/echo (.+)/</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">msg, match</span>) =&gt;</span> &#123;<br>  <span class=\"hljs-comment\">// &#x27;msg&#x27; æ˜¯ä» Telegram æ¥æ‰‹åˆ°çš„ä¿¡æ¯</span><br>  <span class=\"hljs-comment\">// &#x27;match&#x27; æ˜¯å¯¹ä¼ æ¥çš„æ¶ˆæ¯æ‰§è¡Œæ­£åˆ™åè·å¾—çš„ç»“æœ</span><br><br>  <span class=\"hljs-keyword\">const</span> chatId = msg.<span class=\"hljs-property\">chat</span>.<span class=\"hljs-property\">id</span><br>  <span class=\"hljs-keyword\">const</span> resp = match[<span class=\"hljs-number\">1</span>] <span class=\"hljs-comment\">// æ•è·åˆ°çš„ &#x27;whatever&#x27;</span><br><br>  <span class=\"hljs-comment\">// æŠŠåŒ¹é…åˆ°çš„ &#x27;whatever&#x27; å‘é€å›å¯¹è¯ä¸­</span><br>  bot.<span class=\"hljs-title function_\">sendMessage</span>(chatId, resp)<br>&#125;)<br><br><span class=\"hljs-comment\">// ç›‘å¬ä»»ä½•ç§ç±»çš„ä¿¡æ¯ï¼Œå¦‚ï¼šéŸ³é¢‘ï¼Œè§†é¢‘ï¼Œå›¾ç‰‡ï¼Œæ–‡æœ¬ç­‰</span><br>bot.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">&#x27;message&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">msg</span> =&gt;</span> &#123;<br>  <span class=\"hljs-keyword\">const</span> chatId = msg.<span class=\"hljs-property\">chat</span>.<span class=\"hljs-property\">id</span><br><br>  <span class=\"hljs-comment\">// å‘é€ &#x27;Received your message&#x27; åˆ°å¯¹è¯ä¸­</span><br>  bot.<span class=\"hljs-title function_\">sendMessage</span>(chatId, <span class=\"hljs-string\">&#x27;Received your message&#x27;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure>\n\n<p>Telegram çš„å·¥ä½œæ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¸åœçš„è½®è¯¢ Telegram æœåŠ¡å™¨æ¥è·å–å‘é€ç»™ä½  Bot çš„æ¶ˆæ¯ï¼Œå³ pollingã€‚å¦ä¸€ç§åˆ™æ˜¯è®¾ç½® WebHook ï¼Œè¿™æ ·å½“ Telegram æœåŠ¡å™¨æ”¶åˆ°å˜åŠ¨åˆ™ä¼šå°†æ¶ˆæ¯å†…å®¹åŠç›¸å…³ä¿¡æ¯é€šè¿‡ WebHook äº¤ç»™ä½ çš„æœåŠ¡ç«¯æ¥å¤„ç†ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼éœ€è¦ä½ çš„ VPS é…ç½® HTTPS æ‰èƒ½ä½¿ç”¨ï¼ˆå®‰å…¨è€ƒé‡ï¼‰ã€‚</p>\n<p>å…³äº HTTPS çš„è®¤è¯ï¼Œå¯ä»¥çœ‹çœ‹ <a href=\"https://github.com/Neilpang/acme.sh\">acme.sh</a>ï¼Œå®ƒé€šè¿‡å®ç° acme åè®®ï¼Œå¯ä»¥ä» letsencrypt ç”Ÿæˆå…è´¹çš„è¯ä¹¦ï¼Œå¹¶ä¸”æä¾›å®šæ—¶ç»­ç­¾ç­‰åŠŸèƒ½ï¼Œååˆ†çš„æ–¹ä¾¿ã€‚</p>\n<p>å½“ä½ å®Œæˆ HTTPS è®¤è¯åï¼Œå¯ä»¥é€šè¿‡ <code>process.env.NODE_ENV</code> æ¥å®ç°å¼€å‘å’Œçº¿ä¸Šç¯å¢ƒçš„åŒºåˆ†ï¼Œå¦‚æœä½ è¿˜ä¸äº†è§£ <code>process.env</code>ï¼Œè¯·çœ‹<a href=\"https://nodejs.org/api/process.html#process_process_env\">è¿™é‡Œ</a>ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> === <span class=\"hljs-string\">&#x27;development&#x27;</span>) &#123;<br>  <span class=\"hljs-comment\">// å¼€å‘ç¯å¢ƒä½¿ç”¨è½®è¯¢æ¨¡å¼</span><br>  <span class=\"hljs-keyword\">const</span> bot = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TelegramBot</span>(<span class=\"hljs-variable constant_\">TOKEN</span>, &#123; <span class=\"hljs-attr\">polling</span>: <span class=\"hljs-literal\">true</span> &#125;)<br>&#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> === <span class=\"hljs-string\">&#x27;production&#x27;</span>) &#123;<br>  <span class=\"hljs-comment\">// çº¿ä¸Šç¯å¢ƒè®¾ç½® `WebHook`</span><br>  <span class=\"hljs-keyword\">const</span> bot = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TelegramBot</span>(<span class=\"hljs-variable constant_\">TOKEN</span>)<br>  bot.<span class=\"hljs-title function_\">setWebHook</span>(<span class=\"hljs-variable constant_\">VPSURL</span>)<br><br>  <span class=\"hljs-comment\">// å°†æ¥æ”¶åˆ°çš„æ•°æ®è½¬æˆ JSON</span><br>  <span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()<br>  app.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">json</span>())<br><br>  <span class=\"hljs-comment\">// é…ç½®è·¯ç”±æ¥å—æ¥è‡ª Telegram çš„æ¶ˆæ¯</span><br>  app.<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-string\">`/bot`</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> &#123;<br>    bot.<span class=\"hljs-title function_\">processUpdate</span>(req.<span class=\"hljs-property\">body</span>)<br>    res.<span class=\"hljs-title function_\">sendStatus</span>(<span class=\"hljs-number\">200</span>)<br>  &#125;)<br><br>  <span class=\"hljs-comment\">// å¯åŠ¨ Express æœåŠ¡å™¨</span><br>  app.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">9999</span>, <span class=\"hljs-function\">() =&gt;</span> &#123;<br>    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;Express server is listening on 9999&#x27;</span>)<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<p>å½“å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼Œä½ å°±å¯ä»¥å°†å…¶éƒ¨ç½²åœ¨ä½ çš„ VPS ä¹‹ä¸Šäº†ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ PM2 æ¥å®ç°éƒ¨ç½²ï¼Œä¸ä»…æ”¯æŒè´Ÿè½½å‡è¡¡ï¼Œè¿˜èƒ½å®ç°çƒ­é‡å¯ã€‚è¿™é‡Œè´´ä¸€æ®µ PM2 é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ <code>pm2 start app.json</code> å°±å¯ä»¥é¡ºç•…ä½“éªŒäº†ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\">&#123;<br>  <span class=\"hljs-string\">&quot;apps&quot;</span>: [<br>    &#123;<br>      <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;TelegramBot&quot;</span>,<br>      <span class=\"hljs-string\">&quot;script&quot;</span>: <span class=\"hljs-string\">&quot;./server/index.js&quot;</span>,<br>      <span class=\"hljs-string\">&quot;env&quot;</span>: &#123;<br>        <span class=\"hljs-string\">&quot;NODE_ENV&quot;</span>: <span class=\"hljs-string\">&quot;production&quot;</span><br>      &#125;<br>    &#125;<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>ä½œä¸ºä¸€ä¸ª Telegram çš„é‡åº¦ç”¨æˆ·ï¼Œæ—©åœ¨ä½¿ç”¨ä¹‹åˆæˆ‘å°±å¬è¯´ <code>Telegram Bot</code> çš„å¼€æ”¾æ€§ã€‚æ·±å…¥äº†è§£ä»¥åæˆ‘ä½¿ç”¨ Bot å®ç°äº†ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ¯”å¦‚é€šè¿‡ Bot æŸ¥è¯¢å…¬äº¤åˆ°ç«™æƒ…å†µã€æŸ¥è¯¢å†å²ä¸Šçš„ä»Šå¤©ã€é€šè¿‡ <code>Github Release API</code> è·å–æœ€æ–° SS ä¸‹è½½é“¾æ¥ä»¥åŠæŸ¥è¯¢ä¿¡æ¯ç”ŸæˆäºŒç»´ç ç­‰ã€‚è¿™äº›åŠŸèƒ½é€šè¿‡ç®€å•å‘½ä»¤è°ƒç”¨ï¼Œç›¸å½“æ–¹ä¾¿ã€‚ä»Šå¤©å°±æ¥åˆ†äº«ä¸€ä¸‹å¦‚ä½•åˆ›å»ºä¸€ä¸ª <code>Telegram Bot</code>ã€‚</p>","more":"<h3 id=\"å‡†å¤‡å·¥ä½œ\"><a href=\"#å‡†å¤‡å·¥ä½œ\" class=\"headerlink\" title=\"å‡†å¤‡å·¥ä½œ\"></a>å‡†å¤‡å·¥ä½œ</h3><ul>\n<li><p>é€šè¿‡ <a href=\"https://telegram.me/botfather\">Bot Father</a> å¡«å†™è¯¦æƒ…å¹¶è·å–å¯¹åº”çš„ Token</p>\n</li>\n<li><p>ç†Ÿæ‚‰å®˜æ–¹æ–‡æ¡£ï¼Œå‚è§ï¼š<a href=\"https://core.telegram.org/bots/api\">Telegram Bot API</a></p>\n</li>\n<li><p>åŠ æŒ HTTPS çš„åŸŸåä»¥åŠä¸€å° VPS ç”¨æ¥è¿è¡Œä½ çš„å®ä¾‹</p>\n</li>\n</ul>\n<h3 id=\"æ­£å¼å¼€å‘\"><a href=\"#æ­£å¼å¼€å‘\" class=\"headerlink\" title=\"æ­£å¼å¼€å‘\"></a>æ­£å¼å¼€å‘</h3><p>å®˜æ–¹æä¾›çš„æ–‡æ¡£å·²ç»ååˆ†è¯¦ç»†äº†ï¼Œä½†æ˜¯å¾ˆå¤šç»†èŠ‚éœ€è¦äºŒæ¬¡å°è£…ï¼Œæ‰€ä»¥ä½¿ç”¨äº†åŸºäº Node.js çš„ <code>node-telegram-bot-api</code>ï¼Œä»¥ä¸‹ä¸ºäº†æ–¹ä¾¿ï¼Œç®€ç§° NTã€‚</p>\n<p>NT çš„ä½¿ç”¨ç›¸å½“ç®€å•ï¼Œåªéœ€è¦åå¤šè¡Œä»£ç å°±å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„ Botã€‚è¿™é‡Œè´´ä¸€æ®µå®˜æ–¹çš„ä»£ç ï¼Œå…¶ä¸­çš„æ³¨é‡Šæˆ‘å·²ç»ç¿»è¯‘è¿‡æ¥äº†ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">TelegramBot</span> = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;node-telegram-bot-api&#x27;</span>)<br><br><span class=\"hljs-comment\">// æ›¿æ¢ token çš„å€¼ä¸ºä½ ä» @BotFather é‚£é‡Œç”³è¯·çš„ token</span><br><span class=\"hljs-keyword\">const</span> token = <span class=\"hljs-string\">&#x27;YOUR_TELEGRAM_BOT_TOKEN&#x27;</span><br><br><span class=\"hljs-comment\">// ç”±äºæ˜¯åœ¨å¼€å‘é˜¶æ®µï¼Œæ‰€ä»¥ä½¿ç”¨ &#x27;polling&#x27;ï¼ˆè½®è¯¢ï¼‰æ¨¡å¼æ¥è·å–å‘ç»™ bot çš„ä¿¡æ¯</span><br><span class=\"hljs-keyword\">const</span> bot = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TelegramBot</span>(token, &#123; <span class=\"hljs-attr\">polling</span>: <span class=\"hljs-literal\">true</span> &#125;)<br><br><span class=\"hljs-comment\">// åŒ¹é… &#x27;/echo [whatever]&#x27;</span><br>bot.<span class=\"hljs-title function_\">onText</span>(<span class=\"hljs-regexp\">/\\/echo (.+)/</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">msg, match</span>) =&gt;</span> &#123;<br>  <span class=\"hljs-comment\">// &#x27;msg&#x27; æ˜¯ä» Telegram æ¥æ‰‹åˆ°çš„ä¿¡æ¯</span><br>  <span class=\"hljs-comment\">// &#x27;match&#x27; æ˜¯å¯¹ä¼ æ¥çš„æ¶ˆæ¯æ‰§è¡Œæ­£åˆ™åè·å¾—çš„ç»“æœ</span><br><br>  <span class=\"hljs-keyword\">const</span> chatId = msg.<span class=\"hljs-property\">chat</span>.<span class=\"hljs-property\">id</span><br>  <span class=\"hljs-keyword\">const</span> resp = match[<span class=\"hljs-number\">1</span>] <span class=\"hljs-comment\">// æ•è·åˆ°çš„ &#x27;whatever&#x27;</span><br><br>  <span class=\"hljs-comment\">// æŠŠåŒ¹é…åˆ°çš„ &#x27;whatever&#x27; å‘é€å›å¯¹è¯ä¸­</span><br>  bot.<span class=\"hljs-title function_\">sendMessage</span>(chatId, resp)<br>&#125;)<br><br><span class=\"hljs-comment\">// ç›‘å¬ä»»ä½•ç§ç±»çš„ä¿¡æ¯ï¼Œå¦‚ï¼šéŸ³é¢‘ï¼Œè§†é¢‘ï¼Œå›¾ç‰‡ï¼Œæ–‡æœ¬ç­‰</span><br>bot.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">&#x27;message&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">msg</span> =&gt;</span> &#123;<br>  <span class=\"hljs-keyword\">const</span> chatId = msg.<span class=\"hljs-property\">chat</span>.<span class=\"hljs-property\">id</span><br><br>  <span class=\"hljs-comment\">// å‘é€ &#x27;Received your message&#x27; åˆ°å¯¹è¯ä¸­</span><br>  bot.<span class=\"hljs-title function_\">sendMessage</span>(chatId, <span class=\"hljs-string\">&#x27;Received your message&#x27;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure>\n\n<p>Telegram çš„å·¥ä½œæ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¸åœçš„è½®è¯¢ Telegram æœåŠ¡å™¨æ¥è·å–å‘é€ç»™ä½  Bot çš„æ¶ˆæ¯ï¼Œå³ pollingã€‚å¦ä¸€ç§åˆ™æ˜¯è®¾ç½® WebHook ï¼Œè¿™æ ·å½“ Telegram æœåŠ¡å™¨æ”¶åˆ°å˜åŠ¨åˆ™ä¼šå°†æ¶ˆæ¯å†…å®¹åŠç›¸å…³ä¿¡æ¯é€šè¿‡ WebHook äº¤ç»™ä½ çš„æœåŠ¡ç«¯æ¥å¤„ç†ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼éœ€è¦ä½ çš„ VPS é…ç½® HTTPS æ‰èƒ½ä½¿ç”¨ï¼ˆå®‰å…¨è€ƒé‡ï¼‰ã€‚</p>\n<p>å…³äº HTTPS çš„è®¤è¯ï¼Œå¯ä»¥çœ‹çœ‹ <a href=\"https://github.com/Neilpang/acme.sh\">acme.sh</a>ï¼Œå®ƒé€šè¿‡å®ç° acme åè®®ï¼Œå¯ä»¥ä» letsencrypt ç”Ÿæˆå…è´¹çš„è¯ä¹¦ï¼Œå¹¶ä¸”æä¾›å®šæ—¶ç»­ç­¾ç­‰åŠŸèƒ½ï¼Œååˆ†çš„æ–¹ä¾¿ã€‚</p>\n<p>å½“ä½ å®Œæˆ HTTPS è®¤è¯åï¼Œå¯ä»¥é€šè¿‡ <code>process.env.NODE_ENV</code> æ¥å®ç°å¼€å‘å’Œçº¿ä¸Šç¯å¢ƒçš„åŒºåˆ†ï¼Œå¦‚æœä½ è¿˜ä¸äº†è§£ <code>process.env</code>ï¼Œè¯·çœ‹<a href=\"https://nodejs.org/api/process.html#process_process_env\">è¿™é‡Œ</a>ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> === <span class=\"hljs-string\">&#x27;development&#x27;</span>) &#123;<br>  <span class=\"hljs-comment\">// å¼€å‘ç¯å¢ƒä½¿ç”¨è½®è¯¢æ¨¡å¼</span><br>  <span class=\"hljs-keyword\">const</span> bot = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TelegramBot</span>(<span class=\"hljs-variable constant_\">TOKEN</span>, &#123; <span class=\"hljs-attr\">polling</span>: <span class=\"hljs-literal\">true</span> &#125;)<br>&#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> === <span class=\"hljs-string\">&#x27;production&#x27;</span>) &#123;<br>  <span class=\"hljs-comment\">// çº¿ä¸Šç¯å¢ƒè®¾ç½® `WebHook`</span><br>  <span class=\"hljs-keyword\">const</span> bot = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TelegramBot</span>(<span class=\"hljs-variable constant_\">TOKEN</span>)<br>  bot.<span class=\"hljs-title function_\">setWebHook</span>(<span class=\"hljs-variable constant_\">VPSURL</span>)<br><br>  <span class=\"hljs-comment\">// å°†æ¥æ”¶åˆ°çš„æ•°æ®è½¬æˆ JSON</span><br>  <span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>()<br>  app.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">json</span>())<br><br>  <span class=\"hljs-comment\">// é…ç½®è·¯ç”±æ¥å—æ¥è‡ª Telegram çš„æ¶ˆæ¯</span><br>  app.<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-string\">`/bot`</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =&gt;</span> &#123;<br>    bot.<span class=\"hljs-title function_\">processUpdate</span>(req.<span class=\"hljs-property\">body</span>)<br>    res.<span class=\"hljs-title function_\">sendStatus</span>(<span class=\"hljs-number\">200</span>)<br>  &#125;)<br><br>  <span class=\"hljs-comment\">// å¯åŠ¨ Express æœåŠ¡å™¨</span><br>  app.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">9999</span>, <span class=\"hljs-function\">() =&gt;</span> &#123;<br>    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;Express server is listening on 9999&#x27;</span>)<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<p>å½“å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼Œä½ å°±å¯ä»¥å°†å…¶éƒ¨ç½²åœ¨ä½ çš„ VPS ä¹‹ä¸Šäº†ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ PM2 æ¥å®ç°éƒ¨ç½²ï¼Œä¸ä»…æ”¯æŒè´Ÿè½½å‡è¡¡ï¼Œè¿˜èƒ½å®ç°çƒ­é‡å¯ã€‚è¿™é‡Œè´´ä¸€æ®µ PM2 é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ <code>pm2 start app.json</code> å°±å¯ä»¥é¡ºç•…ä½“éªŒäº†ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\">&#123;<br>  <span class=\"hljs-string\">&quot;apps&quot;</span>: [<br>    &#123;<br>      <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;TelegramBot&quot;</span>,<br>      <span class=\"hljs-string\">&quot;script&quot;</span>: <span class=\"hljs-string\">&quot;./server/index.js&quot;</span>,<br>      <span class=\"hljs-string\">&quot;env&quot;</span>: &#123;<br>        <span class=\"hljs-string\">&quot;NODE_ENV&quot;</span>: <span class=\"hljs-string\">&quot;production&quot;</span><br>      &#125;<br>    &#125;<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure>"},{"title":"ä½¿ç”¨ Git Hook éƒ¨ç½² Hexo åˆ° VPS","date":"2018-04-14T08:17:24.000Z","index_img":"/img/deploy-hexo-with-git-hook/banner.png","_content":"\nè£…å¥½ Hexo ä»¥åï¼Œæ€»æ˜¯å¿ä¸ä½å†™ç‚¹ä»€ä¹ˆï¼Œåˆšå¥½æƒ³åˆ°å¯ä»¥æŠŠè‡ªåŠ¨éƒ¨ç½²çš„è¿‡ç¨‹æ‹¿å‡ºæ¥è¯´ä¸€ä¸‹ã€‚ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹éƒ½æ˜¯æ•™ä½ å¦‚ä½•å°† Hexo éƒ¨ç½²åˆ° `Github Pages` ä¸Šï¼Œä½†æ˜¯ä»Šå¤©è¦è¯´çš„æ˜¯æŠŠ Hexo éƒ¨ç½²åˆ°è‡ªå·±çš„ VPS ä¸Šï¼Œå‚è€ƒäº†ä¸€äº›æ•™ç¨‹ï¼Œå†™ä¸€ä¸ªæˆ‘è§‰å¾—ä¸é”™çš„åŠæ³•ã€‚\n\n<!-- more -->\n\n### é…ç½® VPS çš„ Git ç¯å¢ƒ\n\nç”±äºæˆ‘çš„ VPS ä¸Šæ˜¯ `Ubuntu 18.04`ï¼Œæ‰€ä»¥è¯´ä¸‹æˆ‘çš„æ­¥éª¤ï¼Œå…¶ä»–ç³»ç»Ÿç±»ä¼¼ã€‚\n\n### ç¬¬ä¸€æ­¥\n\nå®‰è£… Git:\n\n```bash\n$ apt-get install git\n```\n\n### ç¬¬äºŒæ­¥\n\nè®¾ç½® SSH é€šè¿‡å¯†é’¥ç™»å½•ï¼Œå…·ä½“æ­¥éª¤å¯ä»¥å‚è€ƒ[è¿™é‡Œ](https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/)\n\n### ç¬¬ä¸‰æ­¥\n\nåˆå§‹åŒ– Git ä»“åº“ï¼Œæˆ‘å°†å…¶æ”¾åœ¨ `/root/hexobot/blog.git` ç›®å½•ä¸‹ï¼š\n\n```bash\n$ mkdir /root/hexobot && cd /root/hexobot\n$ git init --bare blog.git\n```\n\nä½¿ç”¨ --bare å‚æ•°ï¼ŒGit å°±ä¼šåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“æ²¡æœ‰å·¥ä½œåŒºã€‚\n\n### ç¬¬å››æ­¥\n\né…ç½® `Git Hooks`ï¼Œè¯¦æƒ…å¯å‚è€ƒ[è¿™é‡Œ](https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90)ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯ `post-receive`ï¼Œè¿™ä¸ª Hook ä¼šåœ¨ git æ“ä½œå®Œåè¢«è¿è¡Œã€‚\n\n```bash\n$ cd /root/hexobot/blog.git/hooks\n$ vim post-receive\n```\n\nåœ¨ `post-receive` ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š\n\n```bash\n#!/bin/sh\ngit --work-tree=/home/wwwroot/blog --git-dir=/root/hexobot/blog.git checkout -f\n```\n\næ³¨æ„ï¼Œ`/home/wwwroot/blog` è¦æ¢æˆä½ è‡ªå·±çš„éƒ¨ç½²ç›®å½•ï¼Œä¸Šé¢çš„å‘½ä»¤ä¼šåœ¨æ¯æ¬¡ push ä»¥åæŠŠéƒ¨ç½²ç›®å½•æ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå½“ç„¶ï¼Œä¸è¦å¿˜è®°ç»™è¿™ä¸ªè„šæœ¬æå‡æƒé™ã€‚\n\n```bash\n$ chmod +x post-receive\n```\n\n### æœ¬åœ°é…ç½®\n\nä¿®æ”¹ hexo ç›®å½•ä¸‹çš„ `_config.yml` æ–‡ä»¶ï¼Œæ‰¾åˆ° deploy æ¡ç›®ï¼Œå¹¶ä¿®æ”¹ä¸ºï¼š\n\n```bash\ndeploy:\n  type: git\n  repo: git@xxx.xxx.xxx.xxx:/root/hexobot/blog.git\n  branch: master\n```\n\nè¦æ³¨æ„æ¢æˆä½ è‡ªå·±çš„æœåŠ¡å™¨åœ°å€ï¼Œä»¥åŠæœåŠ¡å™¨ç«¯ git ä»“åº“çš„ç›®å½•ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ hexo è‡ªåŠ¨éƒ¨ç½²å·²ç»å…¨éƒ¨é…ç½®å¥½äº†ã€‚\n\n> æœ‰äº›æƒ…å†µä¸‹ï¼Œhexo-deployer-git æ²¡æœ‰è¢«å®‰è£…ï¼Œè¯·è‡ªè¡Œå®‰è£…ã€‚\n\n### ä½¿ç”¨\n\n```bash\n$ hexo new \"post\"\n\n# write something ....\n\n$ hexo clean && hexo g -d\n```\n\nå½“ç„¶äº†ï¼Œå¦‚æœä½ æ˜¯ zsh ç”¨æˆ·ï¼Œä½ è¿˜å¯ä»¥å°†è¿™ä¸ª alias åŠ å…¥ `~/.zshrc` ä¸­ï¼š\n\n```bash\nalias Post='hexo clean && hexo g -d'\n```\n\nFinallyï¼Œjust enjoy~\n","source":"_posts/deploy-hexo-with-git-hook.md","raw":"---\ntitle: ä½¿ç”¨ Git Hook éƒ¨ç½² Hexo åˆ° VPS\ndate: 2018-04-14 16:17:24\ncategories:\n  - Unix\ntags:\n  - Hexo\nindex_img: /img/deploy-hexo-with-git-hook/banner.png\n---\n\nè£…å¥½ Hexo ä»¥åï¼Œæ€»æ˜¯å¿ä¸ä½å†™ç‚¹ä»€ä¹ˆï¼Œåˆšå¥½æƒ³åˆ°å¯ä»¥æŠŠè‡ªåŠ¨éƒ¨ç½²çš„è¿‡ç¨‹æ‹¿å‡ºæ¥è¯´ä¸€ä¸‹ã€‚ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹éƒ½æ˜¯æ•™ä½ å¦‚ä½•å°† Hexo éƒ¨ç½²åˆ° `Github Pages` ä¸Šï¼Œä½†æ˜¯ä»Šå¤©è¦è¯´çš„æ˜¯æŠŠ Hexo éƒ¨ç½²åˆ°è‡ªå·±çš„ VPS ä¸Šï¼Œå‚è€ƒäº†ä¸€äº›æ•™ç¨‹ï¼Œå†™ä¸€ä¸ªæˆ‘è§‰å¾—ä¸é”™çš„åŠæ³•ã€‚\n\n<!-- more -->\n\n### é…ç½® VPS çš„ Git ç¯å¢ƒ\n\nç”±äºæˆ‘çš„ VPS ä¸Šæ˜¯ `Ubuntu 18.04`ï¼Œæ‰€ä»¥è¯´ä¸‹æˆ‘çš„æ­¥éª¤ï¼Œå…¶ä»–ç³»ç»Ÿç±»ä¼¼ã€‚\n\n### ç¬¬ä¸€æ­¥\n\nå®‰è£… Git:\n\n```bash\n$ apt-get install git\n```\n\n### ç¬¬äºŒæ­¥\n\nè®¾ç½® SSH é€šè¿‡å¯†é’¥ç™»å½•ï¼Œå…·ä½“æ­¥éª¤å¯ä»¥å‚è€ƒ[è¿™é‡Œ](https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/)\n\n### ç¬¬ä¸‰æ­¥\n\nåˆå§‹åŒ– Git ä»“åº“ï¼Œæˆ‘å°†å…¶æ”¾åœ¨ `/root/hexobot/blog.git` ç›®å½•ä¸‹ï¼š\n\n```bash\n$ mkdir /root/hexobot && cd /root/hexobot\n$ git init --bare blog.git\n```\n\nä½¿ç”¨ --bare å‚æ•°ï¼ŒGit å°±ä¼šåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“æ²¡æœ‰å·¥ä½œåŒºã€‚\n\n### ç¬¬å››æ­¥\n\né…ç½® `Git Hooks`ï¼Œè¯¦æƒ…å¯å‚è€ƒ[è¿™é‡Œ](https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90)ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯ `post-receive`ï¼Œè¿™ä¸ª Hook ä¼šåœ¨ git æ“ä½œå®Œåè¢«è¿è¡Œã€‚\n\n```bash\n$ cd /root/hexobot/blog.git/hooks\n$ vim post-receive\n```\n\nåœ¨ `post-receive` ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š\n\n```bash\n#!/bin/sh\ngit --work-tree=/home/wwwroot/blog --git-dir=/root/hexobot/blog.git checkout -f\n```\n\næ³¨æ„ï¼Œ`/home/wwwroot/blog` è¦æ¢æˆä½ è‡ªå·±çš„éƒ¨ç½²ç›®å½•ï¼Œä¸Šé¢çš„å‘½ä»¤ä¼šåœ¨æ¯æ¬¡ push ä»¥åæŠŠéƒ¨ç½²ç›®å½•æ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå½“ç„¶ï¼Œä¸è¦å¿˜è®°ç»™è¿™ä¸ªè„šæœ¬æå‡æƒé™ã€‚\n\n```bash\n$ chmod +x post-receive\n```\n\n### æœ¬åœ°é…ç½®\n\nä¿®æ”¹ hexo ç›®å½•ä¸‹çš„ `_config.yml` æ–‡ä»¶ï¼Œæ‰¾åˆ° deploy æ¡ç›®ï¼Œå¹¶ä¿®æ”¹ä¸ºï¼š\n\n```bash\ndeploy:\n  type: git\n  repo: git@xxx.xxx.xxx.xxx:/root/hexobot/blog.git\n  branch: master\n```\n\nè¦æ³¨æ„æ¢æˆä½ è‡ªå·±çš„æœåŠ¡å™¨åœ°å€ï¼Œä»¥åŠæœåŠ¡å™¨ç«¯ git ä»“åº“çš„ç›®å½•ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ hexo è‡ªåŠ¨éƒ¨ç½²å·²ç»å…¨éƒ¨é…ç½®å¥½äº†ã€‚\n\n> æœ‰äº›æƒ…å†µä¸‹ï¼Œhexo-deployer-git æ²¡æœ‰è¢«å®‰è£…ï¼Œè¯·è‡ªè¡Œå®‰è£…ã€‚\n\n### ä½¿ç”¨\n\n```bash\n$ hexo new \"post\"\n\n# write something ....\n\n$ hexo clean && hexo g -d\n```\n\nå½“ç„¶äº†ï¼Œå¦‚æœä½ æ˜¯ zsh ç”¨æˆ·ï¼Œä½ è¿˜å¯ä»¥å°†è¿™ä¸ª alias åŠ å…¥ `~/.zshrc` ä¸­ï¼š\n\n```bash\nalias Post='hexo clean && hexo g -d'\n```\n\nFinallyï¼Œjust enjoy~\n","slug":"deploy-hexo-with-git-hook","published":1,"updated":"2022-08-27T10:26:48.412Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clejnkd4w0007uoqr5l8d0h3m","content":"<p>è£…å¥½ Hexo ä»¥åï¼Œæ€»æ˜¯å¿ä¸ä½å†™ç‚¹ä»€ä¹ˆï¼Œåˆšå¥½æƒ³åˆ°å¯ä»¥æŠŠè‡ªåŠ¨éƒ¨ç½²çš„è¿‡ç¨‹æ‹¿å‡ºæ¥è¯´ä¸€ä¸‹ã€‚ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹éƒ½æ˜¯æ•™ä½ å¦‚ä½•å°† Hexo éƒ¨ç½²åˆ° <code>Github Pages</code> ä¸Šï¼Œä½†æ˜¯ä»Šå¤©è¦è¯´çš„æ˜¯æŠŠ Hexo éƒ¨ç½²åˆ°è‡ªå·±çš„ VPS ä¸Šï¼Œå‚è€ƒäº†ä¸€äº›æ•™ç¨‹ï¼Œå†™ä¸€ä¸ªæˆ‘è§‰å¾—ä¸é”™çš„åŠæ³•ã€‚</p>\n<span id=\"more\"></span>\n\n<h3 id=\"é…ç½®-VPS-çš„-Git-ç¯å¢ƒ\"><a href=\"#é…ç½®-VPS-çš„-Git-ç¯å¢ƒ\" class=\"headerlink\" title=\"é…ç½® VPS çš„ Git ç¯å¢ƒ\"></a>é…ç½® VPS çš„ Git ç¯å¢ƒ</h3><p>ç”±äºæˆ‘çš„ VPS ä¸Šæ˜¯ <code>Ubuntu 18.04</code>ï¼Œæ‰€ä»¥è¯´ä¸‹æˆ‘çš„æ­¥éª¤ï¼Œå…¶ä»–ç³»ç»Ÿç±»ä¼¼ã€‚</p>\n<h3 id=\"ç¬¬ä¸€æ­¥\"><a href=\"#ç¬¬ä¸€æ­¥\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥\"></a>ç¬¬ä¸€æ­¥</h3><p>å®‰è£… Git:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ apt-get install git<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"ç¬¬äºŒæ­¥\"><a href=\"#ç¬¬äºŒæ­¥\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥\"></a>ç¬¬äºŒæ­¥</h3><p>è®¾ç½® SSH é€šè¿‡å¯†é’¥ç™»å½•ï¼Œå…·ä½“æ­¥éª¤å¯ä»¥å‚è€ƒ<a href=\"https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/\">è¿™é‡Œ</a></p>\n<h3 id=\"ç¬¬ä¸‰æ­¥\"><a href=\"#ç¬¬ä¸‰æ­¥\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥\"></a>ç¬¬ä¸‰æ­¥</h3><p>åˆå§‹åŒ– Git ä»“åº“ï¼Œæˆ‘å°†å…¶æ”¾åœ¨ <code>/root/hexobot/blog.git</code> ç›®å½•ä¸‹ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ <span class=\"hljs-built_in\">mkdir</span> /root/hexobot &amp;&amp; <span class=\"hljs-built_in\">cd</span> /root/hexobot<br>$ git init --bare blog.git<br></code></pre></td></tr></table></figure>\n\n<p>ä½¿ç”¨ â€“bare å‚æ•°ï¼ŒGit å°±ä¼šåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“æ²¡æœ‰å·¥ä½œåŒºã€‚</p>\n<h3 id=\"ç¬¬å››æ­¥\"><a href=\"#ç¬¬å››æ­¥\" class=\"headerlink\" title=\"ç¬¬å››æ­¥\"></a>ç¬¬å››æ­¥</h3><p>é…ç½® <code>Git Hooks</code>ï¼Œè¯¦æƒ…å¯å‚è€ƒ<a href=\"https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90\">è¿™é‡Œ</a>ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯ <code>post-receive</code>ï¼Œè¿™ä¸ª Hook ä¼šåœ¨ git æ“ä½œå®Œåè¢«è¿è¡Œã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ <span class=\"hljs-built_in\">cd</span> /root/hexobot/blog.git/hooks<br>$ vim post-receive<br></code></pre></td></tr></table></figure>\n\n<p>åœ¨ <code>post-receive</code> ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-meta\">#!/bin/sh</span><br>git --work-tree=/home/wwwroot/blog --git-dir=/root/hexobot/blog.git checkout -f<br></code></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼Œ<code>/home/wwwroot/blog</code> è¦æ¢æˆä½ è‡ªå·±çš„éƒ¨ç½²ç›®å½•ï¼Œä¸Šé¢çš„å‘½ä»¤ä¼šåœ¨æ¯æ¬¡ push ä»¥åæŠŠéƒ¨ç½²ç›®å½•æ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå½“ç„¶ï¼Œä¸è¦å¿˜è®°ç»™è¿™ä¸ªè„šæœ¬æå‡æƒé™ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ <span class=\"hljs-built_in\">chmod</span> +x post-receive<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"æœ¬åœ°é…ç½®\"><a href=\"#æœ¬åœ°é…ç½®\" class=\"headerlink\" title=\"æœ¬åœ°é…ç½®\"></a>æœ¬åœ°é…ç½®</h3><p>ä¿®æ”¹ hexo ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ï¼Œæ‰¾åˆ° deploy æ¡ç›®ï¼Œå¹¶ä¿®æ”¹ä¸ºï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  <span class=\"hljs-built_in\">type</span>: git<br>  repo: git@xxx.xxx.xxx.xxx:/root/hexobot/blog.git<br>  branch: master<br></code></pre></td></tr></table></figure>\n\n<p>è¦æ³¨æ„æ¢æˆä½ è‡ªå·±çš„æœåŠ¡å™¨åœ°å€ï¼Œä»¥åŠæœåŠ¡å™¨ç«¯ git ä»“åº“çš„ç›®å½•ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ hexo è‡ªåŠ¨éƒ¨ç½²å·²ç»å…¨éƒ¨é…ç½®å¥½äº†ã€‚</p>\n<blockquote>\n<p>æœ‰äº›æƒ…å†µä¸‹ï¼Œhexo-deployer-git æ²¡æœ‰è¢«å®‰è£…ï¼Œè¯·è‡ªè¡Œå®‰è£…ã€‚</p>\n</blockquote>\n<h3 id=\"ä½¿ç”¨\"><a href=\"#ä½¿ç”¨\" class=\"headerlink\" title=\"ä½¿ç”¨\"></a>ä½¿ç”¨</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo new <span class=\"hljs-string\">&quot;post&quot;</span><br><br><span class=\"hljs-comment\"># write something ....</span><br><br>$ hexo clean &amp;&amp; hexo g -d<br></code></pre></td></tr></table></figure>\n\n<p>å½“ç„¶äº†ï¼Œå¦‚æœä½ æ˜¯ zsh ç”¨æˆ·ï¼Œä½ è¿˜å¯ä»¥å°†è¿™ä¸ª alias åŠ å…¥ <code>~/.zshrc</code> ä¸­ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">alias</span> Post=<span class=\"hljs-string\">&#x27;hexo clean &amp;&amp; hexo g -d&#x27;</span><br></code></pre></td></tr></table></figure>\n\n<p>Finallyï¼Œjust enjoy~</p>\n","site":{"data":{}},"excerpt":"<p>è£…å¥½ Hexo ä»¥åï¼Œæ€»æ˜¯å¿ä¸ä½å†™ç‚¹ä»€ä¹ˆï¼Œåˆšå¥½æƒ³åˆ°å¯ä»¥æŠŠè‡ªåŠ¨éƒ¨ç½²çš„è¿‡ç¨‹æ‹¿å‡ºæ¥è¯´ä¸€ä¸‹ã€‚ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹éƒ½æ˜¯æ•™ä½ å¦‚ä½•å°† Hexo éƒ¨ç½²åˆ° <code>Github Pages</code> ä¸Šï¼Œä½†æ˜¯ä»Šå¤©è¦è¯´çš„æ˜¯æŠŠ Hexo éƒ¨ç½²åˆ°è‡ªå·±çš„ VPS ä¸Šï¼Œå‚è€ƒäº†ä¸€äº›æ•™ç¨‹ï¼Œå†™ä¸€ä¸ªæˆ‘è§‰å¾—ä¸é”™çš„åŠæ³•ã€‚</p>","more":"<h3 id=\"é…ç½®-VPS-çš„-Git-ç¯å¢ƒ\"><a href=\"#é…ç½®-VPS-çš„-Git-ç¯å¢ƒ\" class=\"headerlink\" title=\"é…ç½® VPS çš„ Git ç¯å¢ƒ\"></a>é…ç½® VPS çš„ Git ç¯å¢ƒ</h3><p>ç”±äºæˆ‘çš„ VPS ä¸Šæ˜¯ <code>Ubuntu 18.04</code>ï¼Œæ‰€ä»¥è¯´ä¸‹æˆ‘çš„æ­¥éª¤ï¼Œå…¶ä»–ç³»ç»Ÿç±»ä¼¼ã€‚</p>\n<h3 id=\"ç¬¬ä¸€æ­¥\"><a href=\"#ç¬¬ä¸€æ­¥\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥\"></a>ç¬¬ä¸€æ­¥</h3><p>å®‰è£… Git:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ apt-get install git<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"ç¬¬äºŒæ­¥\"><a href=\"#ç¬¬äºŒæ­¥\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥\"></a>ç¬¬äºŒæ­¥</h3><p>è®¾ç½® SSH é€šè¿‡å¯†é’¥ç™»å½•ï¼Œå…·ä½“æ­¥éª¤å¯ä»¥å‚è€ƒ<a href=\"https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/\">è¿™é‡Œ</a></p>\n<h3 id=\"ç¬¬ä¸‰æ­¥\"><a href=\"#ç¬¬ä¸‰æ­¥\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥\"></a>ç¬¬ä¸‰æ­¥</h3><p>åˆå§‹åŒ– Git ä»“åº“ï¼Œæˆ‘å°†å…¶æ”¾åœ¨ <code>/root/hexobot/blog.git</code> ç›®å½•ä¸‹ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ <span class=\"hljs-built_in\">mkdir</span> /root/hexobot &amp;&amp; <span class=\"hljs-built_in\">cd</span> /root/hexobot<br>$ git init --bare blog.git<br></code></pre></td></tr></table></figure>\n\n<p>ä½¿ç”¨ â€“bare å‚æ•°ï¼ŒGit å°±ä¼šåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“æ²¡æœ‰å·¥ä½œåŒºã€‚</p>\n<h3 id=\"ç¬¬å››æ­¥\"><a href=\"#ç¬¬å››æ­¥\" class=\"headerlink\" title=\"ç¬¬å››æ­¥\"></a>ç¬¬å››æ­¥</h3><p>é…ç½® <code>Git Hooks</code>ï¼Œè¯¦æƒ…å¯å‚è€ƒ<a href=\"https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90\">è¿™é‡Œ</a>ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯ <code>post-receive</code>ï¼Œè¿™ä¸ª Hook ä¼šåœ¨ git æ“ä½œå®Œåè¢«è¿è¡Œã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ <span class=\"hljs-built_in\">cd</span> /root/hexobot/blog.git/hooks<br>$ vim post-receive<br></code></pre></td></tr></table></figure>\n\n<p>åœ¨ <code>post-receive</code> ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-meta\">#!/bin/sh</span><br>git --work-tree=/home/wwwroot/blog --git-dir=/root/hexobot/blog.git checkout -f<br></code></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼Œ<code>/home/wwwroot/blog</code> è¦æ¢æˆä½ è‡ªå·±çš„éƒ¨ç½²ç›®å½•ï¼Œä¸Šé¢çš„å‘½ä»¤ä¼šåœ¨æ¯æ¬¡ push ä»¥åæŠŠéƒ¨ç½²ç›®å½•æ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå½“ç„¶ï¼Œä¸è¦å¿˜è®°ç»™è¿™ä¸ªè„šæœ¬æå‡æƒé™ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ <span class=\"hljs-built_in\">chmod</span> +x post-receive<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"æœ¬åœ°é…ç½®\"><a href=\"#æœ¬åœ°é…ç½®\" class=\"headerlink\" title=\"æœ¬åœ°é…ç½®\"></a>æœ¬åœ°é…ç½®</h3><p>ä¿®æ”¹ hexo ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ï¼Œæ‰¾åˆ° deploy æ¡ç›®ï¼Œå¹¶ä¿®æ”¹ä¸ºï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  <span class=\"hljs-built_in\">type</span>: git<br>  repo: git@xxx.xxx.xxx.xxx:/root/hexobot/blog.git<br>  branch: master<br></code></pre></td></tr></table></figure>\n\n<p>è¦æ³¨æ„æ¢æˆä½ è‡ªå·±çš„æœåŠ¡å™¨åœ°å€ï¼Œä»¥åŠæœåŠ¡å™¨ç«¯ git ä»“åº“çš„ç›®å½•ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ hexo è‡ªåŠ¨éƒ¨ç½²å·²ç»å…¨éƒ¨é…ç½®å¥½äº†ã€‚</p>\n<blockquote>\n<p>æœ‰äº›æƒ…å†µä¸‹ï¼Œhexo-deployer-git æ²¡æœ‰è¢«å®‰è£…ï¼Œè¯·è‡ªè¡Œå®‰è£…ã€‚</p>\n</blockquote>\n<h3 id=\"ä½¿ç”¨\"><a href=\"#ä½¿ç”¨\" class=\"headerlink\" title=\"ä½¿ç”¨\"></a>ä½¿ç”¨</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo new <span class=\"hljs-string\">&quot;post&quot;</span><br><br><span class=\"hljs-comment\"># write something ....</span><br><br>$ hexo clean &amp;&amp; hexo g -d<br></code></pre></td></tr></table></figure>\n\n<p>å½“ç„¶äº†ï¼Œå¦‚æœä½ æ˜¯ zsh ç”¨æˆ·ï¼Œä½ è¿˜å¯ä»¥å°†è¿™ä¸ª alias åŠ å…¥ <code>~/.zshrc</code> ä¸­ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">alias</span> Post=<span class=\"hljs-string\">&#x27;hexo clean &amp;&amp; hexo g -d&#x27;</span><br></code></pre></td></tr></table></figure>\n\n<p>Finallyï¼Œjust enjoy~</p>"},{"title":"PSN æ¸¸æˆä¸‹è½½æ›´æ–°åŠ é€Ÿæ–¹æ¡ˆ","date":"2019-01-27T11:25:40.000Z","index_img":"/img/psn-game-boost-plan/banner.png","_content":"\nä½œä¸ºä¸€ä¸ªä¸»æœºç©å®¶ï¼Œæœ€å¤´ç–¼çš„åœ°æ–¹è¿˜æ˜¯ PS4 ç³»ç»Ÿæ›´æ–°å’Œæ¸¸æˆä¸‹è½½çš„é€Ÿåº¦ã€‚æ—©å‰ç”±äºç´¢å°¼å¹¶æ²¡æœ‰åœ¨å›½å†…éƒ¨ç½² PSN ä¸‹è½½æœåŠ¡çš„ CDNï¼Œæ‰€ä»¥ä¸‹è½½é€Ÿåº¦æ‰æ€¥ã€‚ä½†æ˜¯ç°åœ¨å›½å†…çš„å¤§éƒ¨åˆ† DNS æœåŠ¡å•†éƒ½èƒ½æ­£ç¡®çš„å°† PSN çš„ç›¸å…³åŸŸåè§£æåˆ°å›½å†…çš„æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯å¶å°”è¿˜æ˜¯ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œä»Šå¤©å°±æ¥èŠä¸‹ç›¸å…³çš„è§£å†³åŠæ³•ã€‚\n\n<!-- more -->\n\n### é¡»çŸ¥\n\nPSN çš„æ¸¸æˆå’Œæ›´æ–°éƒ½æ˜¯é€šè¿‡ `gs2.ww.prod.dl.playstation.net` è¿™ä¸ªåŸŸåï¼ŒåŒæ—¶ç´¢å°¼ä¹Ÿåœ¨ä»–çš„å„ä¸ªä¸»è¦å¸‚åœºåœ°åŒºéƒ¨ç½²äº†åŒæ ·çš„é•œåƒæœåŠ¡å™¨ã€‚\n\næ—©å‰å›½å†…ç”±äºæ²¡æœ‰éƒ¨ç½² CDNï¼Œæ‰€ä»¥å¾ˆå¤šç©å®¶éƒ½æ˜¯é€šè¿‡ `PSX Download Helper` è¿™ä¸ªè½¯ä»¶å°†æ¸¸æˆä¸‹è½½åˆ°ç”µè„‘ä¸Šç„¶ååœ¨è½¬ç§»åˆ° PS ä¸­ï¼Œç›¸å…³æ•™ç¨‹å¯ä»¥çœ‹è¿™é‡Œ\n\nåˆ°åæ¥å›½è¡Œçš„ PS å‘å¸ƒä¹‹åï¼Œå›½å†…çš„ DNS æœåŠ¡å•†åŸºæœ¬éƒ½èƒ½æ­£ç¡®è§£æ `gs2.ww.prod.dl.playstation.net` äº†ï¼Œè¿™æ ·æ™®é€šç©å®¶ä¸éœ€è¦ä»»ä½•æ“ä½œéƒ½èƒ½å®ç°é«˜é€Ÿä¸‹è½½äº†ã€‚\n\n### é—®é¢˜\n\n- å›½å†… DNS æœåŠ¡å™¨ä»ç„¶ä¼šæŠŠ `gs2.ww.prod.dl.playstation.net` è§£æåˆ°å›½å¤–å¯¼è‡´ä¸‹è½½å˜æ…¢ï¼Œä¸ä»…ä»…æ˜¯è¿è¥å•†çš„ DNS è§£æï¼ŒåŒ…æ‹¬ä¸€äº›å…¬å…±çš„ DNS è§£æå¦‚ 114 å’Œè…¾è®¯ DNS éƒ½å¶å°”ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚\n\n- æŸäº› PSN æ¸¸æˆï¼Œå°±ç®— DNS æœåŠ¡å™¨ç»™å‡ºäº†å›½å†… IP ä»ç„¶ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ã€‚\n\n- éƒ¨åˆ†æ¸¸æˆé‡‡ç”¨çš„æ˜¯çƒ­æ›´æ–°å³æ¸¸æˆå†…æ›´æ–°ï¼Œè¿™ç§æƒ…å†µç”±äºæ›´æ–°æ˜¯ä»æ¸¸æˆå‚å®¶è‡ªå·±çš„æœåŠ¡å™¨æ¥çš„ï¼Œå¹¶ä¸åœ¨ PSN æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥é€Ÿåº¦ä»ä¼šä¸ç†æƒ³ã€‚\n\n### è§£å†³åŠæ³•\n\nä¸€èˆ¬æ¥è¯´ä»¥ä¸Šæƒ…å†µæœ‰å‡ ç§è§£å†³åŠæ³•ï¼Œå¦‚ä¸‹ï¼š\n\n- ä½¿ç”¨è¿è¥å•†æä¾›çš„ç²¾å“çº¿è·¯å¦‚ç²¾å“ç½‘ã€‚\n\n- ä½¿ç”¨æŸäº›æ¸¸æˆåŠ é€Ÿå™¨æœåŠ¡å•†æä¾›çš„åŠ é€Ÿå®ï¼Œä¾‹å¦‚å¥‡æ¸¸æä¾›çš„è”æœºå®ã€‚\n\n- è´­ä¹°èƒ½å¤Ÿåˆ·å›ºä»¶çš„è·¯ç”±å™¨ï¼Œå¹¶åœ¨è·¯ç”±å™¨ä¸Šå®‰è£… SSã€SSR è¿™ç§ä»£ç†æœåŠ¡ã€‚\n\nä¸€èˆ¬æ¥è¯´ï¼Œ2 å’Œ 3 éƒ½æ˜¯æ¯”è¾ƒå¥½çš„è§£å†³åŠæ³•ï¼Œä»Šå¤©æˆ‘ä»¬èŠä¸‹ç¬¬ä¸‰ç§è§£å†³åŠæ³•ã€‚\n\næˆ‘ä¸ªäººæ˜¯è´­ä¹°äº†ç½‘ä»¶çš„ R7000 ç„¶ååˆ·äº†æ¢…æ—å›ºä»¶ï¼Œå¸‚é¢ä¸Šä¹Ÿæœ‰å¾ˆå¤šè·¯ç”±å™¨èƒ½åˆ·ç±»ä¼¼ OpenWrt æˆ–è€… Padavan è¿™äº›å›ºä»¶çš„ï¼Œæ¨èå»æœç´¢ä¸€ä¸‹ç›¸å…³å†…å®¹ã€‚\n\n### åŸç†\n\nä¸€èˆ¬æ¥è¯´ï¼Œè·¯ç”±å™¨ä¸Šè£…å¥½äº† SS ä¹‹ç±»çš„ä»£ç†æœåŠ¡ä¹‹åï¼Œéƒ½ä¼šæä¾› Dnsmasq çš„åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒèƒ½å¤Ÿæä¾› DNS æœåŠ¡ï¼Œè®©è·¯ç”±å™¨ä¼˜å…ˆä½¿ç”¨æœ¬åœ°è‡ªå®šä¹‰çš„ DNSã€‚\n\nä¾‹å¦‚ä¸‹å›¾çš„ DNS è½¬å‘ ä¸­è®¾ç½®ä¸º `/gs2.ww.prod.dl.playstation.net/119.29.29.29` çš„æ„æ€å°±æ˜¯å°† PSN çš„ä¸‹è½½æœåŠ¡å™¨åœ°å€äº¤ç»™ `119.29.29.29` æ¥è§£æï¼Œè€Œè¿™ä¸ª DNS æœåŠ¡å™¨æ˜¯è…¾è®¯æä¾›çš„å·©å›º DNS æœåŠ¡å™¨ã€‚è¿™æ ·çš„è¯åŸºæœ¬èƒ½ä¿è¯æ¯æ¬¡éƒ½èƒ½è·å¾—æ­£ç¡®çš„å›½å†…çš„ä¸‹è½½åœ°å€ã€‚\n\n![](https://s1.ax1x.com/2018/05/01/CJwt3t.png)\n\nå…·ä½“çš„è®¾å®šå¯ä»¥å‚è€ƒè¿™é‡Œï¼Œå¦‚æœä½ åœ¨å›½å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥æŒ‡å®š DNS æœåŠ¡å™¨ã€‚\n\nå½“ç„¶ï¼Œå¦‚æœä½ æƒ³æˆ–è€…æœ€ä½³çš„ä¸‹è½½èŠ‚ç‚¹ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ nslookup å‘½ä»¤æ¥æŸ¥æ‰¾æœ€ä½³çš„ä¸‹è½½èŠ‚ç‚¹ï¼Œæ¯”å¦‚åœ¨ PowerShell æˆ–è€… Terminal ä¸­è¾“å…¥ `nslookup gs2.ww.prod.dl.playstation.net 119.29.29.29` å°±èƒ½è·å¾—å¦‚ä¸‹ç»“æœï¼ˆæœ‰ç®€åŒ–ï¼‰ï¼š\n\n```Bash\nServer:\t\t114.114.114.114\nAddress:\t114.114.114.114#53\n\nName:\ta1796.cn.w.tl88.net\nAddress: 118.123.105.16\nName:\ta1796.cn.w.tl88.net\nAddress: 118.123.105.17\n```\n\nå›¾ä¸­çš„ `118.123.105.16` å’Œ `118.123.105.17` å°±æ˜¯è…¾è®¯å…¬å…± DNS æœåŠ¡å™¨ç»™å‡ºçš„å®ƒè®¤ä¸ºæœ€å¥½çš„ PSN ä¸‹è½½æœåŠ¡å™¨çš„åœ°å€ï¼Œç„¶åä½ å¯ä»¥é€šè¿‡ Ping æ¥æµ‹è¯•è¿™ä¸¤ä¸ªåœ°å€çš„å»¶è¿Ÿã€‚å¦‚æœä½ æƒ³æµ‹è¯•å…¶ä»–çš„ DNS æœåŠ¡å™¨ï¼Œåªè¦æŒ‰ä»¥ä¸Šæ­¥éª¤å»åšå°±å¥½ï¼Œç„¶åå°†ä½ è§‰å¾—æœ€å¥½çš„è®¾ç½®åˆ° DNS è½¬å‘ä¸­å³å¯ã€‚\n","source":"_posts/psn-game-boost-plan.md","raw":"---\ntitle: PSN æ¸¸æˆä¸‹è½½æ›´æ–°åŠ é€Ÿæ–¹æ¡ˆ\ndate: 2019-01-27 19:25:40\ncategories:\n  - Life\ntags:\n  - Network\nindex_img: /img/psn-game-boost-plan/banner.png\n---\n\nä½œä¸ºä¸€ä¸ªä¸»æœºç©å®¶ï¼Œæœ€å¤´ç–¼çš„åœ°æ–¹è¿˜æ˜¯ PS4 ç³»ç»Ÿæ›´æ–°å’Œæ¸¸æˆä¸‹è½½çš„é€Ÿåº¦ã€‚æ—©å‰ç”±äºç´¢å°¼å¹¶æ²¡æœ‰åœ¨å›½å†…éƒ¨ç½² PSN ä¸‹è½½æœåŠ¡çš„ CDNï¼Œæ‰€ä»¥ä¸‹è½½é€Ÿåº¦æ‰æ€¥ã€‚ä½†æ˜¯ç°åœ¨å›½å†…çš„å¤§éƒ¨åˆ† DNS æœåŠ¡å•†éƒ½èƒ½æ­£ç¡®çš„å°† PSN çš„ç›¸å…³åŸŸåè§£æåˆ°å›½å†…çš„æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯å¶å°”è¿˜æ˜¯ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œä»Šå¤©å°±æ¥èŠä¸‹ç›¸å…³çš„è§£å†³åŠæ³•ã€‚\n\n<!-- more -->\n\n### é¡»çŸ¥\n\nPSN çš„æ¸¸æˆå’Œæ›´æ–°éƒ½æ˜¯é€šè¿‡ `gs2.ww.prod.dl.playstation.net` è¿™ä¸ªåŸŸåï¼ŒåŒæ—¶ç´¢å°¼ä¹Ÿåœ¨ä»–çš„å„ä¸ªä¸»è¦å¸‚åœºåœ°åŒºéƒ¨ç½²äº†åŒæ ·çš„é•œåƒæœåŠ¡å™¨ã€‚\n\næ—©å‰å›½å†…ç”±äºæ²¡æœ‰éƒ¨ç½² CDNï¼Œæ‰€ä»¥å¾ˆå¤šç©å®¶éƒ½æ˜¯é€šè¿‡ `PSX Download Helper` è¿™ä¸ªè½¯ä»¶å°†æ¸¸æˆä¸‹è½½åˆ°ç”µè„‘ä¸Šç„¶ååœ¨è½¬ç§»åˆ° PS ä¸­ï¼Œç›¸å…³æ•™ç¨‹å¯ä»¥çœ‹è¿™é‡Œ\n\nåˆ°åæ¥å›½è¡Œçš„ PS å‘å¸ƒä¹‹åï¼Œå›½å†…çš„ DNS æœåŠ¡å•†åŸºæœ¬éƒ½èƒ½æ­£ç¡®è§£æ `gs2.ww.prod.dl.playstation.net` äº†ï¼Œè¿™æ ·æ™®é€šç©å®¶ä¸éœ€è¦ä»»ä½•æ“ä½œéƒ½èƒ½å®ç°é«˜é€Ÿä¸‹è½½äº†ã€‚\n\n### é—®é¢˜\n\n- å›½å†… DNS æœåŠ¡å™¨ä»ç„¶ä¼šæŠŠ `gs2.ww.prod.dl.playstation.net` è§£æåˆ°å›½å¤–å¯¼è‡´ä¸‹è½½å˜æ…¢ï¼Œä¸ä»…ä»…æ˜¯è¿è¥å•†çš„ DNS è§£æï¼ŒåŒ…æ‹¬ä¸€äº›å…¬å…±çš„ DNS è§£æå¦‚ 114 å’Œè…¾è®¯ DNS éƒ½å¶å°”ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚\n\n- æŸäº› PSN æ¸¸æˆï¼Œå°±ç®— DNS æœåŠ¡å™¨ç»™å‡ºäº†å›½å†… IP ä»ç„¶ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ã€‚\n\n- éƒ¨åˆ†æ¸¸æˆé‡‡ç”¨çš„æ˜¯çƒ­æ›´æ–°å³æ¸¸æˆå†…æ›´æ–°ï¼Œè¿™ç§æƒ…å†µç”±äºæ›´æ–°æ˜¯ä»æ¸¸æˆå‚å®¶è‡ªå·±çš„æœåŠ¡å™¨æ¥çš„ï¼Œå¹¶ä¸åœ¨ PSN æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥é€Ÿåº¦ä»ä¼šä¸ç†æƒ³ã€‚\n\n### è§£å†³åŠæ³•\n\nä¸€èˆ¬æ¥è¯´ä»¥ä¸Šæƒ…å†µæœ‰å‡ ç§è§£å†³åŠæ³•ï¼Œå¦‚ä¸‹ï¼š\n\n- ä½¿ç”¨è¿è¥å•†æä¾›çš„ç²¾å“çº¿è·¯å¦‚ç²¾å“ç½‘ã€‚\n\n- ä½¿ç”¨æŸäº›æ¸¸æˆåŠ é€Ÿå™¨æœåŠ¡å•†æä¾›çš„åŠ é€Ÿå®ï¼Œä¾‹å¦‚å¥‡æ¸¸æä¾›çš„è”æœºå®ã€‚\n\n- è´­ä¹°èƒ½å¤Ÿåˆ·å›ºä»¶çš„è·¯ç”±å™¨ï¼Œå¹¶åœ¨è·¯ç”±å™¨ä¸Šå®‰è£… SSã€SSR è¿™ç§ä»£ç†æœåŠ¡ã€‚\n\nä¸€èˆ¬æ¥è¯´ï¼Œ2 å’Œ 3 éƒ½æ˜¯æ¯”è¾ƒå¥½çš„è§£å†³åŠæ³•ï¼Œä»Šå¤©æˆ‘ä»¬èŠä¸‹ç¬¬ä¸‰ç§è§£å†³åŠæ³•ã€‚\n\næˆ‘ä¸ªäººæ˜¯è´­ä¹°äº†ç½‘ä»¶çš„ R7000 ç„¶ååˆ·äº†æ¢…æ—å›ºä»¶ï¼Œå¸‚é¢ä¸Šä¹Ÿæœ‰å¾ˆå¤šè·¯ç”±å™¨èƒ½åˆ·ç±»ä¼¼ OpenWrt æˆ–è€… Padavan è¿™äº›å›ºä»¶çš„ï¼Œæ¨èå»æœç´¢ä¸€ä¸‹ç›¸å…³å†…å®¹ã€‚\n\n### åŸç†\n\nä¸€èˆ¬æ¥è¯´ï¼Œè·¯ç”±å™¨ä¸Šè£…å¥½äº† SS ä¹‹ç±»çš„ä»£ç†æœåŠ¡ä¹‹åï¼Œéƒ½ä¼šæä¾› Dnsmasq çš„åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒèƒ½å¤Ÿæä¾› DNS æœåŠ¡ï¼Œè®©è·¯ç”±å™¨ä¼˜å…ˆä½¿ç”¨æœ¬åœ°è‡ªå®šä¹‰çš„ DNSã€‚\n\nä¾‹å¦‚ä¸‹å›¾çš„ DNS è½¬å‘ ä¸­è®¾ç½®ä¸º `/gs2.ww.prod.dl.playstation.net/119.29.29.29` çš„æ„æ€å°±æ˜¯å°† PSN çš„ä¸‹è½½æœåŠ¡å™¨åœ°å€äº¤ç»™ `119.29.29.29` æ¥è§£æï¼Œè€Œè¿™ä¸ª DNS æœåŠ¡å™¨æ˜¯è…¾è®¯æä¾›çš„å·©å›º DNS æœåŠ¡å™¨ã€‚è¿™æ ·çš„è¯åŸºæœ¬èƒ½ä¿è¯æ¯æ¬¡éƒ½èƒ½è·å¾—æ­£ç¡®çš„å›½å†…çš„ä¸‹è½½åœ°å€ã€‚\n\n![](https://s1.ax1x.com/2018/05/01/CJwt3t.png)\n\nå…·ä½“çš„è®¾å®šå¯ä»¥å‚è€ƒè¿™é‡Œï¼Œå¦‚æœä½ åœ¨å›½å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥æŒ‡å®š DNS æœåŠ¡å™¨ã€‚\n\nå½“ç„¶ï¼Œå¦‚æœä½ æƒ³æˆ–è€…æœ€ä½³çš„ä¸‹è½½èŠ‚ç‚¹ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ nslookup å‘½ä»¤æ¥æŸ¥æ‰¾æœ€ä½³çš„ä¸‹è½½èŠ‚ç‚¹ï¼Œæ¯”å¦‚åœ¨ PowerShell æˆ–è€… Terminal ä¸­è¾“å…¥ `nslookup gs2.ww.prod.dl.playstation.net 119.29.29.29` å°±èƒ½è·å¾—å¦‚ä¸‹ç»“æœï¼ˆæœ‰ç®€åŒ–ï¼‰ï¼š\n\n```Bash\nServer:\t\t114.114.114.114\nAddress:\t114.114.114.114#53\n\nName:\ta1796.cn.w.tl88.net\nAddress: 118.123.105.16\nName:\ta1796.cn.w.tl88.net\nAddress: 118.123.105.17\n```\n\nå›¾ä¸­çš„ `118.123.105.16` å’Œ `118.123.105.17` å°±æ˜¯è…¾è®¯å…¬å…± DNS æœåŠ¡å™¨ç»™å‡ºçš„å®ƒè®¤ä¸ºæœ€å¥½çš„ PSN ä¸‹è½½æœåŠ¡å™¨çš„åœ°å€ï¼Œç„¶åä½ å¯ä»¥é€šè¿‡ Ping æ¥æµ‹è¯•è¿™ä¸¤ä¸ªåœ°å€çš„å»¶è¿Ÿã€‚å¦‚æœä½ æƒ³æµ‹è¯•å…¶ä»–çš„ DNS æœåŠ¡å™¨ï¼Œåªè¦æŒ‰ä»¥ä¸Šæ­¥éª¤å»åšå°±å¥½ï¼Œç„¶åå°†ä½ è§‰å¾—æœ€å¥½çš„è®¾ç½®åˆ° DNS è½¬å‘ä¸­å³å¯ã€‚\n","slug":"psn-game-boost-plan","published":1,"updated":"2022-08-27T10:26:48.412Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clejnkd4w0008uoqr3lrzgc97","content":"<p>ä½œä¸ºä¸€ä¸ªä¸»æœºç©å®¶ï¼Œæœ€å¤´ç–¼çš„åœ°æ–¹è¿˜æ˜¯ PS4 ç³»ç»Ÿæ›´æ–°å’Œæ¸¸æˆä¸‹è½½çš„é€Ÿåº¦ã€‚æ—©å‰ç”±äºç´¢å°¼å¹¶æ²¡æœ‰åœ¨å›½å†…éƒ¨ç½² PSN ä¸‹è½½æœåŠ¡çš„ CDNï¼Œæ‰€ä»¥ä¸‹è½½é€Ÿåº¦æ‰æ€¥ã€‚ä½†æ˜¯ç°åœ¨å›½å†…çš„å¤§éƒ¨åˆ† DNS æœåŠ¡å•†éƒ½èƒ½æ­£ç¡®çš„å°† PSN çš„ç›¸å…³åŸŸåè§£æåˆ°å›½å†…çš„æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯å¶å°”è¿˜æ˜¯ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œä»Šå¤©å°±æ¥èŠä¸‹ç›¸å…³çš„è§£å†³åŠæ³•ã€‚</p>\n<span id=\"more\"></span>\n\n<h3 id=\"é¡»çŸ¥\"><a href=\"#é¡»çŸ¥\" class=\"headerlink\" title=\"é¡»çŸ¥\"></a>é¡»çŸ¥</h3><p>PSN çš„æ¸¸æˆå’Œæ›´æ–°éƒ½æ˜¯é€šè¿‡ <code>gs2.ww.prod.dl.playstation.net</code> è¿™ä¸ªåŸŸåï¼ŒåŒæ—¶ç´¢å°¼ä¹Ÿåœ¨ä»–çš„å„ä¸ªä¸»è¦å¸‚åœºåœ°åŒºéƒ¨ç½²äº†åŒæ ·çš„é•œåƒæœåŠ¡å™¨ã€‚</p>\n<p>æ—©å‰å›½å†…ç”±äºæ²¡æœ‰éƒ¨ç½² CDNï¼Œæ‰€ä»¥å¾ˆå¤šç©å®¶éƒ½æ˜¯é€šè¿‡ <code>PSX Download Helper</code> è¿™ä¸ªè½¯ä»¶å°†æ¸¸æˆä¸‹è½½åˆ°ç”µè„‘ä¸Šç„¶ååœ¨è½¬ç§»åˆ° PS ä¸­ï¼Œç›¸å…³æ•™ç¨‹å¯ä»¥çœ‹è¿™é‡Œ</p>\n<p>åˆ°åæ¥å›½è¡Œçš„ PS å‘å¸ƒä¹‹åï¼Œå›½å†…çš„ DNS æœåŠ¡å•†åŸºæœ¬éƒ½èƒ½æ­£ç¡®è§£æ <code>gs2.ww.prod.dl.playstation.net</code> äº†ï¼Œè¿™æ ·æ™®é€šç©å®¶ä¸éœ€è¦ä»»ä½•æ“ä½œéƒ½èƒ½å®ç°é«˜é€Ÿä¸‹è½½äº†ã€‚</p>\n<h3 id=\"é—®é¢˜\"><a href=\"#é—®é¢˜\" class=\"headerlink\" title=\"é—®é¢˜\"></a>é—®é¢˜</h3><ul>\n<li><p>å›½å†… DNS æœåŠ¡å™¨ä»ç„¶ä¼šæŠŠ <code>gs2.ww.prod.dl.playstation.net</code> è§£æåˆ°å›½å¤–å¯¼è‡´ä¸‹è½½å˜æ…¢ï¼Œä¸ä»…ä»…æ˜¯è¿è¥å•†çš„ DNS è§£æï¼ŒåŒ…æ‹¬ä¸€äº›å…¬å…±çš„ DNS è§£æå¦‚ 114 å’Œè…¾è®¯ DNS éƒ½å¶å°”ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚</p>\n</li>\n<li><p>æŸäº› PSN æ¸¸æˆï¼Œå°±ç®— DNS æœåŠ¡å™¨ç»™å‡ºäº†å›½å†… IP ä»ç„¶ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ã€‚</p>\n</li>\n<li><p>éƒ¨åˆ†æ¸¸æˆé‡‡ç”¨çš„æ˜¯çƒ­æ›´æ–°å³æ¸¸æˆå†…æ›´æ–°ï¼Œè¿™ç§æƒ…å†µç”±äºæ›´æ–°æ˜¯ä»æ¸¸æˆå‚å®¶è‡ªå·±çš„æœåŠ¡å™¨æ¥çš„ï¼Œå¹¶ä¸åœ¨ PSN æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥é€Ÿåº¦ä»ä¼šä¸ç†æƒ³ã€‚</p>\n</li>\n</ul>\n<h3 id=\"è§£å†³åŠæ³•\"><a href=\"#è§£å†³åŠæ³•\" class=\"headerlink\" title=\"è§£å†³åŠæ³•\"></a>è§£å†³åŠæ³•</h3><p>ä¸€èˆ¬æ¥è¯´ä»¥ä¸Šæƒ…å†µæœ‰å‡ ç§è§£å†³åŠæ³•ï¼Œå¦‚ä¸‹ï¼š</p>\n<ul>\n<li><p>ä½¿ç”¨è¿è¥å•†æä¾›çš„ç²¾å“çº¿è·¯å¦‚ç²¾å“ç½‘ã€‚</p>\n</li>\n<li><p>ä½¿ç”¨æŸäº›æ¸¸æˆåŠ é€Ÿå™¨æœåŠ¡å•†æä¾›çš„åŠ é€Ÿå®ï¼Œä¾‹å¦‚å¥‡æ¸¸æä¾›çš„è”æœºå®ã€‚</p>\n</li>\n<li><p>è´­ä¹°èƒ½å¤Ÿåˆ·å›ºä»¶çš„è·¯ç”±å™¨ï¼Œå¹¶åœ¨è·¯ç”±å™¨ä¸Šå®‰è£… SSã€SSR è¿™ç§ä»£ç†æœåŠ¡ã€‚</p>\n</li>\n</ul>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œ2 å’Œ 3 éƒ½æ˜¯æ¯”è¾ƒå¥½çš„è§£å†³åŠæ³•ï¼Œä»Šå¤©æˆ‘ä»¬èŠä¸‹ç¬¬ä¸‰ç§è§£å†³åŠæ³•ã€‚</p>\n<p>æˆ‘ä¸ªäººæ˜¯è´­ä¹°äº†ç½‘ä»¶çš„ R7000 ç„¶ååˆ·äº†æ¢…æ—å›ºä»¶ï¼Œå¸‚é¢ä¸Šä¹Ÿæœ‰å¾ˆå¤šè·¯ç”±å™¨èƒ½åˆ·ç±»ä¼¼ OpenWrt æˆ–è€… Padavan è¿™äº›å›ºä»¶çš„ï¼Œæ¨èå»æœç´¢ä¸€ä¸‹ç›¸å…³å†…å®¹ã€‚</p>\n<h3 id=\"åŸç†\"><a href=\"#åŸç†\" class=\"headerlink\" title=\"åŸç†\"></a>åŸç†</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œè·¯ç”±å™¨ä¸Šè£…å¥½äº† SS ä¹‹ç±»çš„ä»£ç†æœåŠ¡ä¹‹åï¼Œéƒ½ä¼šæä¾› Dnsmasq çš„åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒèƒ½å¤Ÿæä¾› DNS æœåŠ¡ï¼Œè®©è·¯ç”±å™¨ä¼˜å…ˆä½¿ç”¨æœ¬åœ°è‡ªå®šä¹‰çš„ DNSã€‚</p>\n<p>ä¾‹å¦‚ä¸‹å›¾çš„ DNS è½¬å‘ ä¸­è®¾ç½®ä¸º <code>/gs2.ww.prod.dl.playstation.net/119.29.29.29</code> çš„æ„æ€å°±æ˜¯å°† PSN çš„ä¸‹è½½æœåŠ¡å™¨åœ°å€äº¤ç»™ <code>119.29.29.29</code> æ¥è§£æï¼Œè€Œè¿™ä¸ª DNS æœåŠ¡å™¨æ˜¯è…¾è®¯æä¾›çš„å·©å›º DNS æœåŠ¡å™¨ã€‚è¿™æ ·çš„è¯åŸºæœ¬èƒ½ä¿è¯æ¯æ¬¡éƒ½èƒ½è·å¾—æ­£ç¡®çš„å›½å†…çš„ä¸‹è½½åœ°å€ã€‚</p>\n<p><img src=\"https://s1.ax1x.com/2018/05/01/CJwt3t.png\"></p>\n<p>å…·ä½“çš„è®¾å®šå¯ä»¥å‚è€ƒè¿™é‡Œï¼Œå¦‚æœä½ åœ¨å›½å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥æŒ‡å®š DNS æœåŠ¡å™¨ã€‚</p>\n<p>å½“ç„¶ï¼Œå¦‚æœä½ æƒ³æˆ–è€…æœ€ä½³çš„ä¸‹è½½èŠ‚ç‚¹ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ nslookup å‘½ä»¤æ¥æŸ¥æ‰¾æœ€ä½³çš„ä¸‹è½½èŠ‚ç‚¹ï¼Œæ¯”å¦‚åœ¨ PowerShell æˆ–è€… Terminal ä¸­è¾“å…¥ <code>nslookup gs2.ww.prod.dl.playstation.net 119.29.29.29</code> å°±èƒ½è·å¾—å¦‚ä¸‹ç»“æœï¼ˆæœ‰ç®€åŒ–ï¼‰ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Bash\">Server:\t\t114.114.114.114<br>Address:\t114.114.114.114<span class=\"hljs-comment\">#53</span><br><br>Name:\ta1796.cn.w.tl88.net<br>Address: 118.123.105.16<br>Name:\ta1796.cn.w.tl88.net<br>Address: 118.123.105.17<br></code></pre></td></tr></table></figure>\n\n<p>å›¾ä¸­çš„ <code>118.123.105.16</code> å’Œ <code>118.123.105.17</code> å°±æ˜¯è…¾è®¯å…¬å…± DNS æœåŠ¡å™¨ç»™å‡ºçš„å®ƒè®¤ä¸ºæœ€å¥½çš„ PSN ä¸‹è½½æœåŠ¡å™¨çš„åœ°å€ï¼Œç„¶åä½ å¯ä»¥é€šè¿‡ Ping æ¥æµ‹è¯•è¿™ä¸¤ä¸ªåœ°å€çš„å»¶è¿Ÿã€‚å¦‚æœä½ æƒ³æµ‹è¯•å…¶ä»–çš„ DNS æœåŠ¡å™¨ï¼Œåªè¦æŒ‰ä»¥ä¸Šæ­¥éª¤å»åšå°±å¥½ï¼Œç„¶åå°†ä½ è§‰å¾—æœ€å¥½çš„è®¾ç½®åˆ° DNS è½¬å‘ä¸­å³å¯ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>ä½œä¸ºä¸€ä¸ªä¸»æœºç©å®¶ï¼Œæœ€å¤´ç–¼çš„åœ°æ–¹è¿˜æ˜¯ PS4 ç³»ç»Ÿæ›´æ–°å’Œæ¸¸æˆä¸‹è½½çš„é€Ÿåº¦ã€‚æ—©å‰ç”±äºç´¢å°¼å¹¶æ²¡æœ‰åœ¨å›½å†…éƒ¨ç½² PSN ä¸‹è½½æœåŠ¡çš„ CDNï¼Œæ‰€ä»¥ä¸‹è½½é€Ÿåº¦æ‰æ€¥ã€‚ä½†æ˜¯ç°åœ¨å›½å†…çš„å¤§éƒ¨åˆ† DNS æœåŠ¡å•†éƒ½èƒ½æ­£ç¡®çš„å°† PSN çš„ç›¸å…³åŸŸåè§£æåˆ°å›½å†…çš„æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯å¶å°”è¿˜æ˜¯ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œä»Šå¤©å°±æ¥èŠä¸‹ç›¸å…³çš„è§£å†³åŠæ³•ã€‚</p>","more":"<h3 id=\"é¡»çŸ¥\"><a href=\"#é¡»çŸ¥\" class=\"headerlink\" title=\"é¡»çŸ¥\"></a>é¡»çŸ¥</h3><p>PSN çš„æ¸¸æˆå’Œæ›´æ–°éƒ½æ˜¯é€šè¿‡ <code>gs2.ww.prod.dl.playstation.net</code> è¿™ä¸ªåŸŸåï¼ŒåŒæ—¶ç´¢å°¼ä¹Ÿåœ¨ä»–çš„å„ä¸ªä¸»è¦å¸‚åœºåœ°åŒºéƒ¨ç½²äº†åŒæ ·çš„é•œåƒæœåŠ¡å™¨ã€‚</p>\n<p>æ—©å‰å›½å†…ç”±äºæ²¡æœ‰éƒ¨ç½² CDNï¼Œæ‰€ä»¥å¾ˆå¤šç©å®¶éƒ½æ˜¯é€šè¿‡ <code>PSX Download Helper</code> è¿™ä¸ªè½¯ä»¶å°†æ¸¸æˆä¸‹è½½åˆ°ç”µè„‘ä¸Šç„¶ååœ¨è½¬ç§»åˆ° PS ä¸­ï¼Œç›¸å…³æ•™ç¨‹å¯ä»¥çœ‹è¿™é‡Œ</p>\n<p>åˆ°åæ¥å›½è¡Œçš„ PS å‘å¸ƒä¹‹åï¼Œå›½å†…çš„ DNS æœåŠ¡å•†åŸºæœ¬éƒ½èƒ½æ­£ç¡®è§£æ <code>gs2.ww.prod.dl.playstation.net</code> äº†ï¼Œè¿™æ ·æ™®é€šç©å®¶ä¸éœ€è¦ä»»ä½•æ“ä½œéƒ½èƒ½å®ç°é«˜é€Ÿä¸‹è½½äº†ã€‚</p>\n<h3 id=\"é—®é¢˜\"><a href=\"#é—®é¢˜\" class=\"headerlink\" title=\"é—®é¢˜\"></a>é—®é¢˜</h3><ul>\n<li><p>å›½å†… DNS æœåŠ¡å™¨ä»ç„¶ä¼šæŠŠ <code>gs2.ww.prod.dl.playstation.net</code> è§£æåˆ°å›½å¤–å¯¼è‡´ä¸‹è½½å˜æ…¢ï¼Œä¸ä»…ä»…æ˜¯è¿è¥å•†çš„ DNS è§£æï¼ŒåŒ…æ‹¬ä¸€äº›å…¬å…±çš„ DNS è§£æå¦‚ 114 å’Œè…¾è®¯ DNS éƒ½å¶å°”ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚</p>\n</li>\n<li><p>æŸäº› PSN æ¸¸æˆï¼Œå°±ç®— DNS æœåŠ¡å™¨ç»™å‡ºäº†å›½å†… IP ä»ç„¶ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ã€‚</p>\n</li>\n<li><p>éƒ¨åˆ†æ¸¸æˆé‡‡ç”¨çš„æ˜¯çƒ­æ›´æ–°å³æ¸¸æˆå†…æ›´æ–°ï¼Œè¿™ç§æƒ…å†µç”±äºæ›´æ–°æ˜¯ä»æ¸¸æˆå‚å®¶è‡ªå·±çš„æœåŠ¡å™¨æ¥çš„ï¼Œå¹¶ä¸åœ¨ PSN æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥é€Ÿåº¦ä»ä¼šä¸ç†æƒ³ã€‚</p>\n</li>\n</ul>\n<h3 id=\"è§£å†³åŠæ³•\"><a href=\"#è§£å†³åŠæ³•\" class=\"headerlink\" title=\"è§£å†³åŠæ³•\"></a>è§£å†³åŠæ³•</h3><p>ä¸€èˆ¬æ¥è¯´ä»¥ä¸Šæƒ…å†µæœ‰å‡ ç§è§£å†³åŠæ³•ï¼Œå¦‚ä¸‹ï¼š</p>\n<ul>\n<li><p>ä½¿ç”¨è¿è¥å•†æä¾›çš„ç²¾å“çº¿è·¯å¦‚ç²¾å“ç½‘ã€‚</p>\n</li>\n<li><p>ä½¿ç”¨æŸäº›æ¸¸æˆåŠ é€Ÿå™¨æœåŠ¡å•†æä¾›çš„åŠ é€Ÿå®ï¼Œä¾‹å¦‚å¥‡æ¸¸æä¾›çš„è”æœºå®ã€‚</p>\n</li>\n<li><p>è´­ä¹°èƒ½å¤Ÿåˆ·å›ºä»¶çš„è·¯ç”±å™¨ï¼Œå¹¶åœ¨è·¯ç”±å™¨ä¸Šå®‰è£… SSã€SSR è¿™ç§ä»£ç†æœåŠ¡ã€‚</p>\n</li>\n</ul>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œ2 å’Œ 3 éƒ½æ˜¯æ¯”è¾ƒå¥½çš„è§£å†³åŠæ³•ï¼Œä»Šå¤©æˆ‘ä»¬èŠä¸‹ç¬¬ä¸‰ç§è§£å†³åŠæ³•ã€‚</p>\n<p>æˆ‘ä¸ªäººæ˜¯è´­ä¹°äº†ç½‘ä»¶çš„ R7000 ç„¶ååˆ·äº†æ¢…æ—å›ºä»¶ï¼Œå¸‚é¢ä¸Šä¹Ÿæœ‰å¾ˆå¤šè·¯ç”±å™¨èƒ½åˆ·ç±»ä¼¼ OpenWrt æˆ–è€… Padavan è¿™äº›å›ºä»¶çš„ï¼Œæ¨èå»æœç´¢ä¸€ä¸‹ç›¸å…³å†…å®¹ã€‚</p>\n<h3 id=\"åŸç†\"><a href=\"#åŸç†\" class=\"headerlink\" title=\"åŸç†\"></a>åŸç†</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œè·¯ç”±å™¨ä¸Šè£…å¥½äº† SS ä¹‹ç±»çš„ä»£ç†æœåŠ¡ä¹‹åï¼Œéƒ½ä¼šæä¾› Dnsmasq çš„åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒèƒ½å¤Ÿæä¾› DNS æœåŠ¡ï¼Œè®©è·¯ç”±å™¨ä¼˜å…ˆä½¿ç”¨æœ¬åœ°è‡ªå®šä¹‰çš„ DNSã€‚</p>\n<p>ä¾‹å¦‚ä¸‹å›¾çš„ DNS è½¬å‘ ä¸­è®¾ç½®ä¸º <code>/gs2.ww.prod.dl.playstation.net/119.29.29.29</code> çš„æ„æ€å°±æ˜¯å°† PSN çš„ä¸‹è½½æœåŠ¡å™¨åœ°å€äº¤ç»™ <code>119.29.29.29</code> æ¥è§£æï¼Œè€Œè¿™ä¸ª DNS æœåŠ¡å™¨æ˜¯è…¾è®¯æä¾›çš„å·©å›º DNS æœåŠ¡å™¨ã€‚è¿™æ ·çš„è¯åŸºæœ¬èƒ½ä¿è¯æ¯æ¬¡éƒ½èƒ½è·å¾—æ­£ç¡®çš„å›½å†…çš„ä¸‹è½½åœ°å€ã€‚</p>\n<p><img src=\"https://s1.ax1x.com/2018/05/01/CJwt3t.png\"></p>\n<p>å…·ä½“çš„è®¾å®šå¯ä»¥å‚è€ƒè¿™é‡Œï¼Œå¦‚æœä½ åœ¨å›½å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥æŒ‡å®š DNS æœåŠ¡å™¨ã€‚</p>\n<p>å½“ç„¶ï¼Œå¦‚æœä½ æƒ³æˆ–è€…æœ€ä½³çš„ä¸‹è½½èŠ‚ç‚¹ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ nslookup å‘½ä»¤æ¥æŸ¥æ‰¾æœ€ä½³çš„ä¸‹è½½èŠ‚ç‚¹ï¼Œæ¯”å¦‚åœ¨ PowerShell æˆ–è€… Terminal ä¸­è¾“å…¥ <code>nslookup gs2.ww.prod.dl.playstation.net 119.29.29.29</code> å°±èƒ½è·å¾—å¦‚ä¸‹ç»“æœï¼ˆæœ‰ç®€åŒ–ï¼‰ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Bash\">Server:\t\t114.114.114.114<br>Address:\t114.114.114.114<span class=\"hljs-comment\">#53</span><br><br>Name:\ta1796.cn.w.tl88.net<br>Address: 118.123.105.16<br>Name:\ta1796.cn.w.tl88.net<br>Address: 118.123.105.17<br></code></pre></td></tr></table></figure>\n\n<p>å›¾ä¸­çš„ <code>118.123.105.16</code> å’Œ <code>118.123.105.17</code> å°±æ˜¯è…¾è®¯å…¬å…± DNS æœåŠ¡å™¨ç»™å‡ºçš„å®ƒè®¤ä¸ºæœ€å¥½çš„ PSN ä¸‹è½½æœåŠ¡å™¨çš„åœ°å€ï¼Œç„¶åä½ å¯ä»¥é€šè¿‡ Ping æ¥æµ‹è¯•è¿™ä¸¤ä¸ªåœ°å€çš„å»¶è¿Ÿã€‚å¦‚æœä½ æƒ³æµ‹è¯•å…¶ä»–çš„ DNS æœåŠ¡å™¨ï¼Œåªè¦æŒ‰ä»¥ä¸Šæ­¥éª¤å»åšå°±å¥½ï¼Œç„¶åå°†ä½ è§‰å¾—æœ€å¥½çš„è®¾ç½®åˆ° DNS è½¬å‘ä¸­å³å¯ã€‚</p>"},{"title":"åŒæºå’Œè·¨åŸŸ","date":"2018-10-17T15:16:26.000Z","index_img":"/img/same-origin-and-cross-domain/banner.png","_content":"\nå®é™…å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦å‘èµ·è·¨åŸŸè¯·æ±‚çš„æ—¶å€™ï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯æœ‰ä¸å°‘è§£å†³åŠæ³•çš„ï¼Œè¯´åˆ°éœ€è¦è·¨åŸŸçš„åŸå› å°±ä¸å¾—ä¸æåŒæºæ”¿ç­–äº†ï¼Œè¿˜æœ‰è·¨åŸŸçš„ç©¶æè§£æ³• CORSã€‚\n\n<!-- more -->\n\n### ä»€ä¹ˆæ˜¯åŒæºæ”¿ç­–ï¼ˆ`Same-Origin Policy`ï¼‰\n\n- åè®®ç›¸åŒ\n\n- åŸŸåç›¸åŒ\n\n- ç«¯å£ç›¸åŒ\n\n> åªè¦åè®®ã€åŸŸåã€ç«¯å£æœ‰ä»»ä½•ä¸€ä¸ªä¸åŒï¼Œéƒ½è¢«å½“ä½œæ˜¯ä¸åŒçš„æºã€‚\n\næ›´è¯¦ç»†çš„è§£é‡Šå¯ä»¥çœ‹[è¿™é‡Œ](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)\n\n### ä¸ºä»€ä¹ˆè¦æœ‰åŒæºæ”¿ç­–\n\nåŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚è€Œä¸”ä¿æŠ¤ç”¨æˆ·éšç§ä¿¡æ¯ï¼Œé˜²æ­¢èº«ä»½ä¼ªé€ ç­‰(è¯»å– Cookie)ã€‚\n\n### document.domain\n\nå¯¹äºä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒçš„æƒ…å†µï¼Œå¯ä»¥è®¾ç½® `document.domain` æ¥è§„é¿åŒæºæ”¿ç­–ã€‚\n\n```Javascript\n// å¯¹äº blog.tinykid.org å’Œ dev.tiny.orgï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹è®¾ç½®è·å– cookie\ndocument.domain = 'tinykid.org'\n```\n\n### location.hash\n\nè¿™ç§æ–¹å¼æ˜¯å­æ¡†æ¶å…·æœ‰ä¿®æ”¹çˆ¶æ¡†æ¶ src çš„ hash å€¼ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§è¿›è¡Œä¼ é€’æ•°æ®ï¼Œä¸”æ›´æ”¹ hash å€¼ï¼Œé¡µé¢ä¸ä¼šåˆ·æ–°ã€‚ä½†æ˜¯ä¼ é€’çš„æ•°æ®çš„å­—èŠ‚æ•°æ˜¯æœ‰é™çš„ã€‚\n\n```Javascript\n// çˆ¶çª—å£\niframe = document.createElement('iframe')\niframe.style.display = 'none'\nvar state = 0\n\niframe.onload = function() {\n  if (state === 1) {\n    // è·å–æ•°æ®\n    var data = window.location.hash\n    // é”€æ¯ iframe\n    iframe.contentWindow.document.write('')\n    iframe.contentWindow.close()\n    document.body.removeChild(iframe)\n  } else if (state === 0) {\n    state = 1\n    iframe.contentWindow.location = 'http://tinykid.org/xxx.html'\n  }\n}\ndocument.body.appendChild(iframe)\n\n\n// xxx é¡µé¢ä¸­\nparent.location.hash = \"data\";\n```\n\n### window.postMessage\n\nè¿™ä¸ªæ–¹æ³•æ˜¯ HTML5 ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–° APIï¼Œç”¨äºè·¨åŸŸçš„çˆ¶å­çª—å£é€šä¿¡ï¼Œä¸å—åŒæºç­–ç•¥é™åˆ¶ã€‚é€šè¿‡å®ƒå¯ä»¥å®ç°å¯¹å­˜å‚¨çš„è¯»å†™ï¼ŒDOM çš„æ“ä½œç­‰ã€‚\n\n```Javascript\n// å¼¹å‡ºä¸€ä¸ªæ–°çª—å£\nvar popup = window.open('http://child.com');\n\n//çˆ¶çª—å£å‘å­çª—å£å‘é€æ¶ˆæ¯\npopup.postMessage('Hello World!', 'http://child.com');\n\n//å­çª—å£å‘çˆ¶çª—å£å‘é€æ¶ˆæ¯\nwindow.opener.postMessage('Nice to see you', 'http://parent.com');\n\n//çˆ¶å­éƒ½å¯ä»¥ç›‘å¬ message äº‹ä»¶å“åº”\nwindow.addEventListener('message', function(e) {\n  // do something\n}, false);\n```\n\n### WebSocket\n\nWebSockets æ˜¯ä¸€ä¸ªå¯ä»¥åˆ›å»ºå’ŒæœåŠ¡å™¨é—´è¿›è¡ŒåŒå‘ä¼šè¯çš„é«˜çº§æŠ€æœ¯ã€‚é€šè¿‡è¿™ä¸ª API ä½ å¯ä»¥å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯å¹¶æ¥å—åŸºäºäº‹ä»¶é©±åŠ¨çš„å“åº”ï¼Œè¿™æ ·å°±ä¸ç”¨å‘æœåŠ¡å™¨è½®è¯¢è·å–æ•°æ®äº†ã€‚æ›´å¤šä¿¡æ¯ç‚¹[è¿™é‡Œ](https://developer.mozilla.org/zh-CN/docs/Web/API/WebSockets_API)ã€‚\n\n### JSONP\n\nJSONP è™½ç„¶å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯åªæ”¯æŒ Get æ–¹æ³•ï¼Œå…¶æ€è·¯æ˜¯ script æ ‡ç­¾æ˜¯æ²¡æœ‰åŒæºé™åˆ¶çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨è¿™ç‚¹æ¥å‘èµ·è·¨åŸŸè¯·æ±‚ã€‚çœ‹ä»£ç ï¼š\n\n```Javascript\n;(function(global) {\n  var id = 0,\n    container = document.getElementsByTagName('head')[0]\n\n  function jsonp(options) {\n    if (!options || !options.url) return\n\n    var scriptNode = document.createElement('script'),\n      data = options.data || {},\n      url = options.url,\n      callback = options.callback,\n      fnName = 'jsonp' + id++\n\n    // æ·»åŠ å›è°ƒå‡½æ•°\n    data['callback'] = fnName\n\n    // æ‹¼æ¥url\n    var params = []\n    for (var key in data) {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]))\n    }\n    url = url.indexOf('?') > 0 ? url + '&' : url + '?'\n    url += params.join('&')\n    scriptNode.src = url\n\n    // ä¼ é€’çš„æ˜¯ä¸€ä¸ªåŒ¿åçš„å›è°ƒå‡½æ•°ï¼Œè¦æ‰§è¡Œçš„è¯ï¼Œæš´éœ²ä¸ºä¸€ä¸ªå…¨å±€æ–¹æ³•\n    global[fnName] = function(ret) {\n      callback && callback(ret)\n      container.removeChild(scriptNode)\n      delete global[fnName]\n    }\n\n    // å‡ºé”™å¤„ç†\n    scriptNode.onerror = function() {\n      callback &&\n        callback({\n          error: 'error'\n        })\n      container.removeChild(scriptNode)\n      global[fnName] && delete global[fnName]\n    }\n\n    scriptNode.type = 'text/javascript'\n    container.appendChild(scriptNode)\n  }\n\n  global.jsonp = jsonp\n})(this)\n```\n\n### CORS\n\nCORS å¯ä»¥è¯´æ˜¯è·¨åŸŸçš„ç©¶æè§£æ³•æ–¹æ³•ï¼Œç”±æµè§ˆå™¨è‡ªåŠ¨å®Œæˆã€‚è¿™ä¸ªæœºåˆ¶å…è®¸ Web åº”ç”¨æœåŠ¡å™¨è¿›è¡Œè·¨åŸŸè®¿é—®æ§åˆ¶ï¼Œä»è€Œä½¿è·¨åŸŸæ•°æ®ä¼ è¾“å¾—ä»¥å®‰å…¨è¿›è¡Œã€‚æµè§ˆå™¨æ”¯æŒåœ¨ API å®¹å™¨ä¸­ï¼ˆä¾‹å¦‚ XMLHttpRequest æˆ– Fetch ï¼‰ä½¿ç”¨ CORSï¼Œä»¥é™ä½è·¨åŸŸ HTTP è¯·æ±‚æ‰€å¸¦æ¥çš„é£é™©ã€‚å…·ä½“æè¿°å¯ä»¥çœ‹è¿™é‡Œã€‚\n\nç”±äº MDN å·²ç»è®²è§£çš„éå¸¸ä»”ç»†äº†ï¼Œæˆ‘å°±è¯´ä¸€ä¸‹æ³¨æ„äº‹é¡¹ã€‚\n\nå¯¹äºå®¢æˆ·ç«¯ï¼Œéœ€è¦æ³¨æ„è®¾ç½® `xhr.withCredentials = true`ï¼Œä¸ç„¶æ— æ³•æºå¸¦ cookieã€‚\n\nå¯¹äºæœåŠ¡ç«¯éœ€è¦è¿”å›ä¸¤ä¸ªå…³é”®å­—æ®µï¼Œ`Access-Control-Allow-Origin` å’Œ `Access-Control-Allow-Credentials`ï¼Œè¿™æ ·åŸºæœ¬å°±èƒ½é¡ºåˆ©å®Œæˆè·¨åŸŸè¯·æ±‚ã€‚\n","source":"_posts/same-origin-and-cross-domain.md","raw":"---\ntitle: åŒæºå’Œè·¨åŸŸ\ndate: 2018-10-17 23:16:26\ncategories:\n  - FE\ntags:\n  - Browser\nindex_img: /img/same-origin-and-cross-domain/banner.png\n---\n\nå®é™…å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦å‘èµ·è·¨åŸŸè¯·æ±‚çš„æ—¶å€™ï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯æœ‰ä¸å°‘è§£å†³åŠæ³•çš„ï¼Œè¯´åˆ°éœ€è¦è·¨åŸŸçš„åŸå› å°±ä¸å¾—ä¸æåŒæºæ”¿ç­–äº†ï¼Œè¿˜æœ‰è·¨åŸŸçš„ç©¶æè§£æ³• CORSã€‚\n\n<!-- more -->\n\n### ä»€ä¹ˆæ˜¯åŒæºæ”¿ç­–ï¼ˆ`Same-Origin Policy`ï¼‰\n\n- åè®®ç›¸åŒ\n\n- åŸŸåç›¸åŒ\n\n- ç«¯å£ç›¸åŒ\n\n> åªè¦åè®®ã€åŸŸåã€ç«¯å£æœ‰ä»»ä½•ä¸€ä¸ªä¸åŒï¼Œéƒ½è¢«å½“ä½œæ˜¯ä¸åŒçš„æºã€‚\n\næ›´è¯¦ç»†çš„è§£é‡Šå¯ä»¥çœ‹[è¿™é‡Œ](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)\n\n### ä¸ºä»€ä¹ˆè¦æœ‰åŒæºæ”¿ç­–\n\nåŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚è€Œä¸”ä¿æŠ¤ç”¨æˆ·éšç§ä¿¡æ¯ï¼Œé˜²æ­¢èº«ä»½ä¼ªé€ ç­‰(è¯»å– Cookie)ã€‚\n\n### document.domain\n\nå¯¹äºä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒçš„æƒ…å†µï¼Œå¯ä»¥è®¾ç½® `document.domain` æ¥è§„é¿åŒæºæ”¿ç­–ã€‚\n\n```Javascript\n// å¯¹äº blog.tinykid.org å’Œ dev.tiny.orgï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹è®¾ç½®è·å– cookie\ndocument.domain = 'tinykid.org'\n```\n\n### location.hash\n\nè¿™ç§æ–¹å¼æ˜¯å­æ¡†æ¶å…·æœ‰ä¿®æ”¹çˆ¶æ¡†æ¶ src çš„ hash å€¼ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§è¿›è¡Œä¼ é€’æ•°æ®ï¼Œä¸”æ›´æ”¹ hash å€¼ï¼Œé¡µé¢ä¸ä¼šåˆ·æ–°ã€‚ä½†æ˜¯ä¼ é€’çš„æ•°æ®çš„å­—èŠ‚æ•°æ˜¯æœ‰é™çš„ã€‚\n\n```Javascript\n// çˆ¶çª—å£\niframe = document.createElement('iframe')\niframe.style.display = 'none'\nvar state = 0\n\niframe.onload = function() {\n  if (state === 1) {\n    // è·å–æ•°æ®\n    var data = window.location.hash\n    // é”€æ¯ iframe\n    iframe.contentWindow.document.write('')\n    iframe.contentWindow.close()\n    document.body.removeChild(iframe)\n  } else if (state === 0) {\n    state = 1\n    iframe.contentWindow.location = 'http://tinykid.org/xxx.html'\n  }\n}\ndocument.body.appendChild(iframe)\n\n\n// xxx é¡µé¢ä¸­\nparent.location.hash = \"data\";\n```\n\n### window.postMessage\n\nè¿™ä¸ªæ–¹æ³•æ˜¯ HTML5 ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–° APIï¼Œç”¨äºè·¨åŸŸçš„çˆ¶å­çª—å£é€šä¿¡ï¼Œä¸å—åŒæºç­–ç•¥é™åˆ¶ã€‚é€šè¿‡å®ƒå¯ä»¥å®ç°å¯¹å­˜å‚¨çš„è¯»å†™ï¼ŒDOM çš„æ“ä½œç­‰ã€‚\n\n```Javascript\n// å¼¹å‡ºä¸€ä¸ªæ–°çª—å£\nvar popup = window.open('http://child.com');\n\n//çˆ¶çª—å£å‘å­çª—å£å‘é€æ¶ˆæ¯\npopup.postMessage('Hello World!', 'http://child.com');\n\n//å­çª—å£å‘çˆ¶çª—å£å‘é€æ¶ˆæ¯\nwindow.opener.postMessage('Nice to see you', 'http://parent.com');\n\n//çˆ¶å­éƒ½å¯ä»¥ç›‘å¬ message äº‹ä»¶å“åº”\nwindow.addEventListener('message', function(e) {\n  // do something\n}, false);\n```\n\n### WebSocket\n\nWebSockets æ˜¯ä¸€ä¸ªå¯ä»¥åˆ›å»ºå’ŒæœåŠ¡å™¨é—´è¿›è¡ŒåŒå‘ä¼šè¯çš„é«˜çº§æŠ€æœ¯ã€‚é€šè¿‡è¿™ä¸ª API ä½ å¯ä»¥å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯å¹¶æ¥å—åŸºäºäº‹ä»¶é©±åŠ¨çš„å“åº”ï¼Œè¿™æ ·å°±ä¸ç”¨å‘æœåŠ¡å™¨è½®è¯¢è·å–æ•°æ®äº†ã€‚æ›´å¤šä¿¡æ¯ç‚¹[è¿™é‡Œ](https://developer.mozilla.org/zh-CN/docs/Web/API/WebSockets_API)ã€‚\n\n### JSONP\n\nJSONP è™½ç„¶å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯åªæ”¯æŒ Get æ–¹æ³•ï¼Œå…¶æ€è·¯æ˜¯ script æ ‡ç­¾æ˜¯æ²¡æœ‰åŒæºé™åˆ¶çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨è¿™ç‚¹æ¥å‘èµ·è·¨åŸŸè¯·æ±‚ã€‚çœ‹ä»£ç ï¼š\n\n```Javascript\n;(function(global) {\n  var id = 0,\n    container = document.getElementsByTagName('head')[0]\n\n  function jsonp(options) {\n    if (!options || !options.url) return\n\n    var scriptNode = document.createElement('script'),\n      data = options.data || {},\n      url = options.url,\n      callback = options.callback,\n      fnName = 'jsonp' + id++\n\n    // æ·»åŠ å›è°ƒå‡½æ•°\n    data['callback'] = fnName\n\n    // æ‹¼æ¥url\n    var params = []\n    for (var key in data) {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]))\n    }\n    url = url.indexOf('?') > 0 ? url + '&' : url + '?'\n    url += params.join('&')\n    scriptNode.src = url\n\n    // ä¼ é€’çš„æ˜¯ä¸€ä¸ªåŒ¿åçš„å›è°ƒå‡½æ•°ï¼Œè¦æ‰§è¡Œçš„è¯ï¼Œæš´éœ²ä¸ºä¸€ä¸ªå…¨å±€æ–¹æ³•\n    global[fnName] = function(ret) {\n      callback && callback(ret)\n      container.removeChild(scriptNode)\n      delete global[fnName]\n    }\n\n    // å‡ºé”™å¤„ç†\n    scriptNode.onerror = function() {\n      callback &&\n        callback({\n          error: 'error'\n        })\n      container.removeChild(scriptNode)\n      global[fnName] && delete global[fnName]\n    }\n\n    scriptNode.type = 'text/javascript'\n    container.appendChild(scriptNode)\n  }\n\n  global.jsonp = jsonp\n})(this)\n```\n\n### CORS\n\nCORS å¯ä»¥è¯´æ˜¯è·¨åŸŸçš„ç©¶æè§£æ³•æ–¹æ³•ï¼Œç”±æµè§ˆå™¨è‡ªåŠ¨å®Œæˆã€‚è¿™ä¸ªæœºåˆ¶å…è®¸ Web åº”ç”¨æœåŠ¡å™¨è¿›è¡Œè·¨åŸŸè®¿é—®æ§åˆ¶ï¼Œä»è€Œä½¿è·¨åŸŸæ•°æ®ä¼ è¾“å¾—ä»¥å®‰å…¨è¿›è¡Œã€‚æµè§ˆå™¨æ”¯æŒåœ¨ API å®¹å™¨ä¸­ï¼ˆä¾‹å¦‚ XMLHttpRequest æˆ– Fetch ï¼‰ä½¿ç”¨ CORSï¼Œä»¥é™ä½è·¨åŸŸ HTTP è¯·æ±‚æ‰€å¸¦æ¥çš„é£é™©ã€‚å…·ä½“æè¿°å¯ä»¥çœ‹è¿™é‡Œã€‚\n\nç”±äº MDN å·²ç»è®²è§£çš„éå¸¸ä»”ç»†äº†ï¼Œæˆ‘å°±è¯´ä¸€ä¸‹æ³¨æ„äº‹é¡¹ã€‚\n\nå¯¹äºå®¢æˆ·ç«¯ï¼Œéœ€è¦æ³¨æ„è®¾ç½® `xhr.withCredentials = true`ï¼Œä¸ç„¶æ— æ³•æºå¸¦ cookieã€‚\n\nå¯¹äºæœåŠ¡ç«¯éœ€è¦è¿”å›ä¸¤ä¸ªå…³é”®å­—æ®µï¼Œ`Access-Control-Allow-Origin` å’Œ `Access-Control-Allow-Credentials`ï¼Œè¿™æ ·åŸºæœ¬å°±èƒ½é¡ºåˆ©å®Œæˆè·¨åŸŸè¯·æ±‚ã€‚\n","slug":"same-origin-and-cross-domain","published":1,"updated":"2022-08-27T10:26:48.412Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clejnkd4x000auoqrfdpv8z9t","content":"<p>å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦å‘èµ·è·¨åŸŸè¯·æ±‚çš„æ—¶å€™ï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯æœ‰ä¸å°‘è§£å†³åŠæ³•çš„ï¼Œè¯´åˆ°éœ€è¦è·¨åŸŸçš„åŸå› å°±ä¸å¾—ä¸æåŒæºæ”¿ç­–äº†ï¼Œè¿˜æœ‰è·¨åŸŸçš„ç©¶æè§£æ³• CORSã€‚</p>\n<span id=\"more\"></span>\n\n<h3 id=\"ä»€ä¹ˆæ˜¯åŒæºæ”¿ç­–ï¼ˆSame-Origin-Policyï¼‰\"><a href=\"#ä»€ä¹ˆæ˜¯åŒæºæ”¿ç­–ï¼ˆSame-Origin-Policyï¼‰\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åŒæºæ”¿ç­–ï¼ˆSame-Origin Policyï¼‰\"></a>ä»€ä¹ˆæ˜¯åŒæºæ”¿ç­–ï¼ˆ<code>Same-Origin Policy</code>ï¼‰</h3><ul>\n<li><p>åè®®ç›¸åŒ</p>\n</li>\n<li><p>åŸŸåç›¸åŒ</p>\n</li>\n<li><p>ç«¯å£ç›¸åŒ</p>\n</li>\n</ul>\n<blockquote>\n<p>åªè¦åè®®ã€åŸŸåã€ç«¯å£æœ‰ä»»ä½•ä¸€ä¸ªä¸åŒï¼Œéƒ½è¢«å½“ä½œæ˜¯ä¸åŒçš„æºã€‚</p>\n</blockquote>\n<p>æ›´è¯¦ç»†çš„è§£é‡Šå¯ä»¥çœ‹<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy\">è¿™é‡Œ</a></p>\n<h3 id=\"ä¸ºä»€ä¹ˆè¦æœ‰åŒæºæ”¿ç­–\"><a href=\"#ä¸ºä»€ä¹ˆè¦æœ‰åŒæºæ”¿ç­–\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦æœ‰åŒæºæ”¿ç­–\"></a>ä¸ºä»€ä¹ˆè¦æœ‰åŒæºæ”¿ç­–</h3><p>åŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚è€Œä¸”ä¿æŠ¤ç”¨æˆ·éšç§ä¿¡æ¯ï¼Œé˜²æ­¢èº«ä»½ä¼ªé€ ç­‰(è¯»å– Cookie)ã€‚</p>\n<h3 id=\"document-domain\"><a href=\"#document-domain\" class=\"headerlink\" title=\"document.domain\"></a>document.domain</h3><p>å¯¹äºä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒçš„æƒ…å†µï¼Œå¯ä»¥è®¾ç½® <code>document.domain</code> æ¥è§„é¿åŒæºæ”¿ç­–ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-comment\">// å¯¹äº blog.tinykid.org å’Œ dev.tiny.orgï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹è®¾ç½®è·å– cookie</span><br><span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">domain</span> = <span class=\"hljs-string\">&#x27;tinykid.org&#x27;</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"location-hash\"><a href=\"#location-hash\" class=\"headerlink\" title=\"location.hash\"></a>location.hash</h3><p>è¿™ç§æ–¹å¼æ˜¯å­æ¡†æ¶å…·æœ‰ä¿®æ”¹çˆ¶æ¡†æ¶ src çš„ hash å€¼ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§è¿›è¡Œä¼ é€’æ•°æ®ï¼Œä¸”æ›´æ”¹ hash å€¼ï¼Œé¡µé¢ä¸ä¼šåˆ·æ–°ã€‚ä½†æ˜¯ä¼ é€’çš„æ•°æ®çš„å­—èŠ‚æ•°æ˜¯æœ‰é™çš„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-comment\">// çˆ¶çª—å£</span><br>iframe = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&#x27;iframe&#x27;</span>)<br>iframe.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">display</span> = <span class=\"hljs-string\">&#x27;none&#x27;</span><br><span class=\"hljs-keyword\">var</span> state = <span class=\"hljs-number\">0</span><br><br>iframe.<span class=\"hljs-property\">onload</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) &#123;<br>  <span class=\"hljs-keyword\">if</span> (state === <span class=\"hljs-number\">1</span>) &#123;<br>    <span class=\"hljs-comment\">// è·å–æ•°æ®</span><br>    <span class=\"hljs-keyword\">var</span> data = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">location</span>.<span class=\"hljs-property\">hash</span><br>    <span class=\"hljs-comment\">// é”€æ¯ iframe</span><br>    iframe.<span class=\"hljs-property\">contentWindow</span>.<span class=\"hljs-property\">document</span>.<span class=\"hljs-title function_\">write</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>)<br>    iframe.<span class=\"hljs-property\">contentWindow</span>.<span class=\"hljs-title function_\">close</span>()<br>    <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">removeChild</span>(iframe)<br>  &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (state === <span class=\"hljs-number\">0</span>) &#123;<br>    state = <span class=\"hljs-number\">1</span><br>    iframe.<span class=\"hljs-property\">contentWindow</span>.<span class=\"hljs-property\">location</span> = <span class=\"hljs-string\">&#x27;http://tinykid.org/xxx.html&#x27;</span><br>  &#125;<br>&#125;<br><span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">appendChild</span>(iframe)<br><br><br><span class=\"hljs-comment\">// xxx é¡µé¢ä¸­</span><br>parent.<span class=\"hljs-property\">location</span>.<span class=\"hljs-property\">hash</span> = <span class=\"hljs-string\">&quot;data&quot;</span>;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"window-postMessage\"><a href=\"#window-postMessage\" class=\"headerlink\" title=\"window.postMessage\"></a>window.postMessage</h3><p>è¿™ä¸ªæ–¹æ³•æ˜¯ HTML5 ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–° APIï¼Œç”¨äºè·¨åŸŸçš„çˆ¶å­çª—å£é€šä¿¡ï¼Œä¸å—åŒæºç­–ç•¥é™åˆ¶ã€‚é€šè¿‡å®ƒå¯ä»¥å®ç°å¯¹å­˜å‚¨çš„è¯»å†™ï¼ŒDOM çš„æ“ä½œç­‰ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-comment\">// å¼¹å‡ºä¸€ä¸ªæ–°çª—å£</span><br><span class=\"hljs-keyword\">var</span> popup = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">&#x27;http://child.com&#x27;</span>);<br><br><span class=\"hljs-comment\">//çˆ¶çª—å£å‘å­çª—å£å‘é€æ¶ˆæ¯</span><br>popup.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&#x27;Hello World!&#x27;</span>, <span class=\"hljs-string\">&#x27;http://child.com&#x27;</span>);<br><br><span class=\"hljs-comment\">//å­çª—å£å‘çˆ¶çª—å£å‘é€æ¶ˆæ¯</span><br><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">opener</span>.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&#x27;Nice to see you&#x27;</span>, <span class=\"hljs-string\">&#x27;http://parent.com&#x27;</span>);<br><br><span class=\"hljs-comment\">//çˆ¶å­éƒ½å¯ä»¥ç›‘å¬ message äº‹ä»¶å“åº”</span><br><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;message&#x27;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>) &#123;<br>  <span class=\"hljs-comment\">// do something</span><br>&#125;, <span class=\"hljs-literal\">false</span>);<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"WebSocket\"><a href=\"#WebSocket\" class=\"headerlink\" title=\"WebSocket\"></a>WebSocket</h3><p>WebSockets æ˜¯ä¸€ä¸ªå¯ä»¥åˆ›å»ºå’ŒæœåŠ¡å™¨é—´è¿›è¡ŒåŒå‘ä¼šè¯çš„é«˜çº§æŠ€æœ¯ã€‚é€šè¿‡è¿™ä¸ª API ä½ å¯ä»¥å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯å¹¶æ¥å—åŸºäºäº‹ä»¶é©±åŠ¨çš„å“åº”ï¼Œè¿™æ ·å°±ä¸ç”¨å‘æœåŠ¡å™¨è½®è¯¢è·å–æ•°æ®äº†ã€‚æ›´å¤šä¿¡æ¯ç‚¹<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/WebSockets_API\">è¿™é‡Œ</a>ã€‚</p>\n<h3 id=\"JSONP\"><a href=\"#JSONP\" class=\"headerlink\" title=\"JSONP\"></a>JSONP</h3><p>JSONP è™½ç„¶å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯åªæ”¯æŒ Get æ–¹æ³•ï¼Œå…¶æ€è·¯æ˜¯ script æ ‡ç­¾æ˜¯æ²¡æœ‰åŒæºé™åˆ¶çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨è¿™ç‚¹æ¥å‘èµ·è·¨åŸŸè¯·æ±‚ã€‚çœ‹ä»£ç ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\">;(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">global</span></span>) &#123;<br>  <span class=\"hljs-keyword\">var</span> id = <span class=\"hljs-number\">0</span>,<br>    container = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementsByTagName</span>(<span class=\"hljs-string\">&#x27;head&#x27;</span>)[<span class=\"hljs-number\">0</span>]<br><br>  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">jsonp</span>(<span class=\"hljs-params\">options</span>) &#123;<br>    <span class=\"hljs-keyword\">if</span> (!options || !options.<span class=\"hljs-property\">url</span>) <span class=\"hljs-keyword\">return</span><br><br>    <span class=\"hljs-keyword\">var</span> scriptNode = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&#x27;script&#x27;</span>),<br>      data = options.<span class=\"hljs-property\">data</span> || &#123;&#125;,<br>      url = options.<span class=\"hljs-property\">url</span>,<br>      callback = options.<span class=\"hljs-property\">callback</span>,<br>      fnName = <span class=\"hljs-string\">&#x27;jsonp&#x27;</span> + id++<br><br>    <span class=\"hljs-comment\">// æ·»åŠ å›è°ƒå‡½æ•°</span><br>    data[<span class=\"hljs-string\">&#x27;callback&#x27;</span>] = fnName<br><br>    <span class=\"hljs-comment\">// æ‹¼æ¥url</span><br>    <span class=\"hljs-keyword\">var</span> params = []<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> key <span class=\"hljs-keyword\">in</span> data) &#123;<br>      params.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-built_in\">encodeURIComponent</span>(key) + <span class=\"hljs-string\">&#x27;=&#x27;</span> + <span class=\"hljs-built_in\">encodeURIComponent</span>(data[key]))<br>    &#125;<br>    url = url.<span class=\"hljs-title function_\">indexOf</span>(<span class=\"hljs-string\">&#x27;?&#x27;</span>) &gt; <span class=\"hljs-number\">0</span> ? url + <span class=\"hljs-string\">&#x27;&amp;&#x27;</span> : url + <span class=\"hljs-string\">&#x27;?&#x27;</span><br>    url += params.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&amp;&#x27;</span>)<br>    scriptNode.<span class=\"hljs-property\">src</span> = url<br><br>    <span class=\"hljs-comment\">// ä¼ é€’çš„æ˜¯ä¸€ä¸ªåŒ¿åçš„å›è°ƒå‡½æ•°ï¼Œè¦æ‰§è¡Œçš„è¯ï¼Œæš´éœ²ä¸ºä¸€ä¸ªå…¨å±€æ–¹æ³•</span><br>    <span class=\"hljs-variable language_\">global</span>[fnName] = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">ret</span>) &#123;<br>      callback &amp;&amp; <span class=\"hljs-title function_\">callback</span>(ret)<br>      container.<span class=\"hljs-title function_\">removeChild</span>(scriptNode)<br>      <span class=\"hljs-keyword\">delete</span> <span class=\"hljs-variable language_\">global</span>[fnName]<br>    &#125;<br><br>    <span class=\"hljs-comment\">// å‡ºé”™å¤„ç†</span><br>    scriptNode.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) &#123;<br>      callback &amp;&amp;<br>        <span class=\"hljs-title function_\">callback</span>(&#123;<br>          <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">&#x27;error&#x27;</span><br>        &#125;)<br>      container.<span class=\"hljs-title function_\">removeChild</span>(scriptNode)<br>      <span class=\"hljs-variable language_\">global</span>[fnName] &amp;&amp; <span class=\"hljs-keyword\">delete</span> <span class=\"hljs-variable language_\">global</span>[fnName]<br>    &#125;<br><br>    scriptNode.<span class=\"hljs-property\">type</span> = <span class=\"hljs-string\">&#x27;text/javascript&#x27;</span><br>    container.<span class=\"hljs-title function_\">appendChild</span>(scriptNode)<br>  &#125;<br><br>  <span class=\"hljs-variable language_\">global</span>.<span class=\"hljs-property\">jsonp</span> = jsonp<br>&#125;)(<span class=\"hljs-variable language_\">this</span>)<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"CORS\"><a href=\"#CORS\" class=\"headerlink\" title=\"CORS\"></a>CORS</h3><p>CORS å¯ä»¥è¯´æ˜¯è·¨åŸŸçš„ç©¶æè§£æ³•æ–¹æ³•ï¼Œç”±æµè§ˆå™¨è‡ªåŠ¨å®Œæˆã€‚è¿™ä¸ªæœºåˆ¶å…è®¸ Web åº”ç”¨æœåŠ¡å™¨è¿›è¡Œè·¨åŸŸè®¿é—®æ§åˆ¶ï¼Œä»è€Œä½¿è·¨åŸŸæ•°æ®ä¼ è¾“å¾—ä»¥å®‰å…¨è¿›è¡Œã€‚æµè§ˆå™¨æ”¯æŒåœ¨ API å®¹å™¨ä¸­ï¼ˆä¾‹å¦‚ XMLHttpRequest æˆ– Fetch ï¼‰ä½¿ç”¨ CORSï¼Œä»¥é™ä½è·¨åŸŸ HTTP è¯·æ±‚æ‰€å¸¦æ¥çš„é£é™©ã€‚å…·ä½“æè¿°å¯ä»¥çœ‹è¿™é‡Œã€‚</p>\n<p>ç”±äº MDN å·²ç»è®²è§£çš„éå¸¸ä»”ç»†äº†ï¼Œæˆ‘å°±è¯´ä¸€ä¸‹æ³¨æ„äº‹é¡¹ã€‚</p>\n<p>å¯¹äºå®¢æˆ·ç«¯ï¼Œéœ€è¦æ³¨æ„è®¾ç½® <code>xhr.withCredentials = true</code>ï¼Œä¸ç„¶æ— æ³•æºå¸¦ cookieã€‚</p>\n<p>å¯¹äºæœåŠ¡ç«¯éœ€è¦è¿”å›ä¸¤ä¸ªå…³é”®å­—æ®µï¼Œ<code>Access-Control-Allow-Origin</code> å’Œ <code>Access-Control-Allow-Credentials</code>ï¼Œè¿™æ ·åŸºæœ¬å°±èƒ½é¡ºåˆ©å®Œæˆè·¨åŸŸè¯·æ±‚ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦å‘èµ·è·¨åŸŸè¯·æ±‚çš„æ—¶å€™ï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯æœ‰ä¸å°‘è§£å†³åŠæ³•çš„ï¼Œè¯´åˆ°éœ€è¦è·¨åŸŸçš„åŸå› å°±ä¸å¾—ä¸æåŒæºæ”¿ç­–äº†ï¼Œè¿˜æœ‰è·¨åŸŸçš„ç©¶æè§£æ³• CORSã€‚</p>","more":"<h3 id=\"ä»€ä¹ˆæ˜¯åŒæºæ”¿ç­–ï¼ˆSame-Origin-Policyï¼‰\"><a href=\"#ä»€ä¹ˆæ˜¯åŒæºæ”¿ç­–ï¼ˆSame-Origin-Policyï¼‰\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åŒæºæ”¿ç­–ï¼ˆSame-Origin Policyï¼‰\"></a>ä»€ä¹ˆæ˜¯åŒæºæ”¿ç­–ï¼ˆ<code>Same-Origin Policy</code>ï¼‰</h3><ul>\n<li><p>åè®®ç›¸åŒ</p>\n</li>\n<li><p>åŸŸåç›¸åŒ</p>\n</li>\n<li><p>ç«¯å£ç›¸åŒ</p>\n</li>\n</ul>\n<blockquote>\n<p>åªè¦åè®®ã€åŸŸåã€ç«¯å£æœ‰ä»»ä½•ä¸€ä¸ªä¸åŒï¼Œéƒ½è¢«å½“ä½œæ˜¯ä¸åŒçš„æºã€‚</p>\n</blockquote>\n<p>æ›´è¯¦ç»†çš„è§£é‡Šå¯ä»¥çœ‹<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy\">è¿™é‡Œ</a></p>\n<h3 id=\"ä¸ºä»€ä¹ˆè¦æœ‰åŒæºæ”¿ç­–\"><a href=\"#ä¸ºä»€ä¹ˆè¦æœ‰åŒæºæ”¿ç­–\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦æœ‰åŒæºæ”¿ç­–\"></a>ä¸ºä»€ä¹ˆè¦æœ‰åŒæºæ”¿ç­–</h3><p>åŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚è€Œä¸”ä¿æŠ¤ç”¨æˆ·éšç§ä¿¡æ¯ï¼Œé˜²æ­¢èº«ä»½ä¼ªé€ ç­‰(è¯»å– Cookie)ã€‚</p>\n<h3 id=\"document-domain\"><a href=\"#document-domain\" class=\"headerlink\" title=\"document.domain\"></a>document.domain</h3><p>å¯¹äºä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒçš„æƒ…å†µï¼Œå¯ä»¥è®¾ç½® <code>document.domain</code> æ¥è§„é¿åŒæºæ”¿ç­–ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-comment\">// å¯¹äº blog.tinykid.org å’Œ dev.tiny.orgï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹è®¾ç½®è·å– cookie</span><br><span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">domain</span> = <span class=\"hljs-string\">&#x27;tinykid.org&#x27;</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"location-hash\"><a href=\"#location-hash\" class=\"headerlink\" title=\"location.hash\"></a>location.hash</h3><p>è¿™ç§æ–¹å¼æ˜¯å­æ¡†æ¶å…·æœ‰ä¿®æ”¹çˆ¶æ¡†æ¶ src çš„ hash å€¼ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§è¿›è¡Œä¼ é€’æ•°æ®ï¼Œä¸”æ›´æ”¹ hash å€¼ï¼Œé¡µé¢ä¸ä¼šåˆ·æ–°ã€‚ä½†æ˜¯ä¼ é€’çš„æ•°æ®çš„å­—èŠ‚æ•°æ˜¯æœ‰é™çš„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-comment\">// çˆ¶çª—å£</span><br>iframe = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&#x27;iframe&#x27;</span>)<br>iframe.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">display</span> = <span class=\"hljs-string\">&#x27;none&#x27;</span><br><span class=\"hljs-keyword\">var</span> state = <span class=\"hljs-number\">0</span><br><br>iframe.<span class=\"hljs-property\">onload</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) &#123;<br>  <span class=\"hljs-keyword\">if</span> (state === <span class=\"hljs-number\">1</span>) &#123;<br>    <span class=\"hljs-comment\">// è·å–æ•°æ®</span><br>    <span class=\"hljs-keyword\">var</span> data = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">location</span>.<span class=\"hljs-property\">hash</span><br>    <span class=\"hljs-comment\">// é”€æ¯ iframe</span><br>    iframe.<span class=\"hljs-property\">contentWindow</span>.<span class=\"hljs-property\">document</span>.<span class=\"hljs-title function_\">write</span>(<span class=\"hljs-string\">&#x27;&#x27;</span>)<br>    iframe.<span class=\"hljs-property\">contentWindow</span>.<span class=\"hljs-title function_\">close</span>()<br>    <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">removeChild</span>(iframe)<br>  &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (state === <span class=\"hljs-number\">0</span>) &#123;<br>    state = <span class=\"hljs-number\">1</span><br>    iframe.<span class=\"hljs-property\">contentWindow</span>.<span class=\"hljs-property\">location</span> = <span class=\"hljs-string\">&#x27;http://tinykid.org/xxx.html&#x27;</span><br>  &#125;<br>&#125;<br><span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">appendChild</span>(iframe)<br><br><br><span class=\"hljs-comment\">// xxx é¡µé¢ä¸­</span><br>parent.<span class=\"hljs-property\">location</span>.<span class=\"hljs-property\">hash</span> = <span class=\"hljs-string\">&quot;data&quot;</span>;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"window-postMessage\"><a href=\"#window-postMessage\" class=\"headerlink\" title=\"window.postMessage\"></a>window.postMessage</h3><p>è¿™ä¸ªæ–¹æ³•æ˜¯ HTML5 ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–° APIï¼Œç”¨äºè·¨åŸŸçš„çˆ¶å­çª—å£é€šä¿¡ï¼Œä¸å—åŒæºç­–ç•¥é™åˆ¶ã€‚é€šè¿‡å®ƒå¯ä»¥å®ç°å¯¹å­˜å‚¨çš„è¯»å†™ï¼ŒDOM çš„æ“ä½œç­‰ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-comment\">// å¼¹å‡ºä¸€ä¸ªæ–°çª—å£</span><br><span class=\"hljs-keyword\">var</span> popup = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">open</span>(<span class=\"hljs-string\">&#x27;http://child.com&#x27;</span>);<br><br><span class=\"hljs-comment\">//çˆ¶çª—å£å‘å­çª—å£å‘é€æ¶ˆæ¯</span><br>popup.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&#x27;Hello World!&#x27;</span>, <span class=\"hljs-string\">&#x27;http://child.com&#x27;</span>);<br><br><span class=\"hljs-comment\">//å­çª—å£å‘çˆ¶çª—å£å‘é€æ¶ˆæ¯</span><br><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">opener</span>.<span class=\"hljs-title function_\">postMessage</span>(<span class=\"hljs-string\">&#x27;Nice to see you&#x27;</span>, <span class=\"hljs-string\">&#x27;http://parent.com&#x27;</span>);<br><br><span class=\"hljs-comment\">//çˆ¶å­éƒ½å¯ä»¥ç›‘å¬ message äº‹ä»¶å“åº”</span><br><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;message&#x27;</span>, <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">e</span>) &#123;<br>  <span class=\"hljs-comment\">// do something</span><br>&#125;, <span class=\"hljs-literal\">false</span>);<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"WebSocket\"><a href=\"#WebSocket\" class=\"headerlink\" title=\"WebSocket\"></a>WebSocket</h3><p>WebSockets æ˜¯ä¸€ä¸ªå¯ä»¥åˆ›å»ºå’ŒæœåŠ¡å™¨é—´è¿›è¡ŒåŒå‘ä¼šè¯çš„é«˜çº§æŠ€æœ¯ã€‚é€šè¿‡è¿™ä¸ª API ä½ å¯ä»¥å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯å¹¶æ¥å—åŸºäºäº‹ä»¶é©±åŠ¨çš„å“åº”ï¼Œè¿™æ ·å°±ä¸ç”¨å‘æœåŠ¡å™¨è½®è¯¢è·å–æ•°æ®äº†ã€‚æ›´å¤šä¿¡æ¯ç‚¹<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/WebSockets_API\">è¿™é‡Œ</a>ã€‚</p>\n<h3 id=\"JSONP\"><a href=\"#JSONP\" class=\"headerlink\" title=\"JSONP\"></a>JSONP</h3><p>JSONP è™½ç„¶å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯åªæ”¯æŒ Get æ–¹æ³•ï¼Œå…¶æ€è·¯æ˜¯ script æ ‡ç­¾æ˜¯æ²¡æœ‰åŒæºé™åˆ¶çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨è¿™ç‚¹æ¥å‘èµ·è·¨åŸŸè¯·æ±‚ã€‚çœ‹ä»£ç ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\">;(<span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"><span class=\"hljs-variable language_\">global</span></span>) &#123;<br>  <span class=\"hljs-keyword\">var</span> id = <span class=\"hljs-number\">0</span>,<br>    container = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementsByTagName</span>(<span class=\"hljs-string\">&#x27;head&#x27;</span>)[<span class=\"hljs-number\">0</span>]<br><br>  <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">jsonp</span>(<span class=\"hljs-params\">options</span>) &#123;<br>    <span class=\"hljs-keyword\">if</span> (!options || !options.<span class=\"hljs-property\">url</span>) <span class=\"hljs-keyword\">return</span><br><br>    <span class=\"hljs-keyword\">var</span> scriptNode = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&#x27;script&#x27;</span>),<br>      data = options.<span class=\"hljs-property\">data</span> || &#123;&#125;,<br>      url = options.<span class=\"hljs-property\">url</span>,<br>      callback = options.<span class=\"hljs-property\">callback</span>,<br>      fnName = <span class=\"hljs-string\">&#x27;jsonp&#x27;</span> + id++<br><br>    <span class=\"hljs-comment\">// æ·»åŠ å›è°ƒå‡½æ•°</span><br>    data[<span class=\"hljs-string\">&#x27;callback&#x27;</span>] = fnName<br><br>    <span class=\"hljs-comment\">// æ‹¼æ¥url</span><br>    <span class=\"hljs-keyword\">var</span> params = []<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> key <span class=\"hljs-keyword\">in</span> data) &#123;<br>      params.<span class=\"hljs-title function_\">push</span>(<span class=\"hljs-built_in\">encodeURIComponent</span>(key) + <span class=\"hljs-string\">&#x27;=&#x27;</span> + <span class=\"hljs-built_in\">encodeURIComponent</span>(data[key]))<br>    &#125;<br>    url = url.<span class=\"hljs-title function_\">indexOf</span>(<span class=\"hljs-string\">&#x27;?&#x27;</span>) &gt; <span class=\"hljs-number\">0</span> ? url + <span class=\"hljs-string\">&#x27;&amp;&#x27;</span> : url + <span class=\"hljs-string\">&#x27;?&#x27;</span><br>    url += params.<span class=\"hljs-title function_\">join</span>(<span class=\"hljs-string\">&#x27;&amp;&#x27;</span>)<br>    scriptNode.<span class=\"hljs-property\">src</span> = url<br><br>    <span class=\"hljs-comment\">// ä¼ é€’çš„æ˜¯ä¸€ä¸ªåŒ¿åçš„å›è°ƒå‡½æ•°ï¼Œè¦æ‰§è¡Œçš„è¯ï¼Œæš´éœ²ä¸ºä¸€ä¸ªå…¨å±€æ–¹æ³•</span><br>    <span class=\"hljs-variable language_\">global</span>[fnName] = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">ret</span>) &#123;<br>      callback &amp;&amp; <span class=\"hljs-title function_\">callback</span>(ret)<br>      container.<span class=\"hljs-title function_\">removeChild</span>(scriptNode)<br>      <span class=\"hljs-keyword\">delete</span> <span class=\"hljs-variable language_\">global</span>[fnName]<br>    &#125;<br><br>    <span class=\"hljs-comment\">// å‡ºé”™å¤„ç†</span><br>    scriptNode.<span class=\"hljs-property\">onerror</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) &#123;<br>      callback &amp;&amp;<br>        <span class=\"hljs-title function_\">callback</span>(&#123;<br>          <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">&#x27;error&#x27;</span><br>        &#125;)<br>      container.<span class=\"hljs-title function_\">removeChild</span>(scriptNode)<br>      <span class=\"hljs-variable language_\">global</span>[fnName] &amp;&amp; <span class=\"hljs-keyword\">delete</span> <span class=\"hljs-variable language_\">global</span>[fnName]<br>    &#125;<br><br>    scriptNode.<span class=\"hljs-property\">type</span> = <span class=\"hljs-string\">&#x27;text/javascript&#x27;</span><br>    container.<span class=\"hljs-title function_\">appendChild</span>(scriptNode)<br>  &#125;<br><br>  <span class=\"hljs-variable language_\">global</span>.<span class=\"hljs-property\">jsonp</span> = jsonp<br>&#125;)(<span class=\"hljs-variable language_\">this</span>)<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"CORS\"><a href=\"#CORS\" class=\"headerlink\" title=\"CORS\"></a>CORS</h3><p>CORS å¯ä»¥è¯´æ˜¯è·¨åŸŸçš„ç©¶æè§£æ³•æ–¹æ³•ï¼Œç”±æµè§ˆå™¨è‡ªåŠ¨å®Œæˆã€‚è¿™ä¸ªæœºåˆ¶å…è®¸ Web åº”ç”¨æœåŠ¡å™¨è¿›è¡Œè·¨åŸŸè®¿é—®æ§åˆ¶ï¼Œä»è€Œä½¿è·¨åŸŸæ•°æ®ä¼ è¾“å¾—ä»¥å®‰å…¨è¿›è¡Œã€‚æµè§ˆå™¨æ”¯æŒåœ¨ API å®¹å™¨ä¸­ï¼ˆä¾‹å¦‚ XMLHttpRequest æˆ– Fetch ï¼‰ä½¿ç”¨ CORSï¼Œä»¥é™ä½è·¨åŸŸ HTTP è¯·æ±‚æ‰€å¸¦æ¥çš„é£é™©ã€‚å…·ä½“æè¿°å¯ä»¥çœ‹è¿™é‡Œã€‚</p>\n<p>ç”±äº MDN å·²ç»è®²è§£çš„éå¸¸ä»”ç»†äº†ï¼Œæˆ‘å°±è¯´ä¸€ä¸‹æ³¨æ„äº‹é¡¹ã€‚</p>\n<p>å¯¹äºå®¢æˆ·ç«¯ï¼Œéœ€è¦æ³¨æ„è®¾ç½® <code>xhr.withCredentials = true</code>ï¼Œä¸ç„¶æ— æ³•æºå¸¦ cookieã€‚</p>\n<p>å¯¹äºæœåŠ¡ç«¯éœ€è¦è¿”å›ä¸¤ä¸ªå…³é”®å­—æ®µï¼Œ<code>Access-Control-Allow-Origin</code> å’Œ <code>Access-Control-Allow-Credentials</code>ï¼Œè¿™æ ·åŸºæœ¬å°±èƒ½é¡ºåˆ©å®Œæˆè·¨åŸŸè¯·æ±‚ã€‚</p>"},{"title":"JavaScript ä¸­çš„ Unicode","date":"2018-07-21T14:05:58.000Z","index_img":"/img/unicode-in-javascript/banner.png","_content":"\nåœ¨ä»¥å¾€çš„é¡¹ç›®ä¸­ç»å¸¸ä¼šé‡åˆ°å¤šå­—èŠ‚å­—ç¬¦çš„å¤„ç†ï¼Œæœ€è¿‘é‡æ–°æŸ¥é˜…äº†ä¸€äº›èµ„æ–™ï¼Œè®°å½•ä¸€ä¸‹å…³äº Unicode çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œæ–¹ä¾¿æ—¥åå­¦ä¹ ã€‚\n\n<!-- more -->\n\n### Unicode\n\nUnicode æ˜¯ç›®å‰ç»å¤§å¤šæ•°ç¨‹åºä½¿ç”¨çš„å­—ç¬¦ç¼–ç ï¼Œå®šä¹‰ä¹Ÿå¾ˆç®€å•ï¼Œç”¨ä¸€ä¸ªç ç‚¹ï¼ˆ`Code Point`ï¼‰æ˜ å°„ä¸€ä¸ªå­—ç¬¦ã€‚ç ç‚¹å€¼çš„èŒƒå›´æ˜¯ä» `U+0000` åˆ° `U+10FFFF`ï¼Œå¯ä»¥è¡¨ç¤ºè¶…è¿‡ 110 ä¸‡ä¸ªç¬¦å·ã€‚æ¯”å¦‚ï¼š\n\n- A çš„ç ç‚¹ï¼š`U+0041`\n- a çš„ç ç‚¹ï¼š`U+0061`\n- ğŸ˜ çš„ç ç‚¹ï¼š`U+1F610`\n\næ¯ä¸ªç ç‚¹çš„è¯¦ç»†ä¿¡æ¯éƒ½å¯ä»¥åœ¨ [Codepoints](https://codepoints.net/) æŸ¥è¯¢åˆ°ã€‚\n\nUnicode æœ€å‰é¢çš„ 65536 ä¸ªå­—ç¬¦ä½ï¼Œç§°ä¸ºåŸºæœ¬å¹³é¢ï¼ˆ`Basic Multilingual Plane`ï¼‰ï¼Œå®ƒçš„ç ç‚¹èŒƒå›´æ˜¯ä» `U+0000` åˆ° `U+FFFF`ã€‚æœ€å¸¸è§çš„å­—ç¬¦éƒ½æ”¾åœ¨è¿™ä¸ªå¹³é¢ï¼Œè¿™æ˜¯ Unicode æœ€å…ˆå®šä¹‰å’Œå…¬å¸ƒçš„ä¸€ä¸ªå¹³é¢ã€‚\n\nå‰©ä¸‹çš„å­—ç¬¦éƒ½æ”¾åœ¨è¡¥å……å¹³é¢ï¼ˆ`Supplementary Plane`ï¼‰ï¼Œç ç‚¹èŒƒå›´ä» `U+010000` ä¸€ç›´åˆ° `U+10FFFF`ï¼Œå…± 16 ä¸ªã€‚\n\n### UTF ä¸ UCS\n\nUTFï¼ˆ`Unicode Transformation Format`ï¼‰Unicode è½¬æ¢æ ¼å¼ï¼Œæ˜¯æœåŠ¡äº Unicode çš„ï¼Œç”¨äºå°†ä¸€ä¸ª Unicode ç ç‚¹è½¬æ¢ä¸ºç‰¹å®šçš„å­—èŠ‚åºåˆ—ã€‚å¸¸è§çš„ UTF æœ‰ï¼š\n\n> UTF-8 å¯å˜å­—èŠ‚åºåˆ—ï¼Œç”¨ 1 åˆ° 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹ UTF-16 å¯å˜å­—èŠ‚åºåˆ—ï¼Œç”¨ 2 æˆ– 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹ UTF-32 å›ºå®šå­—èŠ‚åºåˆ—ï¼Œç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹\n\nç„¶è€Œï¼Œç”±äº JS é—®ä¸–çš„æ—¶å€™ï¼Œ`UTF-16` è¿˜æ²¡æœ‰è¯ç”Ÿï¼Œæ‰€ä»¥ä½¿ç”¨äº† `UCS-2` æ¥å¤„ç†å­—ç¬¦ï¼Œä¹Ÿå› æ­¤ç•™ä¸‹äº†å¾ˆå¤šå‘ã€‚\n\nUCSï¼ˆ`Universal Character Set`ï¼‰é€šç”¨å­—ç¬¦é›†ï¼Œæ˜¯ä¸€ä¸ª ISO æ ‡å‡†ï¼Œç›®å‰ä¸ Unicode å¯ä»¥è¯´æ˜¯ç­‰ä»·çš„ã€‚ ç›¸å¯¹äº UTFï¼ŒUCS ä¹Ÿæœ‰è‡ªå·±çš„è½¬æ¢æ–¹æ³•ï¼ˆç¼–ç ï¼‰ã€‚å¦‚ï¼š\n\n> UCS-2 ç”¨ 2 ä¸ªå­—èŠ‚è¡¨ç¤º BMP çš„ç ç‚¹ UCS-4 ç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºç ç‚¹\n\n`UCS-2` æ˜¯ä¸€ä¸ªè¿‡æ—¶çš„ç¼–ç æ–¹å¼ï¼Œå› ä¸ºå®ƒåªèƒ½ç¼–ç åŸºæœ¬å¹³é¢ï¼ˆBMPï¼‰çš„ç ç‚¹ï¼Œåœ¨ BMP çš„ç¼–ç ä¸Šï¼Œä¸ `UTF-16` æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºæ˜¯ `UTF-16` çš„ä¸€ä¸ªå­é›†ã€‚\n\n`UCS-4` åˆ™ä¸ `UTF-32` ç­‰ä»·ï¼Œéƒ½æ˜¯ç”¨ 4 ä¸ªå­—èŠ‚æ¥ç¼–ç  Unicodeã€‚\n\n`UTF-16` å¯¹äº BMP çš„ç ç‚¹ï¼Œé‡‡ç”¨ 2 ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç ï¼Œè€Œ BMP ä¹‹å¤–çš„ç ç‚¹ï¼Œç”¨ 4 ä¸ªå­—èŠ‚ç»„æˆä»£ç†å¯¹ï¼ˆ`Surrogate Pair`ï¼‰æ¥è¡¨ç¤ºã€‚å…¶ä¸­å‰ä¸¤ä¸ªå­—èŠ‚èŒƒå›´æ˜¯ `U+D800` åˆ° `U+DBFF`ï¼Œåä¸¤ä¸ªå­—èŠ‚èŒƒå›´æ˜¯ `U+DC00` åˆ° `U+DFFF`ï¼Œé€šè¿‡ä»¥ä¸‹å…¬å¼å®Œæˆæ˜ å°„ï¼š\n\n```Javascript\n// ï¼ˆHï¼šé«˜å­—èŠ‚ Lï¼šä½å­—èŠ‚ cï¼šç ç‚¹ï¼‰\n\nH = Math.floor((c - 0x10000) / 0x400) + 0xD800\n\nL = (c â€“ 0x10000) % 0x400 + 0xDC00\n```\n\n### JS å­—ç¬¦å¤„ç†\n\nè¿™é‡Œæˆ‘ä»¬æ‹¿ä¸Šé¢çš„ ğŸ˜ çš„ç ç‚¹æ¥è§£é‡Šï¼Œç”±äº JS è®¤ä¸º 2 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè€Œ ğŸ˜ åœ¨ JS ä¸­çš„ç¼–ç æ˜¯ `\\ud83d\\ude10`ï¼Œæ‰€ä»¥è¿™ä¸ªè¡¨æƒ…æ˜¯å ä¸¤ä¸ªå­—ç¬¦çš„ï¼Œé‚£ä¹ˆè¿™æ—¶ç”¨ length åˆ¤æ–­é•¿åº¦çš„æ—¶å€™ä¼šæ˜¯ 2ã€‚\n\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ­£åˆ™æ¥è¯†åˆ«è¿™äº›å ä¸¤ä¸ªå­—ç¬¦çš„æ–‡å­—æˆ–è¡¨æƒ…ï¼Œç„¶åå°†å…¶æ›¿æ¢ä¸º BMP å†…çš„å­—ç¬¦å°±å¯ä»¥äº†ã€‚\n\n```Javascript\nvar reg = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g // åŒ¹é… UTF-16 çš„ä»£ç†å¯¹\n\nfunction count(string) {\n\treturn string\n\t\t.replace(reg, '-')\n\t\t.length\n}\n\ncount('ğŸ˜') // 1\n```\n\nå½“ç„¶ï¼ŒES6 ä¸­å·²ç»å¢åŠ äº†å¾ˆå¤šå¯¹äº Unicode å­—ç¬¦çš„æ–°æ–¹æ³•ï¼Œæ¯”å¦‚ `String.codePointAt()` æ–¹æ³•ï¼Œ`\\u{128528}` é€šè¿‡åŠ ä¸ŠèŠ±æ‹¬å·å’Œæ ‡ç¤ºæ¥è¡¨ç¤ºè€Œä¸ç”¨å»è®¡ç®—ä»£ç†å¯¹ã€‚\n","source":"_posts/unicode-in-javascript.md","raw":"---\ntitle: JavaScript ä¸­çš„ Unicode\ndate: 2018-7-21 22:05:58\ncategories:\n  - FE\ntags:\n  - Javascript\n  - Unicode\nindex_img: /img/unicode-in-javascript/banner.png\n---\n\nåœ¨ä»¥å¾€çš„é¡¹ç›®ä¸­ç»å¸¸ä¼šé‡åˆ°å¤šå­—èŠ‚å­—ç¬¦çš„å¤„ç†ï¼Œæœ€è¿‘é‡æ–°æŸ¥é˜…äº†ä¸€äº›èµ„æ–™ï¼Œè®°å½•ä¸€ä¸‹å…³äº Unicode çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œæ–¹ä¾¿æ—¥åå­¦ä¹ ã€‚\n\n<!-- more -->\n\n### Unicode\n\nUnicode æ˜¯ç›®å‰ç»å¤§å¤šæ•°ç¨‹åºä½¿ç”¨çš„å­—ç¬¦ç¼–ç ï¼Œå®šä¹‰ä¹Ÿå¾ˆç®€å•ï¼Œç”¨ä¸€ä¸ªç ç‚¹ï¼ˆ`Code Point`ï¼‰æ˜ å°„ä¸€ä¸ªå­—ç¬¦ã€‚ç ç‚¹å€¼çš„èŒƒå›´æ˜¯ä» `U+0000` åˆ° `U+10FFFF`ï¼Œå¯ä»¥è¡¨ç¤ºè¶…è¿‡ 110 ä¸‡ä¸ªç¬¦å·ã€‚æ¯”å¦‚ï¼š\n\n- A çš„ç ç‚¹ï¼š`U+0041`\n- a çš„ç ç‚¹ï¼š`U+0061`\n- ğŸ˜ çš„ç ç‚¹ï¼š`U+1F610`\n\næ¯ä¸ªç ç‚¹çš„è¯¦ç»†ä¿¡æ¯éƒ½å¯ä»¥åœ¨ [Codepoints](https://codepoints.net/) æŸ¥è¯¢åˆ°ã€‚\n\nUnicode æœ€å‰é¢çš„ 65536 ä¸ªå­—ç¬¦ä½ï¼Œç§°ä¸ºåŸºæœ¬å¹³é¢ï¼ˆ`Basic Multilingual Plane`ï¼‰ï¼Œå®ƒçš„ç ç‚¹èŒƒå›´æ˜¯ä» `U+0000` åˆ° `U+FFFF`ã€‚æœ€å¸¸è§çš„å­—ç¬¦éƒ½æ”¾åœ¨è¿™ä¸ªå¹³é¢ï¼Œè¿™æ˜¯ Unicode æœ€å…ˆå®šä¹‰å’Œå…¬å¸ƒçš„ä¸€ä¸ªå¹³é¢ã€‚\n\nå‰©ä¸‹çš„å­—ç¬¦éƒ½æ”¾åœ¨è¡¥å……å¹³é¢ï¼ˆ`Supplementary Plane`ï¼‰ï¼Œç ç‚¹èŒƒå›´ä» `U+010000` ä¸€ç›´åˆ° `U+10FFFF`ï¼Œå…± 16 ä¸ªã€‚\n\n### UTF ä¸ UCS\n\nUTFï¼ˆ`Unicode Transformation Format`ï¼‰Unicode è½¬æ¢æ ¼å¼ï¼Œæ˜¯æœåŠ¡äº Unicode çš„ï¼Œç”¨äºå°†ä¸€ä¸ª Unicode ç ç‚¹è½¬æ¢ä¸ºç‰¹å®šçš„å­—èŠ‚åºåˆ—ã€‚å¸¸è§çš„ UTF æœ‰ï¼š\n\n> UTF-8 å¯å˜å­—èŠ‚åºåˆ—ï¼Œç”¨ 1 åˆ° 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹ UTF-16 å¯å˜å­—èŠ‚åºåˆ—ï¼Œç”¨ 2 æˆ– 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹ UTF-32 å›ºå®šå­—èŠ‚åºåˆ—ï¼Œç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹\n\nç„¶è€Œï¼Œç”±äº JS é—®ä¸–çš„æ—¶å€™ï¼Œ`UTF-16` è¿˜æ²¡æœ‰è¯ç”Ÿï¼Œæ‰€ä»¥ä½¿ç”¨äº† `UCS-2` æ¥å¤„ç†å­—ç¬¦ï¼Œä¹Ÿå› æ­¤ç•™ä¸‹äº†å¾ˆå¤šå‘ã€‚\n\nUCSï¼ˆ`Universal Character Set`ï¼‰é€šç”¨å­—ç¬¦é›†ï¼Œæ˜¯ä¸€ä¸ª ISO æ ‡å‡†ï¼Œç›®å‰ä¸ Unicode å¯ä»¥è¯´æ˜¯ç­‰ä»·çš„ã€‚ ç›¸å¯¹äº UTFï¼ŒUCS ä¹Ÿæœ‰è‡ªå·±çš„è½¬æ¢æ–¹æ³•ï¼ˆç¼–ç ï¼‰ã€‚å¦‚ï¼š\n\n> UCS-2 ç”¨ 2 ä¸ªå­—èŠ‚è¡¨ç¤º BMP çš„ç ç‚¹ UCS-4 ç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºç ç‚¹\n\n`UCS-2` æ˜¯ä¸€ä¸ªè¿‡æ—¶çš„ç¼–ç æ–¹å¼ï¼Œå› ä¸ºå®ƒåªèƒ½ç¼–ç åŸºæœ¬å¹³é¢ï¼ˆBMPï¼‰çš„ç ç‚¹ï¼Œåœ¨ BMP çš„ç¼–ç ä¸Šï¼Œä¸ `UTF-16` æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºæ˜¯ `UTF-16` çš„ä¸€ä¸ªå­é›†ã€‚\n\n`UCS-4` åˆ™ä¸ `UTF-32` ç­‰ä»·ï¼Œéƒ½æ˜¯ç”¨ 4 ä¸ªå­—èŠ‚æ¥ç¼–ç  Unicodeã€‚\n\n`UTF-16` å¯¹äº BMP çš„ç ç‚¹ï¼Œé‡‡ç”¨ 2 ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç ï¼Œè€Œ BMP ä¹‹å¤–çš„ç ç‚¹ï¼Œç”¨ 4 ä¸ªå­—èŠ‚ç»„æˆä»£ç†å¯¹ï¼ˆ`Surrogate Pair`ï¼‰æ¥è¡¨ç¤ºã€‚å…¶ä¸­å‰ä¸¤ä¸ªå­—èŠ‚èŒƒå›´æ˜¯ `U+D800` åˆ° `U+DBFF`ï¼Œåä¸¤ä¸ªå­—èŠ‚èŒƒå›´æ˜¯ `U+DC00` åˆ° `U+DFFF`ï¼Œé€šè¿‡ä»¥ä¸‹å…¬å¼å®Œæˆæ˜ å°„ï¼š\n\n```Javascript\n// ï¼ˆHï¼šé«˜å­—èŠ‚ Lï¼šä½å­—èŠ‚ cï¼šç ç‚¹ï¼‰\n\nH = Math.floor((c - 0x10000) / 0x400) + 0xD800\n\nL = (c â€“ 0x10000) % 0x400 + 0xDC00\n```\n\n### JS å­—ç¬¦å¤„ç†\n\nè¿™é‡Œæˆ‘ä»¬æ‹¿ä¸Šé¢çš„ ğŸ˜ çš„ç ç‚¹æ¥è§£é‡Šï¼Œç”±äº JS è®¤ä¸º 2 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè€Œ ğŸ˜ åœ¨ JS ä¸­çš„ç¼–ç æ˜¯ `\\ud83d\\ude10`ï¼Œæ‰€ä»¥è¿™ä¸ªè¡¨æƒ…æ˜¯å ä¸¤ä¸ªå­—ç¬¦çš„ï¼Œé‚£ä¹ˆè¿™æ—¶ç”¨ length åˆ¤æ–­é•¿åº¦çš„æ—¶å€™ä¼šæ˜¯ 2ã€‚\n\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ­£åˆ™æ¥è¯†åˆ«è¿™äº›å ä¸¤ä¸ªå­—ç¬¦çš„æ–‡å­—æˆ–è¡¨æƒ…ï¼Œç„¶åå°†å…¶æ›¿æ¢ä¸º BMP å†…çš„å­—ç¬¦å°±å¯ä»¥äº†ã€‚\n\n```Javascript\nvar reg = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g // åŒ¹é… UTF-16 çš„ä»£ç†å¯¹\n\nfunction count(string) {\n\treturn string\n\t\t.replace(reg, '-')\n\t\t.length\n}\n\ncount('ğŸ˜') // 1\n```\n\nå½“ç„¶ï¼ŒES6 ä¸­å·²ç»å¢åŠ äº†å¾ˆå¤šå¯¹äº Unicode å­—ç¬¦çš„æ–°æ–¹æ³•ï¼Œæ¯”å¦‚ `String.codePointAt()` æ–¹æ³•ï¼Œ`\\u{128528}` é€šè¿‡åŠ ä¸ŠèŠ±æ‹¬å·å’Œæ ‡ç¤ºæ¥è¡¨ç¤ºè€Œä¸ç”¨å»è®¡ç®—ä»£ç†å¯¹ã€‚\n","slug":"unicode-in-javascript","published":1,"updated":"2022-08-27T10:26:48.412Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clejnkd4y000cuoqr64eg3sic","content":"<p>åœ¨ä»¥å¾€çš„é¡¹ç›®ä¸­ç»å¸¸ä¼šé‡åˆ°å¤šå­—èŠ‚å­—ç¬¦çš„å¤„ç†ï¼Œæœ€è¿‘é‡æ–°æŸ¥é˜…äº†ä¸€äº›èµ„æ–™ï¼Œè®°å½•ä¸€ä¸‹å…³äº Unicode çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œæ–¹ä¾¿æ—¥åå­¦ä¹ ã€‚</p>\n<span id=\"more\"></span>\n\n<h3 id=\"Unicode\"><a href=\"#Unicode\" class=\"headerlink\" title=\"Unicode\"></a>Unicode</h3><p>Unicode æ˜¯ç›®å‰ç»å¤§å¤šæ•°ç¨‹åºä½¿ç”¨çš„å­—ç¬¦ç¼–ç ï¼Œå®šä¹‰ä¹Ÿå¾ˆç®€å•ï¼Œç”¨ä¸€ä¸ªç ç‚¹ï¼ˆ<code>Code Point</code>ï¼‰æ˜ å°„ä¸€ä¸ªå­—ç¬¦ã€‚ç ç‚¹å€¼çš„èŒƒå›´æ˜¯ä» <code>U+0000</code> åˆ° <code>U+10FFFF</code>ï¼Œå¯ä»¥è¡¨ç¤ºè¶…è¿‡ 110 ä¸‡ä¸ªç¬¦å·ã€‚æ¯”å¦‚ï¼š</p>\n<ul>\n<li>A çš„ç ç‚¹ï¼š<code>U+0041</code></li>\n<li>a çš„ç ç‚¹ï¼š<code>U+0061</code></li>\n<li>ğŸ˜ çš„ç ç‚¹ï¼š<code>U+1F610</code></li>\n</ul>\n<p>æ¯ä¸ªç ç‚¹çš„è¯¦ç»†ä¿¡æ¯éƒ½å¯ä»¥åœ¨ <a href=\"https://codepoints.net/\">Codepoints</a> æŸ¥è¯¢åˆ°ã€‚</p>\n<p>Unicode æœ€å‰é¢çš„ 65536 ä¸ªå­—ç¬¦ä½ï¼Œç§°ä¸ºåŸºæœ¬å¹³é¢ï¼ˆ<code>Basic Multilingual Plane</code>ï¼‰ï¼Œå®ƒçš„ç ç‚¹èŒƒå›´æ˜¯ä» <code>U+0000</code> åˆ° <code>U+FFFF</code>ã€‚æœ€å¸¸è§çš„å­—ç¬¦éƒ½æ”¾åœ¨è¿™ä¸ªå¹³é¢ï¼Œè¿™æ˜¯ Unicode æœ€å…ˆå®šä¹‰å’Œå…¬å¸ƒçš„ä¸€ä¸ªå¹³é¢ã€‚</p>\n<p>å‰©ä¸‹çš„å­—ç¬¦éƒ½æ”¾åœ¨è¡¥å……å¹³é¢ï¼ˆ<code>Supplementary Plane</code>ï¼‰ï¼Œç ç‚¹èŒƒå›´ä» <code>U+010000</code> ä¸€ç›´åˆ° <code>U+10FFFF</code>ï¼Œå…± 16 ä¸ªã€‚</p>\n<h3 id=\"UTF-ä¸-UCS\"><a href=\"#UTF-ä¸-UCS\" class=\"headerlink\" title=\"UTF ä¸ UCS\"></a>UTF ä¸ UCS</h3><p>UTFï¼ˆ<code>Unicode Transformation Format</code>ï¼‰Unicode è½¬æ¢æ ¼å¼ï¼Œæ˜¯æœåŠ¡äº Unicode çš„ï¼Œç”¨äºå°†ä¸€ä¸ª Unicode ç ç‚¹è½¬æ¢ä¸ºç‰¹å®šçš„å­—èŠ‚åºåˆ—ã€‚å¸¸è§çš„ UTF æœ‰ï¼š</p>\n<blockquote>\n<p>UTF-8 å¯å˜å­—èŠ‚åºåˆ—ï¼Œç”¨ 1 åˆ° 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹ UTF-16 å¯å˜å­—èŠ‚åºåˆ—ï¼Œç”¨ 2 æˆ– 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹ UTF-32 å›ºå®šå­—èŠ‚åºåˆ—ï¼Œç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹</p>\n</blockquote>\n<p>ç„¶è€Œï¼Œç”±äº JS é—®ä¸–çš„æ—¶å€™ï¼Œ<code>UTF-16</code> è¿˜æ²¡æœ‰è¯ç”Ÿï¼Œæ‰€ä»¥ä½¿ç”¨äº† <code>UCS-2</code> æ¥å¤„ç†å­—ç¬¦ï¼Œä¹Ÿå› æ­¤ç•™ä¸‹äº†å¾ˆå¤šå‘ã€‚</p>\n<p>UCSï¼ˆ<code>Universal Character Set</code>ï¼‰é€šç”¨å­—ç¬¦é›†ï¼Œæ˜¯ä¸€ä¸ª ISO æ ‡å‡†ï¼Œç›®å‰ä¸ Unicode å¯ä»¥è¯´æ˜¯ç­‰ä»·çš„ã€‚ ç›¸å¯¹äº UTFï¼ŒUCS ä¹Ÿæœ‰è‡ªå·±çš„è½¬æ¢æ–¹æ³•ï¼ˆç¼–ç ï¼‰ã€‚å¦‚ï¼š</p>\n<blockquote>\n<p>UCS-2 ç”¨ 2 ä¸ªå­—èŠ‚è¡¨ç¤º BMP çš„ç ç‚¹ UCS-4 ç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºç ç‚¹</p>\n</blockquote>\n<p><code>UCS-2</code> æ˜¯ä¸€ä¸ªè¿‡æ—¶çš„ç¼–ç æ–¹å¼ï¼Œå› ä¸ºå®ƒåªèƒ½ç¼–ç åŸºæœ¬å¹³é¢ï¼ˆBMPï¼‰çš„ç ç‚¹ï¼Œåœ¨ BMP çš„ç¼–ç ä¸Šï¼Œä¸ <code>UTF-16</code> æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºæ˜¯ <code>UTF-16</code> çš„ä¸€ä¸ªå­é›†ã€‚</p>\n<p><code>UCS-4</code> åˆ™ä¸ <code>UTF-32</code> ç­‰ä»·ï¼Œéƒ½æ˜¯ç”¨ 4 ä¸ªå­—èŠ‚æ¥ç¼–ç  Unicodeã€‚</p>\n<p><code>UTF-16</code> å¯¹äº BMP çš„ç ç‚¹ï¼Œé‡‡ç”¨ 2 ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç ï¼Œè€Œ BMP ä¹‹å¤–çš„ç ç‚¹ï¼Œç”¨ 4 ä¸ªå­—èŠ‚ç»„æˆä»£ç†å¯¹ï¼ˆ<code>Surrogate Pair</code>ï¼‰æ¥è¡¨ç¤ºã€‚å…¶ä¸­å‰ä¸¤ä¸ªå­—èŠ‚èŒƒå›´æ˜¯ <code>U+D800</code> åˆ° <code>U+DBFF</code>ï¼Œåä¸¤ä¸ªå­—èŠ‚èŒƒå›´æ˜¯ <code>U+DC00</code> åˆ° <code>U+DFFF</code>ï¼Œé€šè¿‡ä»¥ä¸‹å…¬å¼å®Œæˆæ˜ å°„ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-comment\">// ï¼ˆHï¼šé«˜å­—èŠ‚ Lï¼šä½å­—èŠ‚ cï¼šç ç‚¹ï¼‰</span><br><br>H = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>((c - <span class=\"hljs-number\">0x10000</span>) / <span class=\"hljs-number\">0x400</span>) + <span class=\"hljs-number\">0xD800</span><br><br>L = (c â€“ <span class=\"hljs-number\">0x10000</span>) % <span class=\"hljs-number\">0x400</span> + <span class=\"hljs-number\">0xDC00</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"JS-å­—ç¬¦å¤„ç†\"><a href=\"#JS-å­—ç¬¦å¤„ç†\" class=\"headerlink\" title=\"JS å­—ç¬¦å¤„ç†\"></a>JS å­—ç¬¦å¤„ç†</h3><p>è¿™é‡Œæˆ‘ä»¬æ‹¿ä¸Šé¢çš„ ğŸ˜ çš„ç ç‚¹æ¥è§£é‡Šï¼Œç”±äº JS è®¤ä¸º 2 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè€Œ ğŸ˜ åœ¨ JS ä¸­çš„ç¼–ç æ˜¯ <code>\\ud83d\\ude10</code>ï¼Œæ‰€ä»¥è¿™ä¸ªè¡¨æƒ…æ˜¯å ä¸¤ä¸ªå­—ç¬¦çš„ï¼Œé‚£ä¹ˆè¿™æ—¶ç”¨ length åˆ¤æ–­é•¿åº¦çš„æ—¶å€™ä¼šæ˜¯ 2ã€‚</p>\n<p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ­£åˆ™æ¥è¯†åˆ«è¿™äº›å ä¸¤ä¸ªå­—ç¬¦çš„æ–‡å­—æˆ–è¡¨æƒ…ï¼Œç„¶åå°†å…¶æ›¿æ¢ä¸º BMP å†…çš„å­—ç¬¦å°±å¯ä»¥äº†ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-keyword\">var</span> reg = <span class=\"hljs-regexp\">/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g</span> <span class=\"hljs-comment\">// åŒ¹é… UTF-16 çš„ä»£ç†å¯¹</span><br><br><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">count</span>(<span class=\"hljs-params\">string</span>) &#123;<br>\t<span class=\"hljs-keyword\">return</span> string<br>\t\t.<span class=\"hljs-title function_\">replace</span>(reg, <span class=\"hljs-string\">&#x27;-&#x27;</span>)<br>\t\t.<span class=\"hljs-property\">length</span><br>&#125;<br><br><span class=\"hljs-title function_\">count</span>(<span class=\"hljs-string\">&#x27;ğŸ˜&#x27;</span>) <span class=\"hljs-comment\">// 1</span><br></code></pre></td></tr></table></figure>\n\n<p>å½“ç„¶ï¼ŒES6 ä¸­å·²ç»å¢åŠ äº†å¾ˆå¤šå¯¹äº Unicode å­—ç¬¦çš„æ–°æ–¹æ³•ï¼Œæ¯”å¦‚ <code>String.codePointAt()</code> æ–¹æ³•ï¼Œ<code>\\u&#123;128528&#125;</code> é€šè¿‡åŠ ä¸ŠèŠ±æ‹¬å·å’Œæ ‡ç¤ºæ¥è¡¨ç¤ºè€Œä¸ç”¨å»è®¡ç®—ä»£ç†å¯¹ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>åœ¨ä»¥å¾€çš„é¡¹ç›®ä¸­ç»å¸¸ä¼šé‡åˆ°å¤šå­—èŠ‚å­—ç¬¦çš„å¤„ç†ï¼Œæœ€è¿‘é‡æ–°æŸ¥é˜…äº†ä¸€äº›èµ„æ–™ï¼Œè®°å½•ä¸€ä¸‹å…³äº Unicode çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œæ–¹ä¾¿æ—¥åå­¦ä¹ ã€‚</p>","more":"<h3 id=\"Unicode\"><a href=\"#Unicode\" class=\"headerlink\" title=\"Unicode\"></a>Unicode</h3><p>Unicode æ˜¯ç›®å‰ç»å¤§å¤šæ•°ç¨‹åºä½¿ç”¨çš„å­—ç¬¦ç¼–ç ï¼Œå®šä¹‰ä¹Ÿå¾ˆç®€å•ï¼Œç”¨ä¸€ä¸ªç ç‚¹ï¼ˆ<code>Code Point</code>ï¼‰æ˜ å°„ä¸€ä¸ªå­—ç¬¦ã€‚ç ç‚¹å€¼çš„èŒƒå›´æ˜¯ä» <code>U+0000</code> åˆ° <code>U+10FFFF</code>ï¼Œå¯ä»¥è¡¨ç¤ºè¶…è¿‡ 110 ä¸‡ä¸ªç¬¦å·ã€‚æ¯”å¦‚ï¼š</p>\n<ul>\n<li>A çš„ç ç‚¹ï¼š<code>U+0041</code></li>\n<li>a çš„ç ç‚¹ï¼š<code>U+0061</code></li>\n<li>ğŸ˜ çš„ç ç‚¹ï¼š<code>U+1F610</code></li>\n</ul>\n<p>æ¯ä¸ªç ç‚¹çš„è¯¦ç»†ä¿¡æ¯éƒ½å¯ä»¥åœ¨ <a href=\"https://codepoints.net/\">Codepoints</a> æŸ¥è¯¢åˆ°ã€‚</p>\n<p>Unicode æœ€å‰é¢çš„ 65536 ä¸ªå­—ç¬¦ä½ï¼Œç§°ä¸ºåŸºæœ¬å¹³é¢ï¼ˆ<code>Basic Multilingual Plane</code>ï¼‰ï¼Œå®ƒçš„ç ç‚¹èŒƒå›´æ˜¯ä» <code>U+0000</code> åˆ° <code>U+FFFF</code>ã€‚æœ€å¸¸è§çš„å­—ç¬¦éƒ½æ”¾åœ¨è¿™ä¸ªå¹³é¢ï¼Œè¿™æ˜¯ Unicode æœ€å…ˆå®šä¹‰å’Œå…¬å¸ƒçš„ä¸€ä¸ªå¹³é¢ã€‚</p>\n<p>å‰©ä¸‹çš„å­—ç¬¦éƒ½æ”¾åœ¨è¡¥å……å¹³é¢ï¼ˆ<code>Supplementary Plane</code>ï¼‰ï¼Œç ç‚¹èŒƒå›´ä» <code>U+010000</code> ä¸€ç›´åˆ° <code>U+10FFFF</code>ï¼Œå…± 16 ä¸ªã€‚</p>\n<h3 id=\"UTF-ä¸-UCS\"><a href=\"#UTF-ä¸-UCS\" class=\"headerlink\" title=\"UTF ä¸ UCS\"></a>UTF ä¸ UCS</h3><p>UTFï¼ˆ<code>Unicode Transformation Format</code>ï¼‰Unicode è½¬æ¢æ ¼å¼ï¼Œæ˜¯æœåŠ¡äº Unicode çš„ï¼Œç”¨äºå°†ä¸€ä¸ª Unicode ç ç‚¹è½¬æ¢ä¸ºç‰¹å®šçš„å­—èŠ‚åºåˆ—ã€‚å¸¸è§çš„ UTF æœ‰ï¼š</p>\n<blockquote>\n<p>UTF-8 å¯å˜å­—èŠ‚åºåˆ—ï¼Œç”¨ 1 åˆ° 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹ UTF-16 å¯å˜å­—èŠ‚åºåˆ—ï¼Œç”¨ 2 æˆ– 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹ UTF-32 å›ºå®šå­—èŠ‚åºåˆ—ï¼Œç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹</p>\n</blockquote>\n<p>ç„¶è€Œï¼Œç”±äº JS é—®ä¸–çš„æ—¶å€™ï¼Œ<code>UTF-16</code> è¿˜æ²¡æœ‰è¯ç”Ÿï¼Œæ‰€ä»¥ä½¿ç”¨äº† <code>UCS-2</code> æ¥å¤„ç†å­—ç¬¦ï¼Œä¹Ÿå› æ­¤ç•™ä¸‹äº†å¾ˆå¤šå‘ã€‚</p>\n<p>UCSï¼ˆ<code>Universal Character Set</code>ï¼‰é€šç”¨å­—ç¬¦é›†ï¼Œæ˜¯ä¸€ä¸ª ISO æ ‡å‡†ï¼Œç›®å‰ä¸ Unicode å¯ä»¥è¯´æ˜¯ç­‰ä»·çš„ã€‚ ç›¸å¯¹äº UTFï¼ŒUCS ä¹Ÿæœ‰è‡ªå·±çš„è½¬æ¢æ–¹æ³•ï¼ˆç¼–ç ï¼‰ã€‚å¦‚ï¼š</p>\n<blockquote>\n<p>UCS-2 ç”¨ 2 ä¸ªå­—èŠ‚è¡¨ç¤º BMP çš„ç ç‚¹ UCS-4 ç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºç ç‚¹</p>\n</blockquote>\n<p><code>UCS-2</code> æ˜¯ä¸€ä¸ªè¿‡æ—¶çš„ç¼–ç æ–¹å¼ï¼Œå› ä¸ºå®ƒåªèƒ½ç¼–ç åŸºæœ¬å¹³é¢ï¼ˆBMPï¼‰çš„ç ç‚¹ï¼Œåœ¨ BMP çš„ç¼–ç ä¸Šï¼Œä¸ <code>UTF-16</code> æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºæ˜¯ <code>UTF-16</code> çš„ä¸€ä¸ªå­é›†ã€‚</p>\n<p><code>UCS-4</code> åˆ™ä¸ <code>UTF-32</code> ç­‰ä»·ï¼Œéƒ½æ˜¯ç”¨ 4 ä¸ªå­—èŠ‚æ¥ç¼–ç  Unicodeã€‚</p>\n<p><code>UTF-16</code> å¯¹äº BMP çš„ç ç‚¹ï¼Œé‡‡ç”¨ 2 ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç ï¼Œè€Œ BMP ä¹‹å¤–çš„ç ç‚¹ï¼Œç”¨ 4 ä¸ªå­—èŠ‚ç»„æˆä»£ç†å¯¹ï¼ˆ<code>Surrogate Pair</code>ï¼‰æ¥è¡¨ç¤ºã€‚å…¶ä¸­å‰ä¸¤ä¸ªå­—èŠ‚èŒƒå›´æ˜¯ <code>U+D800</code> åˆ° <code>U+DBFF</code>ï¼Œåä¸¤ä¸ªå­—èŠ‚èŒƒå›´æ˜¯ <code>U+DC00</code> åˆ° <code>U+DFFF</code>ï¼Œé€šè¿‡ä»¥ä¸‹å…¬å¼å®Œæˆæ˜ å°„ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-comment\">// ï¼ˆHï¼šé«˜å­—èŠ‚ Lï¼šä½å­—èŠ‚ cï¼šç ç‚¹ï¼‰</span><br><br>H = <span class=\"hljs-title class_\">Math</span>.<span class=\"hljs-title function_\">floor</span>((c - <span class=\"hljs-number\">0x10000</span>) / <span class=\"hljs-number\">0x400</span>) + <span class=\"hljs-number\">0xD800</span><br><br>L = (c â€“ <span class=\"hljs-number\">0x10000</span>) % <span class=\"hljs-number\">0x400</span> + <span class=\"hljs-number\">0xDC00</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"JS-å­—ç¬¦å¤„ç†\"><a href=\"#JS-å­—ç¬¦å¤„ç†\" class=\"headerlink\" title=\"JS å­—ç¬¦å¤„ç†\"></a>JS å­—ç¬¦å¤„ç†</h3><p>è¿™é‡Œæˆ‘ä»¬æ‹¿ä¸Šé¢çš„ ğŸ˜ çš„ç ç‚¹æ¥è§£é‡Šï¼Œç”±äº JS è®¤ä¸º 2 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè€Œ ğŸ˜ åœ¨ JS ä¸­çš„ç¼–ç æ˜¯ <code>\\ud83d\\ude10</code>ï¼Œæ‰€ä»¥è¿™ä¸ªè¡¨æƒ…æ˜¯å ä¸¤ä¸ªå­—ç¬¦çš„ï¼Œé‚£ä¹ˆè¿™æ—¶ç”¨ length åˆ¤æ–­é•¿åº¦çš„æ—¶å€™ä¼šæ˜¯ 2ã€‚</p>\n<p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ­£åˆ™æ¥è¯†åˆ«è¿™äº›å ä¸¤ä¸ªå­—ç¬¦çš„æ–‡å­—æˆ–è¡¨æƒ…ï¼Œç„¶åå°†å…¶æ›¿æ¢ä¸º BMP å†…çš„å­—ç¬¦å°±å¯ä»¥äº†ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs Javascript\"><span class=\"hljs-keyword\">var</span> reg = <span class=\"hljs-regexp\">/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g</span> <span class=\"hljs-comment\">// åŒ¹é… UTF-16 çš„ä»£ç†å¯¹</span><br><br><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">count</span>(<span class=\"hljs-params\">string</span>) &#123;<br>\t<span class=\"hljs-keyword\">return</span> string<br>\t\t.<span class=\"hljs-title function_\">replace</span>(reg, <span class=\"hljs-string\">&#x27;-&#x27;</span>)<br>\t\t.<span class=\"hljs-property\">length</span><br>&#125;<br><br><span class=\"hljs-title function_\">count</span>(<span class=\"hljs-string\">&#x27;ğŸ˜&#x27;</span>) <span class=\"hljs-comment\">// 1</span><br></code></pre></td></tr></table></figure>\n\n<p>å½“ç„¶ï¼ŒES6 ä¸­å·²ç»å¢åŠ äº†å¾ˆå¤šå¯¹äº Unicode å­—ç¬¦çš„æ–°æ–¹æ³•ï¼Œæ¯”å¦‚ <code>String.codePointAt()</code> æ–¹æ³•ï¼Œ<code>\\u&#123;128528&#125;</code> é€šè¿‡åŠ ä¸ŠèŠ±æ‹¬å·å’Œæ ‡ç¤ºæ¥è¡¨ç¤ºè€Œä¸ç”¨å»è®¡ç®—ä»£ç†å¯¹ã€‚</p>"}],"PostAsset":[],"PostCategory":[{"post_id":"clejnkd4q0001uoqrbawiafgx","category_id":"clejnkd4t0003uoqrf5v6345d","_id":"clejnkd4v0006uoqr99k95k9i"},{"post_id":"clejnkd4w0007uoqr5l8d0h3m","category_id":"clejnkd4t0003uoqrf5v6345d","_id":"clejnkd4z000duoqrf0nudust"},{"post_id":"clejnkd4w0008uoqr3lrzgc97","category_id":"clejnkd4y000buoqr0ocdex44","_id":"clejnkd50000iuoqrfcii8qla"},{"post_id":"clejnkd4x000auoqrfdpv8z9t","category_id":"clejnkd4z000guoqr5e1b2iua","_id":"clejnkd51000muoqr8ze678ci"},{"post_id":"clejnkd4y000cuoqr64eg3sic","category_id":"clejnkd4z000guoqr5e1b2iua","_id":"clejnkd51000puoqrhvwsayit"}],"PostTag":[{"post_id":"clejnkd4q0001uoqrbawiafgx","tag_id":"clejnkd4u0004uoqrfue53069","_id":"clejnkd4v0005uoqr2h6k97f4"},{"post_id":"clejnkd4w0007uoqr5l8d0h3m","tag_id":"clejnkd4x0009uoqr8mtj99a8","_id":"clejnkd4z000fuoqrb1ssejqf"},{"post_id":"clejnkd4w0008uoqr3lrzgc97","tag_id":"clejnkd4z000euoqrfvhdejzo","_id":"clejnkd50000juoqr0vjg9cdr"},{"post_id":"clejnkd4x000auoqrfdpv8z9t","tag_id":"clejnkd4z000huoqrciv36l3t","_id":"clejnkd51000nuoqr9aikhp31"},{"post_id":"clejnkd4y000cuoqr64eg3sic","tag_id":"clejnkd51000luoqr7oi3ca6m","_id":"clejnkd51000quoqrez9mcoxr"},{"post_id":"clejnkd4y000cuoqr64eg3sic","tag_id":"clejnkd51000ouoqrc2j1a4x0","_id":"clejnkd51000ruoqr7ig8d2y9"}],"Tag":[{"name":"Telegram","_id":"clejnkd4u0004uoqrfue53069"},{"name":"Hexo","_id":"clejnkd4x0009uoqr8mtj99a8"},{"name":"Network","_id":"clejnkd4z000euoqrfvhdejzo"},{"name":"Browser","_id":"clejnkd4z000huoqrciv36l3t"},{"name":"Javascript","_id":"clejnkd51000luoqr7oi3ca6m"},{"name":"Unicode","_id":"clejnkd51000ouoqrc2j1a4x0"}]}}