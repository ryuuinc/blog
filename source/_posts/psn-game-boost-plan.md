---
title: PSN 游戏下载更新加速方案
date: 2019-01-27 19:25:40
categories:
  - Life
tags:
  - Network
index_img: /img/psn-game-boost-plan/banner.png
---

作为一个主机玩家，最头疼的地方还是 PS4 系统更新和游戏下载的速度。早前由于索尼并没有在国内部署 PSN 下载服务的 CDN，所以下载速度捉急。但是现在国内的大部分 DNS 服务商都能正确的将 PSN 的相关域名解析到国内的服务器上，但是偶尔还是会出现一些问题，今天就来聊下相关的解决办法。

<!-- more -->

### 须知

PSN 的游戏和更新都是通过 `gs2.ww.prod.dl.playstation.net` 这个域名，同时索尼也在他的各个主要市场地区部署了同样的镜像服务器。

早前国内由于没有部署 CDN，所以很多玩家都是通过 `PSX Download Helper` 这个软件将游戏下载到电脑上然后在转移到 PS 中，相关教程可以看这里

到后来国行的 PS 发布之后，国内的 DNS 服务商基本都能正确解析 `gs2.ww.prod.dl.playstation.net` 了，这样普通玩家不需要任何操作都能实现高速下载了。

### 问题

- 国内 DNS 服务器仍然会把 `gs2.ww.prod.dl.playstation.net` 解析到国外导致下载变慢，不仅仅是运营商的 DNS 解析，包括一些公共的 DNS 解析如 114 和腾讯 DNS 都偶尔会出现这种问题。

- 某些 PSN 游戏，就算 DNS 服务器给出了国内 IP 仍然下载速度很慢。

- 部分游戏采用的是热更新即游戏内更新，这种情况由于更新是从游戏厂家自己的服务器来的，并不在 PSN 服务器上，所以速度仍会不理想。

### 解决办法

一般来说以上情况有几种解决办法，如下：

- 使用运营商提供的精品线路如精品网。

- 使用某些游戏加速器服务商提供的加速宝，例如奇游提供的联机宝。

- 购买能够刷固件的路由器，并在路由器上安装 SS、SSR 这种代理服务。

一般来说，2 和 3 都是比较好的解决办法，今天我们聊下第三种解决办法。

我个人是购买了网件的 R7000 然后刷了梅林固件，市面上也有很多路由器能刷类似 OpenWrt 或者 Padavan 这些固件的，推荐去搜索一下相关内容。

### 原理

一般来说，路由器上装好了 SS 之类的代理服务之后，都会提供 Dnsmasq 的功能，这是一个开源项目，它能够提供 DNS 服务，让路由器优先使用本地自定义的 DNS。

例如下图的 DNS 转发 中设置为 `/gs2.ww.prod.dl.playstation.net/119.29.29.29` 的意思就是将 PSN 的下载服务器地址交给 `119.29.29.29` 来解析，而这个 DNS 服务器是腾讯提供的巩固 DNS 服务器。这样的话基本能保证每次都能获得正确的国内的下载地址。

![](https://s1.ax1x.com/2018/05/01/CJwt3t.png)

具体的设定可以参考这里，如果你在国外，也可以通过这种方式来指定 DNS 服务器。

当然，如果你想或者最佳的下载节点，你也可以通过 nslookup 命令来查找最佳的下载节点，比如在 PowerShell 或者 Terminal 中输入 `nslookup gs2.ww.prod.dl.playstation.net 119.29.29.29` 就能获得如下结果（有简化）：

```Bash
Server:		114.114.114.114
Address:	114.114.114.114#53

Name:	a1796.cn.w.tl88.net
Address: 118.123.105.16
Name:	a1796.cn.w.tl88.net
Address: 118.123.105.17
```

图中的 `118.123.105.16` 和 `118.123.105.17` 就是腾讯公共 DNS 服务器给出的它认为最好的 PSN 下载服务器的地址，然后你可以通过 Ping 来测试这两个地址的延迟。如果你想测试其他的 DNS 服务器，只要按以上步骤去做就好，然后将你觉得最好的设置到 DNS 转发中即可。
